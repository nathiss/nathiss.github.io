<!doctype html><html lang=en data-bs-theme=light data-theme-mode=auto><head><script async src="https://www.googletagmanager.com/gtag/js?id=G-CXYG0Q9PH0"></script><script>var dnt,doNotTrack=!1;if(!0&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-CXYG0Q9PH0")}</script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=stylesheet type=text/css href=https://madebyme.today/stylesheets/main.min.a6aacc2fd2428cd17736071e06a68b920ad9963ba7520df83c9819690247860b14445ff1139aa5497a4dc4f7daba1ed13f1600e9b90738ed61c00a0d5d3948f7.css integrity="sha512-pqrML9JCjNF3NgceBqaLkgrZljunUg34PJgZaQJHhgsURF/xE5qlSXpNxPfauh7RPxYA6bkHOO1hwAoNXTlI9w=="><link rel=stylesheet type=text/css href=https://madebyme.today/stylesheets/syntax/light.min.810ddf7ba809ef7e3ddd9dbb2ee588bb789f53e53137f694b70eefbc74bab584727b8c48404ba7efb1281f521f9819edbc45fa27fc66e9114f6d0ddde24b7705.css integrity="sha512-gQ3fe6gJ73493Z27LuWIu3ifU+UxN/aUtw7vvHS6tYRye4xIQEun77EoH1IfmBntvEX6J/xm6RFPbQ3d4kt3BQ=="><link rel=stylesheet type=text/css href=https://madebyme.today/stylesheets/syntax/dark.min.defb25c422b8b0f9d1efa4c19aec6e10c59e9f38de1c3c38d0d0569479d4eedfe1ea32dbb2b2096163cd12250e1e871f84dd0870c39b66b12c3c580291bf623a.css integrity="sha512-3vslxCK4sPnR76TBmuxuEMWenzjeHDw40NBWlHnU7t/h6jLbsrIJYWPNEiUOHocfhN0IcMObZrEsPFgCkb9iOg=="><link rel=icon href=/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://madebyme.today/favicons/favicon-16x16-box-light.png><link rel=icon type=image/png sizes=32x32 href=https://madebyme.today/favicons/favicon-32x32-box-light.png><link rel=icon type=image/png sizes=64x64 href=https://madebyme.today/favicons/favicon-64x64-box-light.png><link rel=apple-touch-icon sizes=180x180 href=https://madebyme.today/favicons/favicon-180x180-box-light.png><link rel=stylesheet href=/3rd-party/katex@v0.16.9/katex.min.css><script defer src=/3rd-party/katex@v0.16.9/katex.min.js></script><script defer src=/3rd-party/katex@v0.16.9/contrib/auto-render.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],throwOnError:!1})})</script><link rel=canonical href=https://madebyme.today/projects/generating-svg-avatars-from-identifiers/><link rel=alternate type=application/rss+xml href=https://madebyme.today/index.xml title=MadeByMe><meta name=description content="When you create a new social service on the internet, one of the things you need to think about is how to make a user&rsquo;s
space feel like their own. Services like GitHub, Roll20, or Reddit
generate &mdash; or allow you to generate &mdash; a custom avatar (i.e. Identicons) for your account. Avatar auto-generation
is especially neat, as it does not require any engagement from the user. Let&rsquo;s try to figure that out on our own."><meta name=author content="Kamil Rusin"><meta name=msapplication-TileColor content="#f5f5f5"><meta name=theme-color content="#f5f5f5"><meta name=twitter:dnt content="on"><meta name=title property="og:title" content="Generating SVG Avatars From Identifiers"><meta property="og:description" content="When you create a new social service on the internet, one of the things you need to think about is how to make a user&rsquo;s
space feel like their own. Services like GitHub, Roll20, or Reddit
generate &mdash; or allow you to generate &mdash; a custom avatar (i.e. Identicons) for your account. Avatar auto-generation
is especially neat, as it does not require any engagement from the user. Let&rsquo;s try to figure that out on our own."><meta property="og:type" content="article"><meta property="og:url" content="https://madebyme.today/projects/generating-svg-avatars-from-identifiers/"><meta name=image property="og:image" content="https://madebyme.today/polaris-1920x1080.webp"><meta name=image property="og:image:secure_url" content="https://madebyme.today/polaris-1920x1080.webp"><meta property="article:section" content="projects"><meta property="article:published_time" content="2024-02-25T14:26:12+01:00"><meta property="article:modified_time" content="2024-02-25T19:45:00+01:00"><meta property="article:author" content="Kamil Rusin"><meta property="og:site_name" content="MadeByMe"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://madebyme.today/polaris-1920x1080.webp"><meta name=twitter:title content="Generating SVG Avatars From Identifiers"><meta name=twitter:description content="When you create a new social service on the internet, one of the things you need to think about is how to make a user’s space feel like their own. Services like GitHub, Roll20, or Reddit generate — or allow you to generate — a custom avatar (i.e. Identicons) for your account. Avatar auto-generation is especially neat, as it does not require any engagement from the user. Let’s try to figure that out on our own."><meta name=twitter:site content="@AreElectrons"><meta name=generator content="Hugo 0.126.1"><title>Generating SVG Avatars From Identifiers - MadeByMe</title>
<script>const themeKey="madebyme-theme",giscusSendMessage=e=>{const t=document.querySelector("iframe.giscus-frame");if(!t)return;t.contentWindow.postMessage({giscus:e},"https://giscus.app")},setTheme=e=>{e==="light"||e==="dark"?localStorage.setItem(themeKey,e):e==="auto"&&localStorage.removeItem(themeKey),reloadTheme()},themeToColor=e=>{if(e==="light")return"#f5f5f5";if(e==="dark")return"#212529";throw`Unknown theme: ${e}`},reloadTheme=()=>{let e=getStoredTheme(),t=e;e===null&&(e=getPreferredTheme(),t="auto"),document.documentElement.setAttribute("data-bs-theme",e),document.documentElement.setAttribute("data-theme-mode",t),giscusSendMessage({setConfig:{theme:e}});const n=themeToColor(e);document.querySelector('meta[name="theme-color"]').setAttribute("content",n),document.querySelector('meta[name="msapplication-TileColor"]').setAttribute("content",n)},getStoredTheme=()=>localStorage.getItem(themeKey),getPreferredTheme=()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";reloadTheme(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{reloadTheme()})</script></head><body class="d-flex flex-column"><nav class="navbar navbar-expand-md"><div class="navbar-container container-md"><a class="navbar-brand user-select-none" href=https://madebyme.today/><svg width="32" height="32" class="brand-image" viewBox="0 0 8.4666662 8.4666669" xmlns="http://www.w3.org/2000/svg"><path d="M4.2333343.0 4.0431084 3.4779276 2.4846858 2.4846842l.9932436 1.5584221L0 4.2333336l3.4779294.1902267-.9932436 1.5583486L4.0431084 4.9887382l.1902259 3.4779285.1902278-3.4780026L5.9819059 5.9819089 4.9886657 4.4235603l3.478001-.1902267-3.478001-.1902273.9932402-1.5584221-1.5583438.9933168zm0 3.5578186.1224401.5530001.5529991.1225149-.5529991.1224402-.1224401.5530008L4.1108194 4.3557738 3.5578188 4.2333336 4.1108194 4.1108187z"/></svg>
<span class="fw-bold text-success fs-6">MadeByMe</span>
</a><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarMenu aria-controls=navbarMenu aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarMenu><ul class="navbar-nav ms-3 ms-md-auto mb-2 mb-md-0"><li><a href=https://madebyme.today/blog/ title=Blog class="nav-link hover-success">Blog</a></li><li><a href=https://madebyme.today/projects/ title=Projects class="nav-link hover-success">Projects</a></li><li><a href=https://jungle.madebyme.today/ title="Welcome to the 🌴 Jungle!" class="nav-link hover-success">🌴 Jungle</a></li><li><a href=https://madebyme.today/cv/ title=Resumé class="nav-link hover-success">Resumé</a></li><li class="d-flex align-items-center"><button id=theme-toggler class="nav-link d-flex align-items-center justify-content-left" title>
<span class="d-block d-md-none"></span></button></li></ul></div></div></nav><main class=site-main><div class=container><div class="row justify-content-center"><div class=generic-col><nav class="breadcrumb mt-2 mb-3"><script type=application/ld+json>{"@context":"https://schema.org/","@type":"BreadcrumbList","itemListOrder":"ItemListOrderAscending","itemListElement":[{"@context":"https://schema.org/","@type":"ListItem","position":1,"name":"MadeByMe","item":"https://madebyme.today/","url":"https://madebyme.today/projects/generating-svg-avatars-from-identifiers/"},{"@context":"https://schema.org/","@type":"ListItem","position":2,"name":"Projects","item":"https://madebyme.today/projects/","url":"https://madebyme.today/projects/generating-svg-avatars-from-identifiers/"},{"@context":"https://schema.org/","@type":"ListItem","position":3,"name":"Generating SVG Avatars From Identifiers","item":"https://madebyme.today/projects/generating-svg-avatars-from-identifiers/","url":"https://madebyme.today/projects/generating-svg-avatars-from-identifiers/"}]}</script><a href=https://madebyme.today/ class="text-decoration-none text-reset hover-success">root</a>
<span class=no-select>»</span>
<a href=https://madebyme.today/projects/ class="text-decoration-none text-reset hover-success">Projects</a>
<span class=no-select>»</span>
<a href=https://madebyme.today/projects/generating-svg-avatars-from-identifiers/ class="text-decoration-none text-reset hover-success">Generating SVG Avatars From Identifiers</a></nav><article class=entry><script type=application/ld+json>{"@context":"https://schema.org/","@type":"BlogPosting","name":"Generating SVG Avatars From Identifiers","headline":"Generating SVG Avatars From Identifiers | MadeByMe","alternativeHeadline":"Generating SVG Avatars From Identifiers | MadeByMe","url":"https://madebyme.today/projects/generating-svg-avatars-from-identifiers/","datePublished":"2024-02-25T14:26:12+01:00","inLanguage":"en-us","wordCount":2093,"isFamilyFriendly":"true","copyrightYear":"2024","copyrightHolder":{"@context":"https://schema.org/","@type":"Person","givenName":"Kamil","familyName":"Rusin","name":"Kamil Rusin"},"description":"When you create a new social service on the internet, one of the things you need to think about is how to make a user\u0026rsquo;s space feel like their own. Services like GitHub, Roll20, or Reddit generate \u0026mdash; or allow you to generate \u0026mdash; a custom avatar (i.e. Identicons) for your account. Avatar auto-generation is especially neat, as it does not require any engagement from the user. Let\u0026rsquo;s try to figure that out on our own.\n","publisher":{"@context":"https://schema.org/","@type":"Organization","name":"MadeByMe","url":"https://madebyme.today/"},"keywords":["SVG","Rust"],"mainEntityOfPage":"true","articleBody":"When you create a new social service on the internet, one of the things you need to think about is how to make a user\u0026rsquo;s space feel like their own. Services like GitHub, Roll20, or Reddit generate \u0026mdash; or allow you to generate \u0026mdash; a custom avatar (i.e. Identicons) for your account. Avatar auto-generation is especially neat, as it does not require any engagement from the user. Let\u0026rsquo;s try to figure that out on our own.\nStanding on the shoulders of giants This blog post has been inspired by Representing SHA-256 Hashes As Avatars by François Best. I\u0026rsquo;m re-creating ideas presented by François in their article \u0026mdash; with slight modifications \u0026mdash; in Rust.\nI think this blog post is one of those things which are easier to understand if you\u0026rsquo;d see the end result first. So, for those interested here\u0026rsquo;s a spoiler.\nSpoiler! This is the end result:\nAvatar for identifier \u0026quot;Foo\u0026quot;.\nThe avatar has 24 segments and consists of 24 \u0026lt;path\u0026gt; tags. The coordinates describing paths are static, but their colors are generated from SHA-256 of the identifier.\n1SHA256(\u0026#34;Foo\u0026#34;) == [ 44, 38, 180, 107, 104, 255, 198, 143, 2 249, 155, 69, 60, 29, 48, 65, 52, 3 19, 66, 45, 112, 100, 131, 191, 160, 4 249, 138, 94, 136, 98, 102, 231, 174] 5 6Base64(SHA256(\u0026#34;Foo\u0026#34;)) == LCa0a2j/xo/5m0U8HTBBNBNCLXBkg7+g+YpeiGJm564= The rest of this blog post focuses on translating the byte array into an avatar that looks nice.\n#SVG scaffolding Let\u0026rsquo;s think how to prepare the SVG\u0026rsquo;s structure. We know that each segment must be its own \u0026lt;path\u0026gt; element, so we can color them individually with the fill property. Generating annuluses sectors can be challenging \u0026mdash; it would require using two(!) arcs, which is way too much \u0026mdash; instead, we can cheat a little and create overlapping circle sectors. It will make paths simpler and requires only one(!) arc.\nStarting with the \u0026lt;svg\u0026gt; tag we get:\n1\u0026lt;svg viewBox=\u0026#34;-1 -1 2 2\u0026#34; xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u0026gt; 2 \u0026lt;!-- ... --\u0026gt; 3\u0026lt;/svg\u0026gt; Paths generation gets much easier if the center of \u0026ldquo;circles\u0026rdquo; is in $(0, 0)$. We can do that by setting the viewBox property as shown above: top-left corner is $(-1, -1)$, width is $2$, and height is $2$.\nOK. Now we need to create circle sectors. SVG has some tags for constructing basic shapes (like circles, rectangles, or ellipses). Sadly, pizza slices are not considered as \u0026ldquo;basic\u0026rdquo;, so there\u0026rsquo;s no \u0026lt;pizza-slice\u0026gt; to help us here. Instead, we need to use the \u0026lt;path\u0026gt; tag.\n#Making pizza slices \u0026#x1f355; The \u0026lt;path\u0026gt; tag is nice, because it allows you to construct any complex shape. For it to work we need to describe how we want our shape to look like with its special path data syntax. It\u0026rsquo;s fairly complex, but we only need to grasp 4 of its commands:\nthe absolute \u0026ldquo;moveto\u0026rdquo; command \u0026mdash; which establishes a new initial point, the absolute \u0026ldquo;lineto\u0026rdquo; command \u0026mdash; which draws a line from the current point to the given $(x, y)$, the absolute elliptical arc curve command \u0026mdash; which draws an elliptical arc from the current point to the given $(x, y)$, the \u0026ldquo;closepath\u0026rdquo; command \u0026mdash; which ends the current path by connecting it back to its initial point. To start easy, let\u0026rsquo;s consider an example with 4 pizza slices:\n1\u0026lt;svg overflow=\u0026#34;visible\u0026#34; viewBox=\u0026#34;-1 -1 2 2\u0026#34; xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u0026gt; 2 \u0026lt;path d=\u0026#34;M 0,0 L 0,-1 A 1,1,0,0,1,1,0 z\u0026#34; fill=\u0026#34;IndianRed\u0026#34; stroke=\u0026#34;black\u0026#34; stroke-width=\u0026#34;0.01\u0026#34; /\u0026gt; 3 \u0026lt;path d=\u0026#34;M 0,0 L 1,0 A 1,1,0,0,1,0,1 z\u0026#34; fill=\u0026#34;LightCoral\u0026#34; stroke=\u0026#34;black\u0026#34; stroke-width=\u0026#34;0.01\u0026#34; /\u0026gt; 4 \u0026lt;path d=\u0026#34;M 0,0 L 0,1 A 1,1,0,0,1,-1,0 z\u0026#34; fill=\u0026#34;Salmon\u0026#34; stroke=\u0026#34;black\u0026#34; stroke-width=\u0026#34;0.01\u0026#34; /\u0026gt; 5 \u0026lt;path d=\u0026#34;M 0,0 L -1,0 A 1,1,0,0,1,0,-1 z\u0026#34; fill=\u0026#34;DarkSalmon\u0026#34; stroke=\u0026#34;black\u0026#34; stroke-width=\u0026#34;0.01\u0026#34; /\u0026gt; 6\u0026lt;/svg\u0026gt; It renders to:\n$$ r_1 = 1 $$\nNote I added overflow=\u0026quot;visible\u0026quot; to the SVG tag, because \u0026mdash; with a non-zero stroke \u0026mdash; the image is slightly bigger than its viewBox and the stroke lines get cut off at $(-1, 0)$, $(1, 0)$, $(0, 1)$, and $(-1, 0)$.\nWe can see an interesting patter here: coordinates of the \u0026ldquo;lineto\u0026rdquo; command are the same, as the coordinates of the elliptical arc curve command of the previous element.\nOk, but how to divide these slices into halves? \u0026mdash; you may ask.\nTo do that we need to find the points in the middle of the arcs.\n(ax, ay) (bx, by) (cx, cy) (dx, dy) $$ r_1 = 1 $$\nFortunately \u0026mdash; since the circle\u0026rsquo;s middle point is $(0, 0)$ and the arc points are in the middle of their arcs \u0026mdash; we know that the absolute value of their coordinates is the same. So, our diagram simplifies to:\n(a, -a) (a, a) (-a, -a) (-a, a) $$ r_1 = 1 $$\nGreat. \u0026#x1f44c;\nNow we can use the equation of a circle to find the middle points.\n$$ \\begin{aligned} (x - x_0)^2 + (y - y_0)^2 \u0026amp;= r^2 \\\\[0.25em] (a - 0)^2 + (a - 0)^2 \u0026amp;= 1^2 \\\\[0.25em] 2a^2 \u0026amp;= 1 \\\\[0.25em] a^2 \u0026amp;= \\frac{1}{2} \\\\[0.25em] a \u0026amp;= \\sqrt{\\frac{1}{2}} \\end{aligned} $$\nBy adding four more pizza slices we get:\n$$ r_1 = 1 $$\n#Layers of pizza The next step is to create additional (smaller) layers of circle sectors. Let\u0026rsquo;s say we want three circles; there\u0026rsquo;re two obvious ways of selecting division points: equal radii, or equal areas. Equal radii is simpler, so let\u0026rsquo;s try this one first.\nIf the outermost circle has a radius of $1$, then the middle circle will have a radius of $0.\\overline{6}$, and the smallest one will have $0.\\overline{3}$.\n$$ r_1 = 1 \\quad\\text{and}\\quad r_2 = 0.\\overline{6} \\quad\\text{and}\\quad r_3 = 0.\\overline{3} $$\nNot that it matters, but the smallest circle is a little too small for my liking. But, before we decide, we need to see circles with equal areas first.\n$$ \\begin{aligned} \\Pi r_1^2 - \\Pi r_2^2 = \\Pi r_2^2 - \\Pi r_3^2 \\quad\u0026amp;\\text{and}\\quad \\Pi r_2^2 - \\Pi r_3^2 = \\Pi r_3^2 \\\\[0.25em] 1 - r_2^2 = r_2^2 - r_3^2 \\quad\u0026amp;\\text{and}\\quad r_2^2 - r_3^2 = r_3^2 \\\\[0.25em] 1 = 2r_2^2 - r_3^2 \\quad\u0026amp;\\text{and}\\quad r_2^2 = 2r_3^2 \\\\[0.25em] 1 = 3r_3^2 \\quad\u0026amp;\\text{and}\\quad r_2^2 = 2r_3^2 \\\\[0.25em] r_3 = \\sqrt{\\frac{1}{3}} \\quad\u0026amp;\\text{and}\\quad r_2 = \\sqrt{\\frac{2}{3}} \\end{aligned} $$\nWhich gives us this avatar:\n$$ r_1 = 1 \\quad\\text{and}\\quad r_2 = \\sqrt{\\frac{2}{3}} \\quad\\text{and}\\quad r_3 = \\sqrt{\\frac{1}{3}} $$\nWhich is also not ideal, but the other way around\u0026hellip; I was tinkering with the radii a bit and I think I found a middle ground with which I\u0026rsquo;m happy.\n$$ r_1 = 1 \\quad\\text{and}\\quad r_2 = \\frac{0.\\overline{6} + \\sqrt{\\frac{2}{3}}}{2} \\quad\\text{and}\\quad r_3 = \\frac{0.\\overline{3} + \\sqrt{\\frac{1}{3}}}{2} $$\nRadii in the circles above are the arithmetic average of the equal radii variant and the equal areas variant.\n#Working with colors With the SVG structure out of the way we can focus on selecting quasi-random colors for the circle segments based on the identifier\u0026rsquo;s hash. SHA-256 hashes have 32 bytes; it\u0026rsquo;s more than we need \u0026mdash; assuming we need a single byte per circle sector \u0026mdash; which gives us another benefit: we can slide in the 4th circle, if we want to.\nFor now though, let\u0026rsquo;s talk about the colors. If we\u0026rsquo;d use HSL, we can split each byte into 4 pieces: 4 bits for hue (since it\u0026rsquo;s the most dominant), 2 bits for saturation, and 2 bits for lightness. Path\u0026rsquo;s fill property accepts any paint value, which basically means we need to format our color to a standard CSS\u0026rsquo;s hue.\n1fn to_color(byte: u8) -\u0026gt; String { 2 let h = byte \u0026gt;\u0026gt; 4; 3 let s = (byte \u0026gt;\u0026gt; 2) \u0026amp; 0x03; 4 let l = byte \u0026amp; 0x03; 5 6 let normalized_h = (h as f32) / 16.0; 7 let normalized_s = (s as f32) / 4.0; 8 let normalized_l = (l as f32) / 4.0; 9 10 let h = 360.0 * normalized_h; 11 let s = 20.0 + 80.0 * normalized_s; 12 let l = 40.0 + 50.0 * normalized_l; 13 14 format!(\u0026#34;hsl({h}, {s}%, {l}%)\u0026#34;) 15} Alright, let\u0026rsquo;s generate an avatar for \u0026quot;foo\u0026quot; and see how it looks like.\nAvatar for \u0026quot;foo\u0026quot;.\nWell, it does not look terrible, but it\u0026rsquo;s not eye-catching either. To be perfectly honest, we should expect something like this; SHA-256 returns (and for that matter all other hash functions too) a quasi-random values. If we convert those raw bytes to fill colors, we\u0026rsquo;ll get quasi-random colors. To make it nicer we need to modify our algorithm slightly; we need to calculate a global theme, if you will, for the avatar, so that a part of circle segments' colors come from that theme. We can do that by folding all hash bytes into a single one with XOR.\n1fn to_color(normalized_theme: f32, byte: u8) -\u0026gt; String { 2 let h = byte \u0026gt;\u0026gt; 4; 3 let s = (byte \u0026gt;\u0026gt; 2) \u0026amp; 0x03; 4 let l = byte \u0026amp; 0x03; 5 6 let normalized_h = (h as f32) / 16.0; 7 let normalized_s = (s as f32) / 4.0; 8 let normalized_l = (l as f32) / 4.0; 9 10 let h = 360.0 * normalized_theme + 120.0 * normalized_h; 11 let s = 20.0 + 80.0 * normalized_s; 12 let l = 40.0 + 50.0 * normalized_l; 13 14 format!(\u0026#34;hsl({h}, {s}%, {l}%)\u0026#34;) 15} 16 17fn calculate_theme(bytes: \u0026amp;[u8]) -\u0026gt; f32 { 18 let theme = bytes.iter() 19 .fold(0u8, |acc, byte| acc ^ byte); 20 (theme as f32) / (u8::MAX as f32) 21} 22 23fn generate_paths(hash: [u8; 32]) { 24 let theme = calculate_theme(\u0026amp;hash); 25 26 let colors = hash.iter() 27 .cloned() 28 .map(|byte| to_color(theme, byte)) 29 .collect::\u0026lt;Vec\u0026lt;_\u0026gt;\u0026gt;(); 30 31 unimplemented!(\u0026#34;Generate SVG paths.\u0026#34;); 32} This code renders:\nAvatar for \u0026quot;foo\u0026quot; with a theme.\nIt looks rather good, if I say so myself. The solution works as it\u0026rsquo;s suppose to: it most probably produces different avatars for different identifiers (hash collisions do happen) and they look acceptable. However, the rings seem to phase into each other \u0026mdash; their colors are too similar. We could experiment with another theme: a ring theme \u0026mdash; which would be a XOR-fold of all bytes that represent a single ring \u0026mdash; and check the results.\n1fn to_color(normalized_theme: f32, normalized_ring_theme: f32, byte: u8) -\u0026gt; String { 2 let h = byte \u0026gt;\u0026gt; 4; 3 let s = (byte \u0026gt;\u0026gt; 2) \u0026amp; 0x03; 4 let l = byte \u0026amp; 0x03; 5 6 let normalized_h = (h as f32) / 16.0; 7 let normalized_s = (s as f32) / 4.0; 8 let normalized_l = (l as f32) / 4.0; 9 10 let h = 360.0 * normalized_theme 11 + 120.0 * normalized_ring_theme 12 + 30.0 * normalized_h; 13 let s = 20.0 + 80.0 * normalized_s; 14 let l = 40.0 + 50.0 * normalized_l; 15 16 format!(\u0026#34;hsl({h}, {s}%, {l}%)\u0026#34;) 17} 18 19fn calculate_theme(bytes: \u0026amp;[u8]) -\u0026gt; f32 { 20 let theme = bytes.iter().fold(0u8, |acc, byte| acc ^ byte); 21 (theme as f32) / (u8::MAX as f32) 22} 23 24fn generate_paths(hash: [u8; 32]) { 25 let theme = calculate_theme(\u0026amp;hash); 26 let ring_themes = hash 27 .windows(8) 28 .map(calculate_theme) 29 .collect::\u0026lt;Vec\u0026lt;_\u0026gt;\u0026gt;(); 30 31 let colors = hash 32 .iter() 33 .cloned() 34 .enumerate() 35 .map(|(idx, byte)| to_color(theme, ring_themes[idx % 8], byte)) 36 .collect::\u0026lt;Vec\u0026lt;_\u0026gt;\u0026gt;(); 37 38 unimplemented!(\u0026#34;Generate SVG paths.\u0026#34;); 39} With the final touch we get:\nAvatar for \u0026quot;foo\u0026quot; with a global theme and a ring theme.\nWhich is exactly the thing that hides in the spoiler block at the top. If you restrained yourself and didn\u0026rsquo;t check it out: congratulations. Now feel free to do so. \u0026#x1f603;\n#Conclusions Working on this blog post has been an effort I wanted to make to better understand how SVGs work from the inside, as well as, a challenge to reverse-engineer ideas from Representing SHA-256 Hashes As Avatars.\nI\u0026rsquo;m not working on any service which would benefit from these avatars. If I happen to work on one in the future I\u0026rsquo;ll for sure like to try them out. To make this solution easier to re-use in other places, I\u0026rsquo;ve made a Rust crate called svg_avatars, which implements this exact solution. The crate is fairly minimal, so if anyone has any idea on how to enhance it, I\u0026rsquo;d love to hear from you/check out your PRs.\nAs a closing thought, one of the parameters of the absolute elliptical arc curve command is the sweep-flag parameter. It allows you to determine, whether an arc should be a smiley face or a sad face. If the parameter is 1 \u0026mdash; as it is in our case \u0026mdash; then the arc is a sad face. However, if you\u0026rsquo;d flip the flags to be 0, then all arcs become smiley faces\u0026hellip;\nSmiley-face avatar for \u0026quot;foo\u0026quot;.\n\u0026hellip;and the avatar emerges as a spiderweb. Who does not love a single-line-change feature for Spooktober.\n","author":{"@context":"https://schema.org/","@type":"Person","gender":"male","email":"kamil.jakub.rusin@gmail.com","givenName":"Kamil","familyName":"Rusin","name":"Kamil Rusin","jobTitle":"Software Engineer","nationality":{"@context":"https://schema.org/","@type":"Country","name":"PL"},"alumniOf":{"@context":"https://schema.org/","@type":"CollegeOrUniversity","url":"https://www.pk.edu.pl/","name":"The Cracow University of Technology"},"url":"https:\/\/madebyme.today\/"}}</script><script type=application/ld+json>{"@context":"https://schema.org/","@type":"WPHeader","@id":"#article-title","cssSelector":"#article-title"}</script><header><h1 id=article-title class="text-wrap-balance m-0 fs-2">Generating SVG Avatars From Identifiers</h1></header><footer class="entry-meta fw-light d-flex align-items-center flex-wrap"><time datetime=2024-02-25T14:26:12 class="d-flex align-items-center"><span>2024</span>
<span>02</span>
<span>25</span>
</time><span>10 min</span>
<span><span class=text-success>Kamil</span>
<span>Rusin</span></span></footer><aside class=table-of-contents-wrapper><div class=my-3><input id=toc-collapsible class=collapsible-toggle type=checkbox>
<label for=toc-collapsible class="collapsible-label-toggle fw-light">Table Of Contents</label><div class=collapsible-content><div class=collapsible-content-inner><nav id=TableOfContents><ul><li><a href=#svg-scaffolding>SVG scaffolding</a><ul><li><a href=#making-pizza-slices-pizza>Making pizza slices &#x1f355;</a></li><li><a href=#layers-of-pizza>Layers of pizza</a></li></ul></li><li><a href=#working-with-colors>Working with colors</a></li><li><a href=#conclusions>Conclusions</a></li></ul></nav></div></div></div></aside><main class=main><p>When you create a new social service on the internet, one of the things you need to think about is how to make a user&rsquo;s
space feel like their own. Services like <a href=https://github.blog/2013-08-14-identicons/>GitHub</a>, Roll20, or <a href=https://www.reddit.com/r/reddit/comments/vtkmni/introducing_collectible_avatars/>Reddit</a>
generate &mdash; or allow you to generate &mdash; a custom avatar (i.e. <a href=https://en.wikipedia.org/wiki/Identicon>Identicons</a>) for your account. Avatar auto-generation
is especially neat, as it does not require any engagement from the user. Let&rsquo;s try to figure that out on our own.</p><div class="alert alert-info"><h6 class=alert-heading><i class="bi bi-globe-europe-africa me-2" aria-hidden=true></i>Standing on the shoulders of giants</h6><p class=my-3>This blog post has been inspired by <a href=https://francoisbest.com/posts/2021/hashvatars>Representing SHA-256 Hashes As Avatars</a> by <a href=https://francoisbest.com/>François Best</a>. I&rsquo;m re-creating ideas
presented by François in their article &mdash; with slight modifications &mdash; in <a href=https://madebyme.today/tags/rust/>Rust</a>.</p></div><p>I think this blog post is one of those things which are easier to understand if you&rsquo;d see the end result first. So, for
those interested here&rsquo;s a spoiler.</p><div class="alert alert-spoiler"><input id=callout-spoiler-1724633646058838398 class=collapsible-toggle type=checkbox>
<label for=callout-spoiler-1724633646058838398 class="collapsible-label-toggle alert-heading">Spoiler!</label><div class=collapsible-content><div class=collapsible-content-inner><p class=my-3><p>This is the end result:</p><figure><style id=figure-svg-1724633646053907839>#figure-svg-1724633646053907839+svg{width:180px;height:180px}</style><svg overflow="visible" viewBox="-1 -1 2 2" xmlns="http://www.w3.org/2000/svg"><g><path d="M0 0V-1a1 1 0 01.70710677.29289323z" fill="hsl(127.51471, 80%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0 .70710677-.70710677A1 1 0 011 0z" fill="hsl(127.51471, 40%, 65%)" stroke="#000" stroke-width=".01"/><path d="M0 0H1A1 1 0 01.70710677.70710677z" fill="hsl(144.38971, 40%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0 .70710677.70710677A1 1 0 010 1z" fill="hsl(135.01471, 60%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0V1A1 1 0 01-.70710677.70710677z" fill="hsl(135.01471, 60%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0-.70710677.70710677A1 1 0 01-1 0z" fill="hsl(151.88971, 80%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0H-1a1 1 0 01.29289323-.70710677z" fill="hsl(146.26471, 40%, 65%)" stroke="#000" stroke-width=".01"/><path d="M0 0-.70710677-.70710677A1 1 0 010-1z" fill="hsl(138.76471, 80%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0V-.7415816a.7415816.7415816.0 01.5243774.2172042z" fill="hsl(251.18384, 60%, 52.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0 .5243774-.5243774A.7415816.7415816.0 01.7415816.0z" fill="hsl(239.93384, 60%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0H.7415816A.7415816.7415816.0 01.5243774.5243774z" fill="hsl(230.55884, 40%, 52.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0 .5243774.5243774A.7415816.7415816.0 010 .7415816z" fill="hsl(228.68384, 80%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0V.7415816A.7415816.7415816.0 01-.5243774.5243774z" fill="hsl(224.93384, 80%, 52.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0-.5243774.5243774A.7415816.7415816.0 01-.7415816.0z" fill="hsl(228.68384, 20%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0H-.7415816a.7415816.7415816.0 01.2172042-.5243774z" fill="hsl(230.55884, 20%, 52.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0-.5243774-.5243774A.7415816.7415816.0 010-.7415816z" fill="hsl(228.68384, 40%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0V-.45534182a.45534182.45534182.0 01.32197526.13336656z" fill="hsl(167.05148, 20%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0 .32197526-.32197526A.45534182.45534182.0 01.45534182.0z" fill="hsl(172.67648, 20%, 65%)" stroke="#000" stroke-width=".01"/><path d="M0 0H.45534182A.45534182.45534182.0 01.32197526.32197526z" fill="hsl(168.92648, 80%, 52.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0 .32197526.32197526A.45534182.45534182.0 010 .45534182z" fill="hsl(178.30148, 20%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0V.45534182A.45534182.45534182.0 01-.32197526.32197526z" fill="hsl(176.42648, 40%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0-.32197526.32197526A.45534182.45534182.0 01-.45534182.0z" fill="hsl(180.17648, 20%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0H-.45534182a.45534182.45534182.0 01.13336656-.32197526z" fill="hsl(185.80148, 80%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0-.32197526-.32197526A.45534182.45534182.0 010-.45534182z" fill="hsl(183.92648, 20%, 40%)" stroke="#000" stroke-width=".01"/></g></svg><figcaption><p>Avatar for identifier "Foo".</p></figcaption></figure><p>The avatar has 24 segments and consists of 24 <a href=https://www.w3.org/TR/SVG2/paths.html#PathElement><code>&lt;path></code></a> tags. The coordinates describing paths are static, but their
colors are generated from <a href=https://en.wikipedia.org/wiki/SHA-2>SHA-256</a> of the identifier.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=ln id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a></span><span class=cl>SHA256(&#34;Foo&#34;) == [ 44,  38, 180, 107, 104, 255, 198, 143,
</span></span><span class=line><span class=ln id=hl-0-2><a class=lnlinks href=#hl-0-2>2</a></span><span class=cl>                  249, 155,  69,  60,  29,  48,  65,  52,
</span></span><span class=line><span class=ln id=hl-0-3><a class=lnlinks href=#hl-0-3>3</a></span><span class=cl>                   19,  66,  45, 112, 100, 131, 191, 160,
</span></span><span class=line><span class=ln id=hl-0-4><a class=lnlinks href=#hl-0-4>4</a></span><span class=cl>                  249, 138,  94, 136,  98, 102, 231, 174]
</span></span><span class=line><span class=ln id=hl-0-5><a class=lnlinks href=#hl-0-5>5</a></span><span class=cl>
</span></span><span class=line><span class=ln id=hl-0-6><a class=lnlinks href=#hl-0-6>6</a></span><span class=cl>Base64(SHA256(&#34;Foo&#34;)) == LCa0a2j/xo/5m0U8HTBBNBNCLXBkg7+g+YpeiGJm564=
</span></span></code></pre></div><p>The rest of this blog post focuses on translating the byte array into an avatar that looks <em>nice</em>.</p></p></div></div></div><h2 id=svg-scaffolding><a href=#svg-scaffolding aria-label=Anchor>#</a>SVG scaffolding</h2><p>Let&rsquo;s think how to prepare the SVG&rsquo;s structure. We know that each segment must be its own <a href=https://www.w3.org/TR/SVG2/paths.html#PathElement><code>&lt;path></code></a> element, so we can
color them individually with the <a href=https://www.w3.org/TR/SVG2/painting.html#SpecifyingFillPaint>fill</a> property. Generating annuluses sectors can be challenging &mdash; it would require
using two(!) <a href=https://www.w3.org/TR/SVG2/paths.html#PathDataEllipticalArcCommands>arcs</a>, which is way too much &mdash; instead, we can cheat a little and create overlapping
circle sectors. It will make paths simpler and requires only one(!) arc.</p><p>Starting with the <code>&lt;svg></code> tag we get:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-svg data-lang=svg><span class=line><span class=ln id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a></span><span class=cl><span class=nt>&lt;svg</span> <span class=na>viewBox=</span><span class=s>&#34;-1 -1 2 2&#34;</span> <span class=na>xmlns=</span><span class=s>&#34;http://www.w3.org/2000/svg&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=ln id=hl-0-2><a class=lnlinks href=#hl-0-2>2</a></span><span class=cl>    <span class=c>&lt;!-- ... --&gt;</span>
</span></span><span class=line><span class=ln id=hl-0-3><a class=lnlinks href=#hl-0-3>3</a></span><span class=cl><span class=nt>&lt;/svg&gt;</span>
</span></span></code></pre></div><p>Paths generation gets much easier if the center of &ldquo;circles&rdquo; is in $(0, 0)$. We can do that by setting the <code>viewBox</code>
property as shown above: top-left corner is $(-1, -1)$, width is $2$, and height is $2$.</p><p>OK. Now we need to create circle sectors. SVG has some tags for constructing <a href=https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Basic_Shapes>basic shapes</a> (like circles, rectangles,
or ellipses). Sadly, pizza slices are <em>not</em> considered as &ldquo;basic&rdquo;, so there&rsquo;s no <code>&lt;pizza-slice></code> to help us here.
Instead, we need to use the <a href=https://www.w3.org/TR/SVG2/paths.html#PathElement><code>&lt;path></code></a> tag.</p><h3 id=making-pizza-slices-pizza><a href=#making-pizza-slices-pizza aria-label=Anchor>#</a>Making pizza slices &#x1f355;</h3><p>The <a href=https://www.w3.org/TR/SVG2/paths.html#PathElement><code>&lt;path></code></a> tag is nice, because it allows you to construct any complex shape. For it to work we need to describe how
we want our shape to look like with its special <a href=https://www.w3.org/TR/SVG2/paths.html#PathData>path data</a> syntax. It&rsquo;s fairly complex, but we only need to grasp 4 of
its commands:</p><ul><li>the <a href=https://www.w3.org/TR/SVG2/paths.html#PathDataMovetoCommands>absolute <strong>&ldquo;moveto&rdquo;</strong></a> command &mdash; which establishes a new initial point,</li><li>the <a href=https://www.w3.org/TR/SVG2/paths.html#PathDataLinetoCommands>absolute <strong>&ldquo;lineto&rdquo;</strong></a> command &mdash; which draws a line from the current point to the given
$(x, y)$,</li><li>the <a href=https://www.w3.org/TR/SVG2/paths.html#PathDataEllipticalArcCommands>absolute elliptical arc curve</a> command &mdash; which draws an elliptical arc from the current point to
the given $(x, y)$,</li><li>the <a href=https://www.w3.org/TR/SVG2/paths.html#PathDataClosePathCommand><strong>&ldquo;closepath&rdquo;</strong></a> command &mdash; which ends the current path by connecting it back to its initial
point.</li></ul><p>To start easy, let&rsquo;s consider an example with 4 pizza slices:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-svg data-lang=svg><span class=line><span class=ln id=hl-1-1><a class=lnlinks href=#hl-1-1>1</a></span><span class=cl><span class=nt>&lt;svg</span> <span class=na>overflow=</span><span class=s>&#34;visible&#34;</span> <span class=na>viewBox=</span><span class=s>&#34;-1 -1 2 2&#34;</span> <span class=na>xmlns=</span><span class=s>&#34;http://www.w3.org/2000/svg&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=ln id=hl-1-2><a class=lnlinks href=#hl-1-2>2</a></span><span class=cl>    <span class=nt>&lt;path</span> <span class=na>d=</span><span class=s>&#34;M 0,0 L 0,-1 A 1,1,0,0,1,1,0 z&#34;</span> <span class=na>fill=</span><span class=s>&#34;IndianRed&#34;</span> <span class=na>stroke=</span><span class=s>&#34;black&#34;</span> <span class=na>stroke-width=</span><span class=s>&#34;0.01&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=ln id=hl-1-3><a class=lnlinks href=#hl-1-3>3</a></span><span class=cl>    <span class=nt>&lt;path</span> <span class=na>d=</span><span class=s>&#34;M 0,0 L 1,0 A 1,1,0,0,1,0,1 z&#34;</span> <span class=na>fill=</span><span class=s>&#34;LightCoral&#34;</span> <span class=na>stroke=</span><span class=s>&#34;black&#34;</span> <span class=na>stroke-width=</span><span class=s>&#34;0.01&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=ln id=hl-1-4><a class=lnlinks href=#hl-1-4>4</a></span><span class=cl>    <span class=nt>&lt;path</span> <span class=na>d=</span><span class=s>&#34;M 0,0 L 0,1 A 1,1,0,0,1,-1,0 z&#34;</span> <span class=na>fill=</span><span class=s>&#34;Salmon&#34;</span> <span class=na>stroke=</span><span class=s>&#34;black&#34;</span> <span class=na>stroke-width=</span><span class=s>&#34;0.01&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=ln id=hl-1-5><a class=lnlinks href=#hl-1-5>5</a></span><span class=cl>    <span class=nt>&lt;path</span> <span class=na>d=</span><span class=s>&#34;M 0,0 L -1,0 A 1,1,0,0,1,0,-1 z&#34;</span> <span class=na>fill=</span><span class=s>&#34;DarkSalmon&#34;</span> <span class=na>stroke=</span><span class=s>&#34;black&#34;</span> <span class=na>stroke-width=</span><span class=s>&#34;0.01&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=ln id=hl-1-6><a class=lnlinks href=#hl-1-6>6</a></span><span class=cl><span class=nt>&lt;/svg&gt;</span>
</span></span></code></pre></div><p>It renders to:</p><figure><style id=figure-svg-1724633646059073809>#figure-svg-1724633646059073809+svg{width:180px;height:180px}</style><svg overflow="visible" viewBox="-1 -1 2 2" xmlns="http://www.w3.org/2000/svg"><path d="M0 0V-1A1 1 0 011 0z" fill="#cd5c5c" stroke="#000" stroke-width=".01"/><path d="M0 0H1A1 1 0 010 1z" fill="#f08080" stroke="#000" stroke-width=".01"/><path d="M0 0V1A1 1 0 01-1 0z" fill="salmon" stroke="#000" stroke-width=".01"/><path d="M0 0H-1A1 1 0 010-1z" fill="#e9967a" stroke="#000" stroke-width=".01"/></svg></figure><p>$$
r_1 = 1
$$</p><div class="alert alert-info"><h6 class=alert-heading><i class="bi bi-pencil me-2" aria-hidden=true></i>Note</h6><p class=my-3>I added <code>overflow="visible"</code> to the SVG tag, because &mdash; with a non-zero stroke &mdash; the image is <em>slightly</em> bigger than
its <code>viewBox</code> and the stroke lines get cut off at $(-1, 0)$, $(1, 0)$, $(0, 1)$, and $(-1, 0)$.</p></div><p>We can see an interesting patter here: coordinates of the <a href=https://www.w3.org/TR/SVG2/paths.html#PathDataLinetoCommands><strong>&ldquo;lineto&rdquo;</strong></a> command are the same, as the
coordinates of the <a href=https://www.w3.org/TR/SVG2/paths.html#PathDataEllipticalArcCommands>elliptical arc curve</a> command of the <em>previous</em> element.</p><p><em>Ok, but how to divide these slices into halves?</em> &mdash; you may ask.</p><p>To do that we need to find the points in the middle of the arcs.</p><figure><style id=figure-svg-1724633646059539412>#figure-svg-1724633646059539412+svg{width:180px;height:180px}</style><svg id="slices-with-points" overflow="visible" viewBox="-1 -1 2 2" xmlns="http://www.w3.org/2000/svg"><style>#slices-with-points text{font-size:.2px;font-family:var(--bs-font-monospace);fill:var(--bs-body-color);display:inline-block}#slices-with-points circle{fill:var(--bs-body-color)}</style><path d="M0 0V-1A1 1 0 011 0z" fill="#cd5c5c" stroke="#000" stroke-width=".01"/><path d="M0 0H1A1 1 0 010 1z" fill="#f08080" stroke="#000" stroke-width=".01"/><path d="M0 0V1A1 1 0 01-1 0z" fill="salmon" stroke="#000" stroke-width=".01"/><path d="M0 0H-1A1 1 0 010-1z" fill="#e9967a" stroke="#000" stroke-width=".01"/><circle cx=".70710678118" cy="-.70710678118" r=".03"/><text x=".70710678118" y="-.70710678118" text-anchor="start" dominant-baseline="text-top">(ax, ay)</text><circle cx=".70710678118" cy=".70710678118" r=".03"/><text x=".70710678118" y=".70710678118" text-anchor="start" dominant-baseline="hanging">(bx, by)</text><circle cx="-.70710678118" cy="-.70710678118" r=".03"/><text x="-.70710678118" y="-.70710678118" text-anchor="end" dominant-baseline="text-top">(cx, cy)</text><circle cx="-.70710678118" cy=".70710678118" r=".03"/><text x="-.70710678118" y=".70710678118" text-anchor="end" dominant-baseline="hanging">(dx, dy)</text></svg></figure><p>$$
r_1 = 1
$$</p><p>Fortunately &mdash; since the circle&rsquo;s middle point is $(0, 0)$ and the arc points are in the middle of their arcs &mdash; we
know that the absolute value of their coordinates is the same. So, our diagram simplifies to:</p><figure><style id=figure-svg-1724633646059830818>#figure-svg-1724633646059830818+svg{width:180px;height:180px}</style><svg id="slices-with-same-points" overflow="visible" viewBox="-1 -1 2 2" xmlns="http://www.w3.org/2000/svg"><style>#slices-with-same-points text{font-size:.2px;font-family:var(--bs-font-monospace);fill:var(--bs-body-color);display:inline-block}#slices-with-same-points circle{fill:var(--bs-body-color)}</style><path d="M0 0V-1A1 1 0 011 0z" fill="#cd5c5c" stroke="#000" stroke-width=".01"/><path d="M0 0H1A1 1 0 010 1z" fill="#f08080" stroke="#000" stroke-width=".01"/><path d="M0 0V1A1 1 0 01-1 0z" fill="salmon" stroke="#000" stroke-width=".01"/><path d="M0 0H-1A1 1 0 010-1z" fill="#e9967a" stroke="#000" stroke-width=".01"/><circle cx=".70710678118" cy="-.70710678118" r=".03"/><text x=".70710678118" y="-.70710678118" text-anchor="start" dominant-baseline="text-top">(a, -a)</text><circle cx=".70710678118" cy=".70710678118" r=".03"/><text x=".70710678118" y=".70710678118" text-anchor="start" dominant-baseline="hanging">(a, a)</text><circle cx="-.70710678118" cy="-.70710678118" r=".03"/><text x="-.70710678118" y="-.70710678118" text-anchor="end" dominant-baseline="text-top">(-a, -a)</text><circle cx="-.70710678118" cy=".70710678118" r=".03"/><text x="-.70710678118" y=".70710678118" text-anchor="end" dominant-baseline="hanging">(-a, a)</text></svg></figure><p>$$
r_1 = 1
$$</p><p>Great. &#x1f44c;</p><p>Now we can use the equation of a circle to find the middle points.</p><p>$$
\begin{aligned}
(x - x_0)^2 + (y - y_0)^2 &= r^2 \\[0.25em]
(a - 0)^2 + (a - 0)^2 &= 1^2 \\[0.25em]
2a^2 &= 1 \\[0.25em]
a^2 &= \frac{1}{2} \\[0.25em]
a &= \sqrt{\frac{1}{2}}
\end{aligned}
$$</p><p>By adding four more pizza slices we get:</p><figure><style id=figure-svg-1724633646060138274>#figure-svg-1724633646060138274+svg{width:180px;height:180px}</style><svg overflow="visible" viewBox="-1 -1 2 2" xmlns="http://www.w3.org/2000/svg"><path d="M0 0V-1a1 1 0 01.70710677.29289323z" fill="#cd5c5c" stroke="#000" stroke-width=".01"/><path d="M0 0 .70710677-.70710677A1 1 0 011 0z" fill="#f08080" stroke="#000" stroke-width=".01"/><path d="M0 0H1A1 1 0 01.70710677.70710677z" fill="salmon" stroke="#000" stroke-width=".01"/><path d="M0 0 .70710677.70710677A1 1 0 010 1z" fill="#e9967a" stroke="#000" stroke-width=".01"/><path d="M0 0V1A1 1 0 01-.70710677.70710677z" fill="#ffa07a" stroke="#000" stroke-width=".01"/><path d="M0 0-.70710677.70710677A1 1 0 01-1 0z" fill="coral" stroke="#000" stroke-width=".01"/><path d="M0 0H-1a1 1 0 01.29289323-.70710677z" fill="tomato" stroke="#000" stroke-width=".01"/><path d="M0 0-.70710677-.70710677A1 1 0 010-1z" fill="#ff4500" stroke="#000" stroke-width=".01"/></svg></figure><p>$$
r_1 = 1
$$</p><h3 id=layers-of-pizza><a href=#layers-of-pizza aria-label=Anchor>#</a>Layers of pizza</h3><p>The next step is to create additional (smaller) layers of circle sectors. Let&rsquo;s say we want three circles; there&rsquo;re two
obvious ways of selecting division points: equal radii, or equal areas. Equal radii is simpler, so let&rsquo;s try this one
first.</p><p>If the outermost circle has a radius of $1$, then the middle circle will have a radius of $0.\overline{6}$, and the
smallest one will have $0.\overline{3}$.</p><figure><style id=figure-svg-1724633646060423829>#figure-svg-1724633646060423829+svg{width:180px;height:180px}</style><svg overflow="visible" viewBox="-1 -1 2 2" xmlns="http://www.w3.org/2000/svg"><path d="M0 0V-1a1 1 0 01.70710677.29289323z" fill="#cd5c5c" stroke="#000" stroke-width=".01"/><path d="M0 0 .70710677-.70710677A1 1 0 011 0z" fill="#f08080" stroke="#000" stroke-width=".01"/><path d="M0 0H1A1 1 0 01.70710677.70710677z" fill="salmon" stroke="#000" stroke-width=".01"/><path d="M0 0 .70710677.70710677A1 1 0 010 1z" fill="#e9967a" stroke="#000" stroke-width=".01"/><path d="M0 0V1A1 1 0 01-.70710677.70710677z" fill="#ffa07a" stroke="#000" stroke-width=".01"/><path d="M0 0-.70710677.70710677A1 1 0 01-1 0z" fill="coral" stroke="#000" stroke-width=".01"/><path d="M0 0H-1a1 1 0 01.29289323-.70710677z" fill="tomato" stroke="#000" stroke-width=".01"/><path d="M0 0-.70710677-.70710677A1 1 0 010-1z" fill="#ff4500" stroke="#000" stroke-width=".01"/><path d="M0 0V-.6666667a.6666667.6666667.0 01.47140452.19526218z" fill="#ffffe0" stroke="#000" stroke-width=".01"/><path d="M0 0 .47140452-.47140452A.6666667.6666667.0 01.6666667.0z" fill="#fffacd" stroke="#000" stroke-width=".01"/><path d="M0 0H.6666667A.6666667.6666667.0 01.47140452.47140452z" fill="#fafad2" stroke="#000" stroke-width=".01"/><path d="M0 0 .47140452.47140452A.6666667.6666667.0 010 .6666667z" fill="#ffefd5" stroke="#000" stroke-width=".01"/><path d="M0 0V.6666667A.6666667.6666667.0 01-.47140452.47140452z" fill="#ffe4b5" stroke="#000" stroke-width=".01"/><path d="M0 0-.47140452.47140452A.6666667.6666667.0 01-.6666667.0z" fill="#ffdab9" stroke="#000" stroke-width=".01"/><path d="M0 0H-.6666667a.6666667.6666667.0 01.19526218-.47140452z" fill="#eee8aa" stroke="#000" stroke-width=".01"/><path d="M0 0-.47140452-.47140452A.6666667.6666667.0 010-.6666667z" fill="khaki" stroke="#000" stroke-width=".01"/><path d="M0 0V-.33333334a.33333334.33333334.0 01.23570226.09763108z" fill="#3cb371" stroke="#000" stroke-width=".01"/><path d="M0 0 .23570226-.23570226A.33333334.33333334.0 01.33333334.0z" fill="#2e8b57" stroke="#000" stroke-width=".01"/><path d="M0 0H.33333334A.33333334.33333334.0 01.23570226.23570226z" fill="#228b22" stroke="#000" stroke-width=".01"/><path d="M0 0 .23570226.23570226A.33333334.33333334.0 010 .33333334z" fill="green" stroke="#000" stroke-width=".01"/><path d="M0 0V.33333334A.33333334.33333334.0 01-.23570226.23570226z" fill="#006400" stroke="#000" stroke-width=".01"/><path d="M0 0-.23570226.23570226A.33333334.33333334.0 01-.33333334.0z" fill="#9acd32" stroke="#000" stroke-width=".01"/><path d="M0 0H-.33333334a.33333334.33333334.0 01.09763108-.23570226z" fill="#6b8e23" stroke="#000" stroke-width=".01"/><path d="M0 0-.23570226-.23570226A.33333334.33333334.0 010-.33333334z" fill="olive" stroke="#000" stroke-width=".01"/></svg></figure><p>$$
r_1 = 1
\quad\text{and}\quad
r_2 = 0.\overline{6}
\quad\text{and}\quad
r_3 = 0.\overline{3}
$$</p><p>Not that it matters, but the smallest circle is a little <em>too</em> small for my liking. But, before we decide, we need to
see circles with equal areas first.</p><p>$$
\begin{aligned}
\Pi r_1^2 - \Pi r_2^2 = \Pi r_2^2 - \Pi r_3^2
\quad&\text{and}\quad
\Pi r_2^2 - \Pi r_3^2 = \Pi r_3^2 \\[0.25em]
1 - r_2^2 = r_2^2 - r_3^2
\quad&\text{and}\quad
r_2^2 - r_3^2 = r_3^2 \\[0.25em]
1 = 2r_2^2 - r_3^2
\quad&\text{and}\quad
r_2^2 = 2r_3^2 \\[0.25em]
1 = 3r_3^2
\quad&\text{and}\quad
r_2^2 = 2r_3^2 \\[0.25em]
r_3 = \sqrt{\frac{1}{3}}
\quad&\text{and}\quad
r_2 = \sqrt{\frac{2}{3}}
\end{aligned}
$$</p><p>Which gives us this avatar:</p><figure><style id=figure-svg-1724633646060708132>#figure-svg-1724633646060708132+svg{width:180px;height:180px}</style><svg overflow="visible" viewBox="-1 -1 2 2" xmlns="http://www.w3.org/2000/svg"><path d="M0 0V-1a1 1 0 01.70710677.29289323z" fill="#cd5c5c" stroke="#000" stroke-width=".01"/><path d="M0 0 .70710677-.70710677A1 1 0 011 0z" fill="#f08080" stroke="#000" stroke-width=".01"/><path d="M0 0H1A1 1 0 01.70710677.70710677z" fill="salmon" stroke="#000" stroke-width=".01"/><path d="M0 0 .70710677.70710677A1 1 0 010 1z" fill="#e9967a" stroke="#000" stroke-width=".01"/><path d="M0 0V1A1 1 0 01-.70710677.70710677z" fill="#ffa07a" stroke="#000" stroke-width=".01"/><path d="M0 0-.70710677.70710677A1 1 0 01-1 0z" fill="coral" stroke="#000" stroke-width=".01"/><path d="M0 0H-1a1 1 0 01.29289323-.70710677z" fill="tomato" stroke="#000" stroke-width=".01"/><path d="M0 0-.70710677-.70710677A1 1 0 010-1z" fill="#ff4500" stroke="#000" stroke-width=".01"/><path d="M0 0V-.8164966a.8164966.8164966.0 01.57735026.23914634z" fill="#ffffe0" stroke="#000" stroke-width=".01"/><path d="M0 0 .57735026-.57735026A.8164966.8164966.0 01.8164966.0z" fill="#fffacd" stroke="#000" stroke-width=".01"/><path d="M0 0H.8164966A.8164966.8164966.0 01.57735026.57735026z" fill="#fafad2" stroke="#000" stroke-width=".01"/><path d="M0 0 .57735026.57735026A.8164966.8164966.0 010 .8164966z" fill="#ffefd5" stroke="#000" stroke-width=".01"/><path d="M0 0V.8164966A.8164966.8164966.0 01-.57735026.57735026z" fill="#ffe4b5" stroke="#000" stroke-width=".01"/><path d="M0 0-.57735026.57735026A.8164966.8164966.0 01-.8164966.0z" fill="#ffdab9" stroke="#000" stroke-width=".01"/><path d="M0 0H-.8164966a.8164966.8164966.0 01.23914634-.57735026z" fill="#eee8aa" stroke="#000" stroke-width=".01"/><path d="M0 0-.57735026-.57735026A.8164966.8164966.0 010-.8164966z" fill="khaki" stroke="#000" stroke-width=".01"/><path d="M0 0V-.57735026A.57735026.57735026.0 01.4082483-.4082483z" fill="#3cb371" stroke="#000" stroke-width=".01"/><path d="M0 0 .4082483-.4082483A.57735026.57735026.0 01.57735026.0z" fill="#2e8b57" stroke="#000" stroke-width=".01"/><path d="M0 0H.57735026A.57735026.57735026.0 01.4082483.4082483z" fill="#228b22" stroke="#000" stroke-width=".01"/><path d="M0 0 .4082483.4082483A.57735026.57735026.0 010 .57735026z" fill="green" stroke="#000" stroke-width=".01"/><path d="M0 0V.57735026A.57735026.57735026.0 01-.4082483.4082483z" fill="#006400" stroke="#000" stroke-width=".01"/><path d="M0 0-.4082483.4082483A.57735026.57735026.0 01-.57735026.0z" fill="#9acd32" stroke="#000" stroke-width=".01"/><path d="M0 0H-.57735026A.57735026.57735026.0 01-.4082483-.4082483z" fill="#6b8e23" stroke="#000" stroke-width=".01"/><path d="M0 0-.4082483-.4082483A.57735026.57735026.0 010-.57735026z" fill="olive" stroke="#000" stroke-width=".01"/></svg></figure><p>$$
r_1 = 1
\quad\text{and}\quad
r_2 = \sqrt{\frac{2}{3}}
\quad\text{and}\quad
r_3 = \sqrt{\frac{1}{3}}
$$</p><p>Which is also not ideal, but the other way around&mldr; I was tinkering with the radii a bit and I think I found a <a href=https://en.wikipedia.org/wiki/Arithmetic_mean>middle
ground</a> with which I&rsquo;m happy.</p><figure><style id=figure-svg-1724633646061018544>#figure-svg-1724633646061018544+svg{width:180px;height:180px}</style><svg overflow="visible" viewBox="-1 -1 2 2" xmlns="http://www.w3.org/2000/svg"><path d="M0 0V-1a1 1 0 01.70710677.29289323z" fill="#cd5c5c" stroke="#000" stroke-width=".01"/><path d="M0 0 .70710677-.70710677A1 1 0 011 0z" fill="#f08080" stroke="#000" stroke-width=".01"/><path d="M0 0H1A1 1 0 01.70710677.70710677z" fill="salmon" stroke="#000" stroke-width=".01"/><path d="M0 0 .70710677.70710677A1 1 0 010 1z" fill="#e9967a" stroke="#000" stroke-width=".01"/><path d="M0 0V1A1 1 0 01-.70710677.70710677z" fill="#ffa07a" stroke="#000" stroke-width=".01"/><path d="M0 0-.70710677.70710677A1 1 0 01-1 0z" fill="coral" stroke="#000" stroke-width=".01"/><path d="M0 0H-1a1 1 0 01.29289323-.70710677z" fill="tomato" stroke="#000" stroke-width=".01"/><path d="M0 0-.70710677-.70710677A1 1 0 010-1z" fill="#ff4500" stroke="#000" stroke-width=".01"/><path d="M0 0V-.7415816a.7415816.7415816.0 01.5243774.2172042z" fill="#ffffe0" stroke="#000" stroke-width=".01"/><path d="M0 0 .5243774-.5243774A.7415816.7415816.0 01.7415816.0z" fill="#fffacd" stroke="#000" stroke-width=".01"/><path d="M0 0H.7415816A.7415816.7415816.0 01.5243774.5243774z" fill="#fafad2" stroke="#000" stroke-width=".01"/><path d="M0 0 .5243774.5243774A.7415816.7415816.0 010 .7415816z" fill="#ffefd5" stroke="#000" stroke-width=".01"/><path d="M0 0V.7415816A.7415816.7415816.0 01-.5243774.5243774z" fill="#ffe4b5" stroke="#000" stroke-width=".01"/><path d="M0 0-.5243774.5243774A.7415816.7415816.0 01-.7415816.0z" fill="#ffdab9" stroke="#000" stroke-width=".01"/><path d="M0 0H-.7415816a.7415816.7415816.0 01.2172042-.5243774z" fill="#eee8aa" stroke="#000" stroke-width=".01"/><path d="M0 0-.5243774-.5243774A.7415816.7415816.0 010-.7415816z" fill="khaki" stroke="#000" stroke-width=".01"/><path d="M0 0V-.45534182a.45534182.45534182.0 01.32197526.13336656z" fill="#3cb371" stroke="#000" stroke-width=".01"/><path d="M0 0 .32197526-.32197526A.45534182.45534182.0 01.45534182.0z" fill="#2e8b57" stroke="#000" stroke-width=".01"/><path d="M0 0H.45534182A.45534182.45534182.0 01.32197526.32197526z" fill="#228b22" stroke="#000" stroke-width=".01"/><path d="M0 0 .32197526.32197526A.45534182.45534182.0 010 .45534182z" fill="green" stroke="#000" stroke-width=".01"/><path d="M0 0V.45534182A.45534182.45534182.0 01-.32197526.32197526z" fill="#006400" stroke="#000" stroke-width=".01"/><path d="M0 0-.32197526.32197526A.45534182.45534182.0 01-.45534182.0z" fill="#9acd32" stroke="#000" stroke-width=".01"/><path d="M0 0H-.45534182a.45534182.45534182.0 01.13336656-.32197526z" fill="#6b8e23" stroke="#000" stroke-width=".01"/><path d="M0 0-.32197526-.32197526A.45534182.45534182.0 010-.45534182z" fill="olive" stroke="#000" stroke-width=".01"/></svg></figure><p>$$
r_1 = 1
\quad\text{and}\quad
r_2 = \frac{0.\overline{6} + \sqrt{\frac{2}{3}}}{2}
\quad\text{and}\quad
r_3 = \frac{0.\overline{3} + \sqrt{\frac{1}{3}}}{2}
$$</p><p>Radii in the circles above are the arithmetic average of the equal radii variant and the equal areas variant.</p><h2 id=working-with-colors><a href=#working-with-colors aria-label=Anchor>#</a>Working with colors</h2><p>With the SVG structure out of the way we can focus on selecting quasi-random colors for the circle segments based on the
identifier&rsquo;s hash. <a href=https://en.wikipedia.org/wiki/SHA-2>SHA-256</a> hashes have 32 bytes; it&rsquo;s more than we need &mdash; assuming we need a single byte
per circle sector &mdash; which gives us another benefit: we can slide in the 4<sup>th</sup> circle, if we want
to.</p><p>For now though, let&rsquo;s talk about the colors. If we&rsquo;d use <a href=https://en.wikipedia.org/wiki/HSL_and_HSV>HSL</a>, we can split each byte into 4 pieces: 4 bits for hue
(since it&rsquo;s the most dominant), 2 bits for saturation, and 2 bits for lightness. Path&rsquo;s <a href=https://www.w3.org/TR/SVG2/painting.html#SpecifyingFillPaint>fill</a> property accepts any
<a href=https://www.w3.org/TR/SVG2/painting.html#SpecifyingPaint>paint</a> value, which basically means we need to format our color to a standard CSS&rsquo;s hue.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=ln id=hl-2-1><a class=lnlinks href=#hl-2-1> 1</a></span><span class=cl><span class=k>fn</span> <span class=nf>to_color</span><span class=p>(</span><span class=n>byte</span>: <span class=kt>u8</span><span class=p>)</span><span class=w> </span>-&gt; <span class=nb>String</span> <span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-2-2><a class=lnlinks href=#hl-2-2> 2</a></span><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>h</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>byte</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=mi>4</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-2-3><a class=lnlinks href=#hl-2-3> 3</a></span><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>s</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>byte</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=mi>2</span><span class=p>)</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=mh>0x03</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-2-4><a class=lnlinks href=#hl-2-4> 4</a></span><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>l</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>byte</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=mh>0x03</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-2-5><a class=lnlinks href=#hl-2-5> 5</a></span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln id=hl-2-6><a class=lnlinks href=#hl-2-6> 6</a></span><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>normalized_h</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>h</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=kt>f32</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mf>16.0</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-2-7><a class=lnlinks href=#hl-2-7> 7</a></span><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>normalized_s</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>s</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=kt>f32</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mf>4.0</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-2-8><a class=lnlinks href=#hl-2-8> 8</a></span><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>normalized_l</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>l</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=kt>f32</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mf>4.0</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-2-9><a class=lnlinks href=#hl-2-9> 9</a></span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln id=hl-2-10><a class=lnlinks href=#hl-2-10>10</a></span><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>h</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>360.0</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>normalized_h</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-2-11><a class=lnlinks href=#hl-2-11>11</a></span><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>s</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>20.0</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>80.0</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>normalized_s</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-2-12><a class=lnlinks href=#hl-2-12>12</a></span><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>l</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>40.0</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>50.0</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>normalized_l</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-2-13><a class=lnlinks href=#hl-2-13>13</a></span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln id=hl-2-14><a class=lnlinks href=#hl-2-14>14</a></span><span class=cl><span class=w>    </span><span class=fm>format!</span><span class=p>(</span><span class=s>&#34;hsl(</span><span class=si>{h}</span><span class=s>, </span><span class=si>{s}</span><span class=s>%, </span><span class=si>{l}</span><span class=s>%)&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-2-15><a class=lnlinks href=#hl-2-15>15</a></span><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>Alright, let&rsquo;s generate an avatar for <code>"foo"</code> and see how it looks like.</p><figure><style id=figure-svg-1724633646061502160>#figure-svg-1724633646061502160+svg{width:180px;height:180px}</style><svg overflow="visible" viewBox="-1 -1 2 2" xmlns="http://www.w3.org/2000/svg"><path d="M0 0V-1a1 1 0 01.70710677.29289323z" fill="hsl(45, 80%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0 .70710677-.70710677A1 1 0 011 0z" fill="hsl(45, 40%, 65%)" stroke="#000" stroke-width=".01"/><path d="M0 0H1A1 1 0 01.70710677.70710677z" fill="hsl(247.5, 40%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0 .70710677.70710677A1 1 0 010 1z" fill="hsl(135, 60%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0V1A1 1 0 01-.70710677.70710677z" fill="hsl(135, 60%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0-.70710677.70710677A1 1 0 01-1 0z" fill="hsl(337.5, 80%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0H-1a1 1 0 01.29289323-.70710677z" fill="hsl(270, 40%, 65%)" stroke="#000" stroke-width=".01"/><path d="M0 0-.70710677-.70710677A1 1 0 010-1z" fill="hsl(180, 80%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0V-.7415816a.7415816.7415816.0 01.5243774.2172042z" fill="hsl(337.5, 60%, 52.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0 .5243774-.5243774A.7415816.7415816.0 01.7415816.0z" fill="hsl(202.5, 60%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0H.7415816A.7415816.7415816.0 01.5243774.5243774z" fill="hsl(90, 40%, 52.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0 .5243774.5243774A.7415816.7415816.0 010 .7415816z" fill="hsl(67.5, 80%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0V.7415816A.7415816.7415816.0 01-.5243774.5243774z" fill="hsl(22.5, 80%, 52.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0-.5243774.5243774A.7415816.7415816.0 01-.7415816.0z" fill="hsl(67.5, 20%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0H-.7415816a.7415816.7415816.0 01.2172042-.5243774z" fill="hsl(90, 20%, 52.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0-.5243774-.5243774A.7415816.7415816.0 010-.7415816z" fill="hsl(67.5, 40%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0V-.45534182a.45534182.45534182.0 01.32197526.13336656z" fill="hsl(22.5, 20%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0 .32197526-.32197526A.45534182.45534182.0 01.45534182.0z" fill="hsl(90, 20%, 65%)" stroke="#000" stroke-width=".01"/><path d="M0 0H.45534182A.45534182.45534182.0 01.32197526.32197526z" fill="hsl(45, 80%, 52.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0 .32197526.32197526A.45534182.45534182.0 010 .45534182z" fill="hsl(157.5, 20%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0V.45534182A.45534182.45534182.0 01-.32197526.32197526z" fill="hsl(135, 40%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0-.32197526.32197526A.45534182.45534182.0 01-.45534182.0z" fill="hsl(180, 20%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0H-.45534182a.45534182.45534182.0 01.13336656-.32197526z" fill="hsl(247.5, 80%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0-.32197526-.32197526A.45534182.45534182.0 010-.45534182z" fill="hsl(225, 20%, 40%)" stroke="#000" stroke-width=".01"/></svg><figcaption><p>Avatar for "foo".</p></figcaption></figure><p>Well, it does not look terrible, but it&rsquo;s not eye-catching either. To be perfectly honest, we should expect something
like this; <a href=https://en.wikipedia.org/wiki/SHA-2>SHA-256</a> returns (and for that matter all other hash functions too) a quasi-random values. If we
convert those <em>raw</em> bytes to fill colors, we&rsquo;ll get quasi-random colors. To make it nicer we need to modify our
algorithm slightly; we need to calculate a global theme, if you will, for the avatar, so that a part of circle segments'
colors come from that theme. We can do that by folding all hash bytes into a single one with XOR.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=ln id=hl-3-1><a class=lnlinks href=#hl-3-1> 1</a></span><span class=cl><span class=k>fn</span> <span class=nf>to_color</span><span class=p>(</span><span class=n>normalized_theme</span>: <span class=kt>f32</span><span class=p>,</span><span class=w> </span><span class=n>byte</span>: <span class=kt>u8</span><span class=p>)</span><span class=w> </span>-&gt; <span class=nb>String</span> <span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-3-2><a class=lnlinks href=#hl-3-2> 2</a></span><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>h</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>byte</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=mi>4</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-3-3><a class=lnlinks href=#hl-3-3> 3</a></span><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>s</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>byte</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=mi>2</span><span class=p>)</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=mh>0x03</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-3-4><a class=lnlinks href=#hl-3-4> 4</a></span><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>l</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>byte</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=mh>0x03</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-3-5><a class=lnlinks href=#hl-3-5> 5</a></span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln id=hl-3-6><a class=lnlinks href=#hl-3-6> 6</a></span><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>normalized_h</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>h</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=kt>f32</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mf>16.0</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-3-7><a class=lnlinks href=#hl-3-7> 7</a></span><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>normalized_s</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>s</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=kt>f32</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mf>4.0</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-3-8><a class=lnlinks href=#hl-3-8> 8</a></span><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>normalized_l</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>l</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=kt>f32</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mf>4.0</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-3-9><a class=lnlinks href=#hl-3-9> 9</a></span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln id=hl-3-10><a class=lnlinks href=#hl-3-10>10</a></span><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>h</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>360.0</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>normalized_theme</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>120.0</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>normalized_h</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-3-11><a class=lnlinks href=#hl-3-11>11</a></span><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>s</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>20.0</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>80.0</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>normalized_s</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-3-12><a class=lnlinks href=#hl-3-12>12</a></span><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>l</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>40.0</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>50.0</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>normalized_l</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-3-13><a class=lnlinks href=#hl-3-13>13</a></span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln id=hl-3-14><a class=lnlinks href=#hl-3-14>14</a></span><span class=cl><span class=w>    </span><span class=fm>format!</span><span class=p>(</span><span class=s>&#34;hsl(</span><span class=si>{h}</span><span class=s>, </span><span class=si>{s}</span><span class=s>%, </span><span class=si>{l}</span><span class=s>%)&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-3-15><a class=lnlinks href=#hl-3-15>15</a></span><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-3-16><a class=lnlinks href=#hl-3-16>16</a></span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln id=hl-3-17><a class=lnlinks href=#hl-3-17>17</a></span><span class=cl><span class=w></span><span class=k>fn</span> <span class=nf>calculate_theme</span><span class=p>(</span><span class=n>bytes</span>: <span class=kp>&amp;</span><span class=p>[</span><span class=kt>u8</span><span class=p>])</span><span class=w> </span>-&gt; <span class=kt>f32</span> <span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-3-18><a class=lnlinks href=#hl-3-18>18</a></span><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>theme</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>bytes</span><span class=p>.</span><span class=n>iter</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-3-19><a class=lnlinks href=#hl-3-19>19</a></span><span class=cl><span class=w>        </span><span class=p>.</span><span class=n>fold</span><span class=p>(</span><span class=mi>0</span><span class=k>u8</span><span class=p>,</span><span class=w> </span><span class=o>|</span><span class=n>acc</span><span class=p>,</span><span class=w> </span><span class=n>byte</span><span class=o>|</span><span class=w> </span><span class=n>acc</span><span class=w> </span><span class=o>^</span><span class=w> </span><span class=n>byte</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-3-20><a class=lnlinks href=#hl-3-20>20</a></span><span class=cl><span class=w>    </span><span class=p>(</span><span class=n>theme</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=kt>f32</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=p>(</span><span class=kt>u8</span>::<span class=no>MAX</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=kt>f32</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-3-21><a class=lnlinks href=#hl-3-21>21</a></span><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-3-22><a class=lnlinks href=#hl-3-22>22</a></span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln id=hl-3-23><a class=lnlinks href=#hl-3-23>23</a></span><span class=cl><span class=w></span><span class=k>fn</span> <span class=nf>generate_paths</span><span class=p>(</span><span class=n>hash</span>: <span class=p>[</span><span class=kt>u8</span><span class=p>;</span><span class=w> </span><span class=mi>32</span><span class=p>])</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-3-24><a class=lnlinks href=#hl-3-24>24</a></span><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>theme</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>calculate_theme</span><span class=p>(</span><span class=o>&amp;</span><span class=n>hash</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-3-25><a class=lnlinks href=#hl-3-25>25</a></span><span class=cl><span class=w>    
</span></span></span><span class=line><span class=ln id=hl-3-26><a class=lnlinks href=#hl-3-26>26</a></span><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>colors</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>hash</span><span class=p>.</span><span class=n>iter</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-3-27><a class=lnlinks href=#hl-3-27>27</a></span><span class=cl><span class=w>        </span><span class=p>.</span><span class=n>cloned</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-3-28><a class=lnlinks href=#hl-3-28>28</a></span><span class=cl><span class=w>        </span><span class=p>.</span><span class=n>map</span><span class=p>(</span><span class=o>|</span><span class=n>byte</span><span class=o>|</span><span class=w> </span><span class=n>to_color</span><span class=p>(</span><span class=n>theme</span><span class=p>,</span><span class=w> </span><span class=n>byte</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-3-29><a class=lnlinks href=#hl-3-29>29</a></span><span class=cl><span class=w>        </span><span class=p>.</span><span class=n>collect</span>::<span class=o>&lt;</span><span class=nb>Vec</span><span class=o>&lt;</span><span class=n>_</span><span class=o>&gt;&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-3-30><a class=lnlinks href=#hl-3-30>30</a></span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln id=hl-3-31><a class=lnlinks href=#hl-3-31>31</a></span><span class=cl><span class=w>    </span><span class=fm>unimplemented!</span><span class=p>(</span><span class=s>&#34;Generate SVG paths.&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-3-32><a class=lnlinks href=#hl-3-32>32</a></span><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>This code renders:</p><figure><style id=figure-svg-1724633646061839903>#figure-svg-1724633646061839903+svg{width:180px;height:180px}</style><svg overflow="visible" viewBox="-1 -1 2 2" xmlns="http://www.w3.org/2000/svg"><path d="M0 0V-1a1 1 0 01.70710677.29289323z" fill="hsl(133.58824, 80%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0 .70710677-.70710677A1 1 0 011 0z" fill="hsl(133.58824, 40%, 65%)" stroke="#000" stroke-width=".01"/><path d="M0 0H1A1 1 0 01.70710677.70710677z" fill="hsl(201.08824, 40%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0 .70710677.70710677A1 1 0 010 1z" fill="hsl(163.58824, 60%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0V1A1 1 0 01-.70710677.70710677z" fill="hsl(163.58824, 60%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0-.70710677.70710677A1 1 0 01-1 0z" fill="hsl(231.08824, 80%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0H-1a1 1 0 01.29289323-.70710677z" fill="hsl(208.58824, 40%, 65%)" stroke="#000" stroke-width=".01"/><path d="M0 0-.70710677-.70710677A1 1 0 010-1z" fill="hsl(178.58824, 80%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0V-.7415816a.7415816.7415816.0 01.5243774.2172042z" fill="hsl(231.08824, 60%, 52.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0 .5243774-.5243774A.7415816.7415816.0 01.7415816.0z" fill="hsl(186.08824, 60%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0H.7415816A.7415816.7415816.0 01.5243774.5243774z" fill="hsl(148.58824, 40%, 52.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0 .5243774.5243774A.7415816.7415816.0 010 .7415816z" fill="hsl(141.08824, 80%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0V.7415816A.7415816.7415816.0 01-.5243774.5243774z" fill="hsl(126.08824, 80%, 52.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0-.5243774.5243774A.7415816.7415816.0 01-.7415816.0z" fill="hsl(141.08824, 20%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0H-.7415816a.7415816.7415816.0 01.2172042-.5243774z" fill="hsl(148.58824, 20%, 52.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0-.5243774-.5243774A.7415816.7415816.0 010-.7415816z" fill="hsl(141.08824, 40%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0V-.45534182a.45534182.45534182.0 01.32197526.13336656z" fill="hsl(126.08824, 20%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0 .32197526-.32197526A.45534182.45534182.0 01.45534182.0z" fill="hsl(148.58824, 20%, 65%)" stroke="#000" stroke-width=".01"/><path d="M0 0H.45534182A.45534182.45534182.0 01.32197526.32197526z" fill="hsl(133.58824, 80%, 52.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0 .32197526.32197526A.45534182.45534182.0 010 .45534182z" fill="hsl(171.08824, 20%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0V.45534182A.45534182.45534182.0 01-.32197526.32197526z" fill="hsl(163.58824, 40%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0-.32197526.32197526A.45534182.45534182.0 01-.45534182.0z" fill="hsl(178.58824, 20%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0H-.45534182a.45534182.45534182.0 01.13336656-.32197526z" fill="hsl(201.08824, 80%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0-.32197526-.32197526A.45534182.45534182.0 010-.45534182z" fill="hsl(193.58824, 20%, 40%)" stroke="#000" stroke-width=".01"/></svg><figcaption><p>Avatar for "foo" with a theme.</p></figcaption></figure><p>It looks rather good, if I say so myself. The solution works as it&rsquo;s suppose to: it <em>most probably</em> produces different
avatars for different identifiers (<a href=https://en.wikipedia.org/wiki/Hash_collision>hash collisions</a> do happen) and they look acceptable. However, the rings seem to
<em>phase</em> into each other &mdash; their colors are too similar. We could experiment with another theme: a ring theme &mdash; which
would be a XOR-fold of all bytes that represent a single ring &mdash; and check the results.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=line><span class=ln id=hl-4-1><a class=lnlinks href=#hl-4-1> 1</a></span><span class=cl><span class=k>fn</span> <span class=nf>to_color</span><span class=p>(</span><span class=n>normalized_theme</span>: <span class=kt>f32</span><span class=p>,</span><span class=w> </span><span class=n>normalized_ring_theme</span>: <span class=kt>f32</span><span class=p>,</span><span class=w> </span><span class=n>byte</span>: <span class=kt>u8</span><span class=p>)</span><span class=w> </span>-&gt; <span class=nb>String</span> <span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-2><a class=lnlinks href=#hl-4-2> 2</a></span><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>h</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>byte</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=mi>4</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-3><a class=lnlinks href=#hl-4-3> 3</a></span><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>s</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>byte</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=mi>2</span><span class=p>)</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=mh>0x03</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-4><a class=lnlinks href=#hl-4-4> 4</a></span><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>l</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>byte</span><span class=w> </span><span class=o>&amp;</span><span class=w> </span><span class=mh>0x03</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-5><a class=lnlinks href=#hl-4-5> 5</a></span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-6><a class=lnlinks href=#hl-4-6> 6</a></span><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>normalized_h</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>h</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=kt>f32</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mf>16.0</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-7><a class=lnlinks href=#hl-4-7> 7</a></span><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>normalized_s</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>s</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=kt>f32</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mf>4.0</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-8><a class=lnlinks href=#hl-4-8> 8</a></span><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>normalized_l</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>l</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=kt>f32</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mf>4.0</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-9><a class=lnlinks href=#hl-4-9> 9</a></span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-10><a class=lnlinks href=#hl-4-10>10</a></span><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>h</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>360.0</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>normalized_theme</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-11><a class=lnlinks href=#hl-4-11>11</a></span><span class=cl><span class=w>        </span><span class=o>+</span><span class=w> </span><span class=mf>120.0</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>normalized_ring_theme</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-12><a class=lnlinks href=#hl-4-12>12</a></span><span class=cl><span class=w>        </span><span class=o>+</span><span class=w> </span><span class=mf>30.0</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>normalized_h</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-13><a class=lnlinks href=#hl-4-13>13</a></span><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>s</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>20.0</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>80.0</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>normalized_s</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-14><a class=lnlinks href=#hl-4-14>14</a></span><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>l</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>40.0</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>50.0</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>normalized_l</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-15><a class=lnlinks href=#hl-4-15>15</a></span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-16><a class=lnlinks href=#hl-4-16>16</a></span><span class=cl><span class=w>    </span><span class=fm>format!</span><span class=p>(</span><span class=s>&#34;hsl(</span><span class=si>{h}</span><span class=s>, </span><span class=si>{s}</span><span class=s>%, </span><span class=si>{l}</span><span class=s>%)&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-17><a class=lnlinks href=#hl-4-17>17</a></span><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-18><a class=lnlinks href=#hl-4-18>18</a></span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-19><a class=lnlinks href=#hl-4-19>19</a></span><span class=cl><span class=w></span><span class=k>fn</span> <span class=nf>calculate_theme</span><span class=p>(</span><span class=n>bytes</span>: <span class=kp>&amp;</span><span class=p>[</span><span class=kt>u8</span><span class=p>])</span><span class=w> </span>-&gt; <span class=kt>f32</span> <span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-20><a class=lnlinks href=#hl-4-20>20</a></span><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>theme</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>bytes</span><span class=p>.</span><span class=n>iter</span><span class=p>().</span><span class=n>fold</span><span class=p>(</span><span class=mi>0</span><span class=k>u8</span><span class=p>,</span><span class=w> </span><span class=o>|</span><span class=n>acc</span><span class=p>,</span><span class=w> </span><span class=n>byte</span><span class=o>|</span><span class=w> </span><span class=n>acc</span><span class=w> </span><span class=o>^</span><span class=w> </span><span class=n>byte</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-21><a class=lnlinks href=#hl-4-21>21</a></span><span class=cl><span class=w>    </span><span class=p>(</span><span class=n>theme</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=kt>f32</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=p>(</span><span class=kt>u8</span>::<span class=no>MAX</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=kt>f32</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-22><a class=lnlinks href=#hl-4-22>22</a></span><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-23><a class=lnlinks href=#hl-4-23>23</a></span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-24><a class=lnlinks href=#hl-4-24>24</a></span><span class=cl><span class=w></span><span class=k>fn</span> <span class=nf>generate_paths</span><span class=p>(</span><span class=n>hash</span>: <span class=p>[</span><span class=kt>u8</span><span class=p>;</span><span class=w> </span><span class=mi>32</span><span class=p>])</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-25><a class=lnlinks href=#hl-4-25>25</a></span><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>theme</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>calculate_theme</span><span class=p>(</span><span class=o>&amp;</span><span class=n>hash</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-26><a class=lnlinks href=#hl-4-26>26</a></span><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>ring_themes</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>hash</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-27><a class=lnlinks href=#hl-4-27>27</a></span><span class=cl><span class=w>        </span><span class=p>.</span><span class=n>windows</span><span class=p>(</span><span class=mi>8</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-28><a class=lnlinks href=#hl-4-28>28</a></span><span class=cl><span class=w>        </span><span class=p>.</span><span class=n>map</span><span class=p>(</span><span class=n>calculate_theme</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-29><a class=lnlinks href=#hl-4-29>29</a></span><span class=cl><span class=w>        </span><span class=p>.</span><span class=n>collect</span>::<span class=o>&lt;</span><span class=nb>Vec</span><span class=o>&lt;</span><span class=n>_</span><span class=o>&gt;&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-30><a class=lnlinks href=#hl-4-30>30</a></span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-31><a class=lnlinks href=#hl-4-31>31</a></span><span class=cl><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>colors</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>hash</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-32><a class=lnlinks href=#hl-4-32>32</a></span><span class=cl><span class=w>        </span><span class=p>.</span><span class=n>iter</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-33><a class=lnlinks href=#hl-4-33>33</a></span><span class=cl><span class=w>        </span><span class=p>.</span><span class=n>cloned</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-34><a class=lnlinks href=#hl-4-34>34</a></span><span class=cl><span class=w>        </span><span class=p>.</span><span class=n>enumerate</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-35><a class=lnlinks href=#hl-4-35>35</a></span><span class=cl><span class=w>        </span><span class=p>.</span><span class=n>map</span><span class=p>(</span><span class=o>|</span><span class=p>(</span><span class=n>idx</span><span class=p>,</span><span class=w> </span><span class=n>byte</span><span class=p>)</span><span class=o>|</span><span class=w> </span><span class=n>to_color</span><span class=p>(</span><span class=n>theme</span><span class=p>,</span><span class=w> </span><span class=n>ring_themes</span><span class=p>[</span><span class=n>idx</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=mi>8</span><span class=p>],</span><span class=w> </span><span class=n>byte</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-36><a class=lnlinks href=#hl-4-36>36</a></span><span class=cl><span class=w>        </span><span class=p>.</span><span class=n>collect</span>::<span class=o>&lt;</span><span class=nb>Vec</span><span class=o>&lt;</span><span class=n>_</span><span class=o>&gt;&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-37><a class=lnlinks href=#hl-4-37>37</a></span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-38><a class=lnlinks href=#hl-4-38>38</a></span><span class=cl><span class=w>    </span><span class=fm>unimplemented!</span><span class=p>(</span><span class=s>&#34;Generate SVG paths.&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=ln id=hl-4-39><a class=lnlinks href=#hl-4-39>39</a></span><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>With the final touch we get:</p><figure><style id=figure-svg-1724633646062134945>#figure-svg-1724633646062134945+svg{width:180px;height:180px}</style><svg overflow="visible" viewBox="-1 -1 2 2" xmlns="http://www.w3.org/2000/svg"><path d="M0 0V-1a1 1 0 01.70710677.29289323z" fill="hsl(127.51471, 80%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0 .70710677-.70710677A1 1 0 011 0z" fill="hsl(127.51471, 40%, 65%)" stroke="#000" stroke-width=".01"/><path d="M0 0H1A1 1 0 01.70710677.70710677z" fill="hsl(144.38971, 40%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0 .70710677.70710677A1 1 0 010 1z" fill="hsl(135.01471, 60%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0V1A1 1 0 01-.70710677.70710677z" fill="hsl(135.01471, 60%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0-.70710677.70710677A1 1 0 01-1 0z" fill="hsl(151.88971, 80%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0H-1a1 1 0 01.29289323-.70710677z" fill="hsl(146.26471, 40%, 65%)" stroke="#000" stroke-width=".01"/><path d="M0 0-.70710677-.70710677A1 1 0 010-1z" fill="hsl(138.76471, 80%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0V-.7415816a.7415816.7415816.0 01.5243774.2172042z" fill="hsl(251.18384, 60%, 52.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0 .5243774-.5243774A.7415816.7415816.0 01.7415816.0z" fill="hsl(239.93384, 60%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0H.7415816A.7415816.7415816.0 01.5243774.5243774z" fill="hsl(230.55884, 40%, 52.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0 .5243774.5243774A.7415816.7415816.0 010 .7415816z" fill="hsl(228.68384, 80%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0V.7415816A.7415816.7415816.0 01-.5243774.5243774z" fill="hsl(224.93384, 80%, 52.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0-.5243774.5243774A.7415816.7415816.0 01-.7415816.0z" fill="hsl(228.68384, 20%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0H-.7415816a.7415816.7415816.0 01.2172042-.5243774z" fill="hsl(230.55884, 20%, 52.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0-.5243774-.5243774A.7415816.7415816.0 010-.7415816z" fill="hsl(228.68384, 40%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0V-.45534182a.45534182.45534182.0 01.32197526.13336656z" fill="hsl(167.05148, 20%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0 .32197526-.32197526A.45534182.45534182.0 01.45534182.0z" fill="hsl(172.67648, 20%, 65%)" stroke="#000" stroke-width=".01"/><path d="M0 0H.45534182A.45534182.45534182.0 01.32197526.32197526z" fill="hsl(168.92648, 80%, 52.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0 .32197526.32197526A.45534182.45534182.0 010 .45534182z" fill="hsl(178.30148, 20%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0V.45534182A.45534182.45534182.0 01-.32197526.32197526z" fill="hsl(176.42648, 40%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0-.32197526.32197526A.45534182.45534182.0 01-.45534182.0z" fill="hsl(180.17648, 20%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0H-.45534182a.45534182.45534182.0 01.13336656-.32197526z" fill="hsl(185.80148, 80%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0-.32197526-.32197526A.45534182.45534182.0 010-.45534182z" fill="hsl(183.92648, 20%, 40%)" stroke="#000" stroke-width=".01"/></svg><figcaption><p>Avatar for "foo" with a global theme and a ring theme.</p></figcaption></figure><p>Which is exactly the thing that hides in the spoiler block at the top. If you restrained yourself and didn&rsquo;t check it
out: congratulations. Now feel free to do so. &#x1f603;</p><h2 id=conclusions><a href=#conclusions aria-label=Anchor>#</a>Conclusions</h2><p>Working on this blog post has been an effort I wanted to make to better understand how SVGs work from the inside, as
well as, a challenge to reverse-engineer ideas from <a href=https://francoisbest.com/posts/2021/hashvatars>Representing SHA-256 Hashes As Avatars</a>.</p><p>I&rsquo;m not working on any service which would benefit from these avatars. If I happen to work on one in the future I&rsquo;ll for
sure like to try them out. To make this solution easier to re-use in other places, I&rsquo;ve made a Rust crate called
<a href=https://crates.io/crates/svg_avatars><code>svg_avatars</code></a>, which implements this exact solution. The crate is fairly minimal, so if anyone has any idea on how to
enhance it, I&rsquo;d love to hear from you/check out your PRs.</p><p>As a closing thought, one of the parameters of the <a href=https://www.w3.org/TR/SVG2/paths.html#PathDataEllipticalArcCommands>absolute elliptical arc curve</a> command is the
<code>sweep-flag</code> parameter. It allows you to determine, whether an arc should be a smiley face or a sad face. If the
parameter is <code>1</code> &mdash; as it is in our case &mdash; then the arc is a sad face. However, if you&rsquo;d flip the flags to be <code>0</code>,
then all arcs become smiley faces&mldr;</p><figure><style id=figure-svg-1724633646067268862>#figure-svg-1724633646067268862+svg{width:180px;height:180px}</style><svg overflow="visible" viewBox="-1 -1 2 2" xmlns="http://www.w3.org/2000/svg"><path d="M0 0V-1a1 1 0 00.70710677.29289323z" fill="hsl(127.51471, 80%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0 .70710677-.70710677A1 1 0 001 0z" fill="hsl(127.51471, 40%, 65%)" stroke="#000" stroke-width=".01"/><path d="M0 0H1A1 1 0 00.70710677.70710677z" fill="hsl(144.38971, 40%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0 .70710677.70710677A1 1 0 000 1z" fill="hsl(135.01471, 60%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0V1A1 1 0 00-.70710677.70710677z" fill="hsl(135.01471, 60%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0-.70710677.70710677A1 1 0 00-1 0z" fill="hsl(151.88971, 80%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0H-1a1 1 0 00.29289323-.70710677z" fill="hsl(146.26471, 40%, 65%)" stroke="#000" stroke-width=".01"/><path d="M0 0-.70710677-.70710677A1 1 0 000-1z" fill="hsl(138.76471, 80%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0V-.7415816a.7415816.7415816.0 00.5243774.2172042z" fill="hsl(251.18384, 60%, 52.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0 .5243774-.5243774A.7415816.7415816.0 00.7415816.0z" fill="hsl(239.93384, 60%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0H.7415816A.7415816.7415816.0 00.5243774.5243774z" fill="hsl(230.55884, 40%, 52.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0 .5243774.5243774A.7415816.7415816.0 000 .7415816z" fill="hsl(228.68384, 80%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0V.7415816A.7415816.7415816.0 00-.5243774.5243774z" fill="hsl(224.93384, 80%, 52.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0-.5243774.5243774A.7415816.7415816.0 00-.7415816.0z" fill="hsl(228.68384, 20%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0H-.7415816a.7415816.7415816.0 00.2172042-.5243774z" fill="hsl(230.55884, 20%, 52.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0-.5243774-.5243774A.7415816.7415816.0 000-.7415816z" fill="hsl(228.68384, 40%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0V-.45534182a.45534182.45534182.0 00.32197526.13336656z" fill="hsl(167.05148, 20%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0 .32197526-.32197526A.45534182.45534182.0 00.45534182.0z" fill="hsl(172.67648, 20%, 65%)" stroke="#000" stroke-width=".01"/><path d="M0 0H.45534182A.45534182.45534182.0 00.32197526.32197526z" fill="hsl(168.92648, 80%, 52.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0 .32197526.32197526A.45534182.45534182.0 000 .45534182z" fill="hsl(178.30148, 20%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0V.45534182A.45534182.45534182.0 00-.32197526.32197526z" fill="hsl(176.42648, 40%, 40%)" stroke="#000" stroke-width=".01"/><path d="M0 0-.32197526.32197526A.45534182.45534182.0 00-.45534182.0z" fill="hsl(180.17648, 20%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0H-.45534182a.45534182.45534182.0 00.13336656-.32197526z" fill="hsl(185.80148, 80%, 77.5%)" stroke="#000" stroke-width=".01"/><path d="M0 0-.32197526-.32197526A.45534182.45534182.0 000-.45534182z" fill="hsl(183.92648, 20%, 40%)" stroke="#000" stroke-width=".01"/></svg><figcaption><p><em>Smiley-face</em> avatar for "foo".</p></figcaption></figure><p>&mldr;and the avatar <a href=https://en.wikipedia.org/wiki/Emergence>emerges</a> as a spiderweb. Who does not love a single-line-change feature for Spooktober.</p></main><div class=tags><a class="text-decoration-none text-reset hover-success" href=https://madebyme.today/tags/rust/>Rust</a>
<a class="text-decoration-none text-reset hover-success" href=https://madebyme.today/tags/svg/>SVG</a></div><div class=social-media><a href="https://facebook.com/sharer/sharer.php?u=https%3A%2F%2Fmadebyme.today%2Fprojects%2Fgenerating-svg-avatars-from-identifiers%2F&amp;t=Generating+SVG+Avatars+From+Identifiers+-+MadeByMe" class=hide-external target=_blank rel=me title="Share on Facebook"><span class=inline-svg><svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M22 12C22 6.47714 17.5229 1.99999 12 1.99999 6.47715 1.99999 2 6.47714 2 12c0 4.9913 3.65686 9.1283 8.4375 9.8785V14.8906H7.89844V12H10.4375V9.79687c0-2.50625 1.4929-3.89063 3.7771-3.89063C15.3087 5.90624 16.4531 6.10155 16.4531 6.10155V8.56249h-1.261c-1.2422.0-1.6296.77084-1.6296 1.56171V12h2.7734L15.8926 14.8906H13.5625v6.9879C18.3431 21.1283 22 16.9913 22 12z" stroke-linejoin="round"/></svg>
</span></a><a href="https://twitter.com/intent/tweet/?url=https%3A%2F%2Fmadebyme.today%2Fprojects%2Fgenerating-svg-avatars-from-identifiers%2F&amp;text=Generating+SVG+Avatars+From+Identifiers+-+MadeByMe" class=hide-external target=_blank rel=me title="Share on Twitter"><span class=inline-svg><svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M21.9999 5.9246C21.2644 6.25051 20.4744 6.47071 19.6437 6.57025 20.4911 6.06289 21.1411 5.25782 21.4477 4.29948c-.7928.47036-1.671.81212-2.6055.99533C18.0935 4.49855 17.0277 4 15.8474 4c-2.2655.0-4.1029 1.8374-4.1029 4.10464C11.7445 8.42526 11.7815 8.73707 11.8502 9.03832 8.43877 8.86656 5.41666 7.23263 3.39252 4.75046c-.35233.60777-.55492 1.31243-.55492 2.06289.0 1.42342.72492 2.68035 1.82507 3.41585C3.98972 10.2072 3.35729 10.0231 2.80413 9.71567V9.76852c0 1.98798 1.41373 3.64658 3.29164 4.02358C5.75049 13.8855 5.38847 13.9348 5.015 13.9348 4.75075 13.9348 4.49267 13.9102 4.24252 13.8626c.52233 1.6295 2.03735 2.8169 3.83335 2.8486-1.40492 1.101-3.1745 1.7572-5.09645 1.7572C2.64823 18.4684 2.32144 18.449 1.99994 18.4112c1.81626 1.1653 3.97252 1.8435 6.28909 1.8435 7.54867.0 11.67537-6.2521 11.67537-11.67441C19.9644 8.40412 19.9599 8.2262 19.952 8.05003 20.7536 7.47045 21.4494 6.74905 21.9982 5.92724L21.9999 5.9246z" stroke-linejoin="round"/></svg>
</span></a><a href="http://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fmadebyme.today%2Fprojects%2Fgenerating-svg-avatars-from-identifiers%2F&amp;title=Generating+SVG+Avatars+From+Identifiers+-+MadeByMe&amp;source=https%3A%2F%2Fmadebyme.today%2F" class=hide-external target=_blank rel=me title="Share on LinkedIn"><span class=inline-svg><svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M22 3.47059V20.5294C22 20.9194 21.845 21.2935 21.5692 21.5693 21.2935 21.8451 20.9194 22 20.5294 22H3.47056C3.08053 22 2.70648 21.8451 2.43069 21.5693 2.15491 21.2935 1.99997 20.9194 1.99997 20.5294V3.47059c0-.39003.15494-.76408.43072-1.03986C2.70648 2.15494 3.08053 2 3.47056 2H20.5294C20.9194 2 21.2935 2.15494 21.5692 2.43073 21.845 2.70651 22 3.08056 22 3.47059v0zM7.88232 9.64706H4.94115V19.0588H7.88232V9.64706zM8.14703 6.41176C8.14858 6.18929 8.10629 5.96869 8.02258 5.76255 7.93888 5.55642 7.81539 5.36879 7.65916 5.21039c-.15622-.15841-.34211-.2845-.54706-.37106S6.68715 4.70742 6.46468 4.70588H6.41173c-.45242.0-.88632.17973-1.20624.49964-.31991.31992-.49964.75382-.49964 1.20624.0.45243.17973.88633.49964 1.20625C5.52541 7.93792 5.95931 8.11765 6.41173 8.11765v0C6.63423 8.12312 6.85562 8.0847 7.06325 8.00458 7.27089 7.92447 7.46071 7.80422 7.62186 7.65072 7.78301 7.49722 7.91234 7.31346 8.00245 7.10996 8.09256 6.90646 8.14169 6.6872 8.14703 6.46471V6.41176zM19.0588 13.3412c0-2.8294-1.8-3.92943-3.5882-3.92943C14.8851 9.38245 14.3021 9.50715 13.7798 9.77345 13.2576 10.0397 12.8142 10.4383 12.4941 10.9294H12.4117V9.64706H9.64703V19.0588H12.5882V14.0529C12.5457 13.5403 12.7072 13.0315 13.0376 12.6372 13.368 12.2429 13.8407 11.9949 14.3529 11.9471H14.4647C15.4 11.9471 16.0941 12.5353 16.0941 14.0176v5.0412h2.9412L19.0588 13.3412z" stroke-linejoin="round"/></svg>
</span></a><a href="https://www.reddit.com/submit?url=https%3A%2F%2Fmadebyme.today%2Fprojects%2Fgenerating-svg-avatars-from-identifiers%2F&amp;title=Generating+SVG+Avatars+From+Identifiers+-+MadeByMe" class=hide-external target=_blank rel=me title="Share on Reddit"><span class=inline-svg><svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M8.83552 12.4444C8.72564 12.6089 8.66699 12.8022 8.66699 13 8.66699 13.1313 8.69285 13.2614 8.74311 13.3827 8.79336 13.504 8.86702 13.6142 8.95988 13.7071S9.16298 13.8736 9.2843 13.9239C9.40563 13.9741 9.53567 14 9.66699 14 9.86477 14 10.0581 13.9414 10.2226 13.8315c.164400000000001-.1099.2926-.2661.3683-.4488C10.6666 13.2 10.6864 12.9989 10.6478 12.8049 10.6092 12.6109 10.5139 12.4327 10.3741 12.2929 10.2342 12.153 10.0561 12.0578 9.86208 12.0192 9.6681 11.9806 9.46703 12.0004 9.2843 12.0761 9.10158 12.1518 8.9454 12.28 8.83552 12.4444z" stroke-linejoin="round"/><path fill="none" d="M13.7414 13.8715C13.9059 13.9814 14.0992 14.04 14.297 14.04L14.287 14.08C14.4226 14.0815 14.5571 14.0553 14.6822 14.0032 14.8074 13.9511 14.9207 13.874 15.0152 13.7767 15.1096 13.6795 15.1833 13.564 15.2318 13.4373 15.2802 13.3107 15.3024 13.1755 15.297 13.04 15.297 12.8422 15.2383 12.6489 15.1285 12.4844 15.0186 12.32 14.8624 12.1918 14.6797 12.1161 14.4969 12.0404 14.2959 12.0206 14.1019 12.0592 13.9079 12.0978 13.7297 12.193 13.5899 12.3329 13.45 12.4727 13.3548 12.6509 13.3162 12.8449 13.2776 13.0389 13.2974 13.24 13.3731 13.4227 13.4488 13.6054 13.577 13.7616 13.7414 13.8715z" stroke-linejoin="round"/><path fill="none" fill-rule="evenodd" clip-rule="evenodd" d="M21.997 12c0 5.5228-4.4772 10-10 10C6.47415 22 1.99699 17.5228 1.99699 12c0-5.52285 4.47716-10 10.00001-10 5.5228.0 10 4.47715 10 10zM18.4035 11.2154C18.5652 11.446 18.6567 11.7185 18.667 12 18.6712 12.2755 18.5974 12.5467 18.4541 12.782 18.3108 13.0174 18.1038 13.2073 17.857 13.33 17.8682 13.4765 17.8682 13.6236 17.857 13.77c0 2.24-2.61 4.06-5.83 4.06-3.22001.0-5.83001-1.82-5.83001-4.06-.01126-.1464-.01126-.2935.0-.44C6.00465 13.2416 5.83382 13.1125 5.69635 12.9515 5.55887 12.7906 5.45804 12.6017 5.40084 12.3979 5.34363 12.1941 5.33143 11.9803 5.36506 11.7713 5.3987 11.5623 5.47737 11.3632 5.59563 11.1876c.11826-.1755.27328-.3233.45431-.433.18103-.1096.38375-.178699999999999.5941-.2022C6.85439 10.5288 7.06736 10.5513 7.26816 10.6182 7.46897 10.6852 7.65283 10.795 7.80699 10.94 8.95926 10.1585 10.3149 9.73099 11.707 9.71L12.447 6.24C12.4553 6.19983 12.4715 6.16171 12.4946 6.12784 12.5178 6.09398 12.5474 6.06505 12.5819 6.04272 12.6163 6.0204 12.6548 6.00513 12.6951 5.99779 12.7355 5.99046 12.7769 5.99121 12.817 6l2.45.49C15.3866 6.28444 15.5756 6.12825 15.8001 6.04948 16.0245 5.9707 16.2696 5.9745 16.4915 6.06019 16.7134 6.14587 16.8975 6.30784 17.0107 6.51701 17.1239 6.72617 17.1589 6.96885 17.1093 7.20147 17.0597 7.4341 16.9288 7.64143 16.7402 7.78627 16.5515 7.9311 16.3174 8.00394 16.0799 7.99172 15.8423 7.9795 15.6169 7.88301 15.4441 7.71958 15.2713 7.55615 15.1624 7.33648 15.137 7.1L12.997 6.65l-.65 3.12C13.7222 9.7995 15.0594 10.2267 16.197 11 16.4002 10.805 16.6555 10.6729 16.9321 10.6196 17.2087 10.5664 17.4948 10.5943 17.7559 10.7 18.0169 10.8057 18.2419 10.9847 18.4035 11.2154z" stroke-linejoin="round"/><path fill="none" fill-rule="evenodd" clip-rule="evenodd" d="M9.75838 15.5632C9.75455 15.5601 9.74967 15.5585 9.74472 15.5587 9.73976 15.559 9.73506 15.5611 9.73155 15.5646 9.72804 15.5681 9.72596 15.5728 9.72572 15.5777L9.7257 15.5788c.6563.481 1.457.725099999999999 2.2709.6914C12.0035 16.2699 12.0104 16.2699 12.0173 16.2702 12.837 16.3042 13.6432 16.0564 14.3021 15.5686 14.2996 15.5663 14.2967 15.5644 14.2936 15.563 14.29 15.5615 14.2862 15.5607 14.2824 15.5607 14.2746 15.5606 14.2671 15.5636 14.2615 15.569 14.2525 15.5778 14.2429 15.5858 14.2327 15.5931 13.5829 16.0593 12.7942 16.2909 11.9958 16.2503 11.1982 16.2831 10.413 16.0439 9.76912 15.5716L9.75838 15.5632z" stroke-linejoin="round"/></svg></span></a></div><div class="alert alert-info"><h6 class=alert-heading><i class="bi bi-bell-fill me-2 notification-bell" aria-hidden=true></i>Interested in my work?</h6><p class=my-3>Consider subscribing to the <a href=https://madebyme.today/index.xml title="RSS Feed">RSS Feed</a> or
joining my mailing list:
<a href=https://groups.google.com/g/madebyme-notifications>madebyme-notifications on Google Groups
</a>.</p><hr class=mb-0><p class="my-1 small text-secondary"><b>Disclaimer:</b> Only group owner (i.e. me) can view e-mail addresses of group members.
I will not share your e-mail with any third-parties &mdash; it will be used exclusively to
notify you about new blog posts.</p></div><hr><script>let theme=getStoredTheme();theme===null&&(theme=getPreferredTheme());let giscusAttributes={src:"https://giscus.app/client.js","data-repo":"nathiss/nathiss.github.io","data-repo-id":"MDEwOlJlcG9zaXRvcnk4MDYyNjk2Ng==","data-category":"Announcements","data-category-id":"DIC_kwDOBM5FFs4CYJcb","data-mapping":"pathname","data-strict":"1","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":theme,"data-lang":"en","data-loading":"lazy",crossorigin:"anonymous",async:""},giscusScript=document.createElement("script");Object.entries(giscusAttributes).forEach(([e,t])=>giscusScript.setAttribute(e,t)),document.querySelector("article.entry").appendChild(giscusScript)</script></article></div></div></div></main><footer class="mt-auto d-flex justify-content-center py-3 lh-1"><p class=m-0>Copyright &copy;
2023&ndash;2024</p><p class="m-0 ms-1"><span class=text-success>Kamil</span>
Rusin</p><p class="m-0 ms-1">/</span><p class="m-0 ms-1"><a href=/privacy/>Privacy</a></p></footer><div class="toast-container p-3 bottom-0 end-0 position-fixed"><div id=madebyme-consent-banner class="toast bg-body"><div class=toast-header><strong class=me-auto>Cookies 🍪</strong>
<button type=button class="btn-close d-flex justify-content-center align-items-center" data-bs-dismiss=toast aria-label=Close>
<i class="bi bi-x-lg"></i></button></div><div class=toast-body><p>This website uses <a href=https://marketingplatform.google.com/about/analytics/>Google Analytics 4</a> to gather data about page views and <a href=https://giscus.app/>Giscus</a> to support article comments.</p><p>This website respects the <a href=https://en.wikipedia.org/wiki/Do_Not_Track>Do Not Track</a> header field. If you do not wish to be tracked by Google Analytics, then please
enable <a href=https://en.wikipedia.org/wiki/Do_Not_Track>Do Not Track</a> for this domain.</p><p>If you wish to know more about data gathered on this website, read <a href=https://madebyme.today/privacy/>About Tracking & Data Collection</a>.</p><div class="d-flex justify-content-center"><button id=consent-button class="btn btn-success btn-sm py-2 px-4 rounded text-light">
I acknowledge, don't show me this again</button></div></div></div></div><div id=page-progressbar-wrapper class="progress h-1 fixed-top" role=progressbar aria-valuemin=0 aria-valuenow=0 aria-valuemax=100><div id=page-progressbar class="progress-bar bg-success" style=width:0%></div></div><script>const consentBannerKey="madebyme-given-consent",consentBannerVersion="6d214ff708c612fc53a89e81f17042a374be0126891243214ebc080380ce641a";document.getElementById("consent-button").addEventListener("click",()=>{localStorage.setItem(consentBannerKey,consentBannerVersion),document.getElementById("madebyme-consent-banner").classList.remove("show")});const localBannerVersion=localStorage.getItem(consentBannerKey);localBannerVersion!==consentBannerVersion&&document.getElementById("madebyme-consent-banner").classList.add("show")</script><script>const themeToggler=document.getElementById("theme-toggler");themeToggler.addEventListener("click",()=>{const e=getStoredTheme();e===null?setTheme("light"):e==="light"?setTheme("dark"):e==="dark"&&setTheme("auto")}),themeToggler.addEventListener("mousemove",()=>{const e=getStoredTheme();switch(e){case"light":themeToggler.title="Light theme mode";break;case"dark":themeToggler.title="Dark theme mode";break;case null:themeToggler.title="Auto theme mode";break;default:console.warn(`Unknown themeMode: ${e}`);break}})</script><script src=https://madebyme.today/3rd-party/bootstrap/dist/js/bootstrap.bundle.min.5ff6240d9ca34dfe30c9cd95cb5e981823c7c0063cad9258f8f3a0a24663401da684844524272410673a6325fd78db0f7e7d0fcd3844b8db3eb9aa2613908ee8.js integrity="sha512-X/YkDZyjTf4wyc2Vy16YGCPHwAY8rZJY+POgokZjQB2mhIRFJCckEGc6YyX9eNsPfn0PzThEuNs+uaomE5CO6A=="></script><script defer>const readingProgressBar={wrapper:document.getElementById("page-progressbar-wrapper"),progressBar:document.getElementById("page-progressbar"),update:()=>{const t=document.documentElement.scrollTop,n=document.documentElement.scrollHeight-document.documentElement.clientHeight,e=t/n*100;readingProgressBar.wrapper.setAttribute("aria-valuenow",Math.trunc(e)),readingProgressBar.progressBar.style.width=e+"%"}};document.addEventListener("scroll",readingProgressBar.update);const bodyResizeObserver=new ResizeObserver(e=>{readingProgressBar.update()});bodyResizeObserver.observe(document.body)</script><script type=application/ld+json>{"@context":"https://schema.org/","@type":"Webpage","mainContentOfPage":{"@context":"https://schema.org/","@type":"WebPageElement","cssSelector":".site-main"},"primaryImageOfPage":"https://madebyme.today/polaris-1920x1080.webp"}</script><script type=application/ld+json>{"@context":"https://schema.org/","@type":"WebSite","name":"MadeByMe","alternateName":"MadeByMe","url":"https://madebyme.today/","description":"I'm Kamil; I work as a software engineer and this is a collection of all things I've been working on in my personal time.","disambiguatingDescription":"I'm Kamil; I work as a software engineer and this is a collection of all things I've been working on in my personal time.","isFamilyFriendly":"true","thumbnailUrl":"https://madebyme.today/favicons/favicon-180x180-box-light.png","image":"https://madebyme.today/favicons/favicon-180x180-box-light.png","inLanguage":"en-us","sameAs":["https://www.madebyme.today","https://www.madebyme.today/","https://madebyme.today","index.xml"],"author":{"@context":"https://schema.org/","@type":"Person","gender":"male","email":"kamil.jakub.rusin@gmail.com","givenName":"Kamil","familyName":"Rusin","name":"Kamil Rusin","jobTitle":"Software Engineer","nationality":{"@context":"https://schema.org/","@type":"Country","name":"PL"},"alumniOf":{"@context":"https://schema.org/","@type":"CollegeOrUniversity","url":"https://www.pk.edu.pl/","name":"The Cracow University of Technology"},"url":"https:\/\/madebyme.today\/"}}</script></body></html>