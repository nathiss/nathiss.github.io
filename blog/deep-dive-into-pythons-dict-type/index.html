<!doctype html><html lang=en data-theme=light class=h-full><head><script>{const e=localStorage.theme;if(e!==null)document.documentElement.setAttribute("data-theme",e);else{const e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";document.documentElement.setAttribute("data-theme",e)}}</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-CXYG0Q9PH0"></script><script>var dnt,doNotTrack=!1;if(!0&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-CXYG0Q9PH0")}</script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=stylesheet type=text/css href=https://madebyme.today/stylesheets/output.min.ef73616c18e6dbb7d0c4b06eb168690961d9fa5d5bbd25e9648a55378c8cf04c1e9409e82cd71efe6ba538a047420e54e491653eda9a46327b49414db89ddc6f.css integrity="sha512-73NhbBjm27fQxLBusWhpCWHZ+l1bvSXpZIpVN4yM8EwelAnoLNce/mulOKBHQg5U5JFlPtqaRjJ7SUFNuJ3cbw=="><link rel=stylesheet type=text/css href=https://madebyme.today/stylesheets/syntax/light.min.f8c5af1bbcb050c9a0f9bc73e6a627b23a8825d8537cb416518426e6d791257ade4676cd57fcabcbb1542e43618a986520126eae9a236ba2937a49b8db8968f0.css integrity="sha512-+MWvG7ywUMmg+bxz5qYnsjqIJdhTfLQWUYQm5teRJXreRnbNV/yry7FULkNhiphlIBJurpoja6KTekm424lo8A=="><link rel=stylesheet type=text/css href=https://madebyme.today/stylesheets/syntax/dark.min.e82275a221c102f04ff48a5a0444f4753cd8fe31e437176a94bb4d1f80d0fce5027a1414ad6ad9d0b8ab893f421c6cf15be886ffb228b55cd8cd85399d60ef99.css integrity="sha512-6CJ1oiHBAvBP9IpaBET0dTzY/jHkNxdqlLtNH4DQ/OUCehQUrWrZ0LiriT9CHGzxW+iG/7IotVzYzYU5nWDvmQ=="><link rel=icon href=/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://madebyme.today/favicons/favicon-16x16-box-light.png><link rel=icon type=image/png sizes=32x32 href=https://madebyme.today/favicons/favicon-32x32-box-light.png><link rel=icon type=image/png sizes=64x64 href=https://madebyme.today/favicons/favicon-64x64-box-light.png><link rel=apple-touch-icon sizes=180x180 href=https://madebyme.today/favicons/favicon-180x180-box-light.png><link rel=canonical href=https://madebyme.today/blog/deep-dive-into-pythons-dict-type/><link rel=alternate type=application/rss+xml href=https://madebyme.today/index.xml title=MadeByMe><meta name=description content="Let&rsquo;s continue analysis from Performance Analysis of Python&rsquo;s dict() and {} and dive deeper into
the Python&rsquo;s internal types for dict."><meta name=author content="Kamil Rusin"><meta name=msapplication-TileColor content="#f5f5f5"><meta name=theme-color content="#f5f5f5"><meta name=twitter:dnt content="on"><meta name=title property="og:title" content="Deep Dive into Python's `dict` type"><meta property="og:description" content="
        
            Let&rsquo;s continue analysis from Performance Analysis of Python&rsquo;s dict() and {} and dive deeper into
the Python&rsquo;s internal types for dict.
        
    "><meta property="og:type" content="
        article
    "><meta property="og:url" content="https://madebyme.today/blog/deep-dive-into-pythons-dict-type/"><meta name=image property="og:image" content="https://madebyme.today/polaris-1920x1080.webp"><meta name=image property="og:image:secure_url" content="https://madebyme.today/polaris-1920x1080.webp"><meta property="article:section" content="blog"><meta property="article:published_time" content="2025-11-24T19:34:37+01:00"><meta property="article:modified_time" content="2025-11-24T19:34:37+01:00"><meta property="article:author" content="Kamil Rusin"><meta property="og:site_name" content="MadeByMe"><meta property="og:see_also" content="https://madebyme.today/blog/python-dict-vs-curly-brackets/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://madebyme.today/polaris-1920x1080.webp"><meta name=twitter:title content="Deep Dive into Python's `dict` type"><meta name=twitter:description content="Letâ€™s continue analysis from Performance Analysis of Pythonâ€™s dict() and {} and dive deeper into the Pythonâ€™s internal types for dict."><meta name=twitter:site content="@AreElectrons"><meta name=generator content="Hugo 0.133.0"><title>Deep Dive into Python's `dict` type - MadeByMe</title>
<script>const themeToColor={light:"#F5F5F5",dark:"#2A303C"},giscusSendMessage=e=>{const t=document.querySelector("iframe.giscus-frame");if(!t)return;t.contentWindow.postMessage({giscus:e},"https://giscus.app")},getTheme=()=>{const e=localStorage.getItem("theme");return e!==null?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"},setTheme=e=>{localStorage.setItem("theme",e),reloadTheme(e)},reloadTheme=e=>{document.documentElement.setAttribute("data-theme",e),updateThemeCheckboxStatus(),giscusSendMessage({setConfig:{theme:getTheme()}});const t=themeToColor[e];document.querySelector('meta[name="theme-color"]').setAttribute("content",t),document.querySelector('meta[name="msapplication-TileColor"]').setAttribute("content",t)},setUserTheme=e=>{const t=e.checked?"dark":"light";setTheme(t)},updateThemeCheckboxStatus=()=>{const e=document.getElementById("theme-checkbox");e.checked=getTheme()==="dark"};window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{reloadTheme(getTheme())})</script><script>let FF_FOUC_FIX</script></head><body class="h-full flex flex-col"><nav class="navbar justify-between bg-base-100"><div class=navbar-start><div class=dropdown><div tabindex=0 role=button class="btn btn-ghost lg:hidden" aria-label=Menu><svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h8m-8 6h16"/></svg></div><ul tabindex=0 class="menu dropdown-content bg-base-100 rounded-box z-[1] mt-3 w-52 p-2 shadow"><li><a href=https://madebyme.today/blog/ title=Blog class=nav-link>Blog</a></li><li><a href=https://madebyme.today/projects/ title=Projects class=nav-link>Projects</a></li><li><a href=https://jungle.madebyme.today/ title="Welcome to the ðŸŒ´ Jungle!" class=nav-link>ðŸŒ´ Jungle</a></li><li><a href=https://madebyme.today/cv/ title=ResumÃ© class=nav-link>ResumÃ©</a></li></ul></div><a class="btn btn-ghost text-xl flex flex-col text-primary font-bold" href=https://madebyme.today/>MadeByMe</a></div><div><div class="hidden lg:flex"><ul class="menu menu-horizontal px-1"><li><a href=https://madebyme.today/blog/ title=Blog class=nav-link>Blog</a></li><li><a href=https://madebyme.today/projects/ title=Projects class=nav-link>Projects</a></li><li><a href=https://jungle.madebyme.today/ title="Welcome to the ðŸŒ´ Jungle!" class=nav-link>ðŸŒ´ Jungle</a></li><li><a href=https://madebyme.today/cv/ title=ResumÃ© class=nav-link>ResumÃ©</a></li></ul></div><label class="flex cursor-pointer gap-2" aria-label="Change theme"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><path d="M12 1v2m0 18v2M4.2 4.2l1.4 1.4M18.4 18.4l1.4 1.4M1 12h2m18 0h2M4.2 19.8l1.4-1.4M18.4 5.6l1.4-1.4"/></svg>
<input id=theme-checkbox type=checkbox value=dark aria-label="Change theme" onchange=setUserTheme(this) class="toggle theme-controller bg-primary-500 hover:bg-primary-500 dark:bg-darkmode-primary-500 dark:hover:bg-darkmode-primary-500"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></label></div></nav><main class="grow md:container px-6 !max-w-3xl"><nav class="breadcrumbs text-sm"><script type=application/ld+json>{"@context":"https://schema.org/","@type":"BreadcrumbList","itemListOrder":"ItemListOrderAscending","itemListElement":[{"@context":"https://schema.org/","@type":"ListItem","position":1,"name":"MadeByMe","item":"https://madebyme.today/","url":"https://madebyme.today/blog/deep-dive-into-pythons-dict-type/"},{"@context":"https://schema.org/","@type":"ListItem","position":2,"name":"Blog","item":"https://madebyme.today/blog/","url":"https://madebyme.today/blog/deep-dive-into-pythons-dict-type/"},{"@context":"https://schema.org/","@type":"ListItem","position":3,"name":"Deep Dive into Python's `dict` type","item":"https://madebyme.today/blog/deep-dive-into-pythons-dict-type/","url":"https://madebyme.today/blog/deep-dive-into-pythons-dict-type/"}]}</script><ul><li><a class=hover:decoration-dashed href=https://madebyme.today/><span>root</span></a></li><li><a class=hover:decoration-dashed href=https://madebyme.today/blog/><span>Blog</span></a></li><li><a class=hover:decoration-dashed href=https://madebyme.today/blog/deep-dive-into-pythons-dict-type/><span>Deep Dive into Python&rsquo;s <code>dict</code> type</span></a></li></ul></nav><article class=entry><script type=application/ld+json>{"@context":"https://schema.org/","@type":"BlogPosting","name":"Deep Dive into Python's `dict` type","headline":"Deep Dive into Python's `dict` type | MadeByMe","alternativeHeadline":"Deep Dive into Python's `dict` type | MadeByMe","url":"https://madebyme.today/blog/deep-dive-into-pythons-dict-type/","datePublished":"2025-11-24T19:34:37+01:00","inLanguage":"en-us","wordCount":1564,"isFamilyFriendly":"true","copyrightYear":"2025","copyrightHolder":{"@context":"https://schema.org/","@type":"Person","givenName":"Kamil","familyName":"Rusin","name":"Kamil Rusin"},"description":"Let\u0026rsquo;s continue analysis from Performance Analysis of Python\u0026rsquo;s dict() and {} and dive deeper into the Python\u0026rsquo;s internal types for dict.\n","publisher":{"@context":"https://schema.org/","@type":"Organization","name":"MadeByMe","url":"https://madebyme.today/"},"articleSection":"python-dict","keywords":["Python","CPython","dictionaries"],"mainEntityOfPage":"true","articleBody":"Let\u0026rsquo;s continue analysis from Performance Analysis of Python\u0026rsquo;s dict() and {} and dive deeper into the Python\u0026rsquo;s internal types for dict.\nResearch 1\u0026gt;\u0026gt;\u0026gt; import sys 2\u0026gt;\u0026gt;\u0026gt; sys.version_info 3sys.version_info(major=3, minor=12, micro=1, releaselevel=\u0026#39;final\u0026#39;, serial=0) 4\u0026gt;\u0026gt;\u0026gt; 5\u0026gt;\u0026gt;\u0026gt; def a(): 6... return dict() 7\u0026gt;\u0026gt;\u0026gt; 8\u0026gt;\u0026gt;\u0026gt; def b(): 9... return {} 10\u0026gt;\u0026gt;\u0026gt; 11\u0026gt;\u0026gt;\u0026gt; import dis 12\u0026gt;\u0026gt;\u0026gt; 13\u0026gt;\u0026gt;\u0026gt; dis.dis(a) 14 1 0 RESUME 0 15 16 2 2 LOAD_GLOBAL 1 (NULL + dict) 17 12 CALL 0 18 20 RETURN_VALUE 19\u0026gt;\u0026gt;\u0026gt; dis.dis(b) 20 1 0 RESUME 0 21 22 2 2 BUILD_MAP 0 23 4 RETURN_VALUE 1$ python -m timeit \u0026#34;dict(a=\u0026#39;value\u0026#39;, another=\u0026#39;value\u0026#39;)\u0026#34; 25000000 loops, best of 5: 71 nsec per loop 3 4$ python -m timeit \u0026#34;{\u0026#39;a\u0026#39;: \u0026#39;value\u0026#39;,\u0026#39;another\u0026#39;: \u0026#39;value\u0026#39;}\u0026#34; 55000000 loops, best of 5: 51.1 nsec per loop C code from cpython dict type Python\u0026rsquo;s dict type is defined inside the interpreter:\n1PyTypeObject PyDict_Type = { 2 // ... 3 dict_init, /* tp_init */ 4 _PyType_AllocNoTrack, /* tp_alloc */ 5 dict_new, /* tp_new */ 6 // ... 7} See: https://github.com/python/cpython/blob/main/Objects/dictobject.c#L3962\nWhen a new dict object is created (dict()), it gets created by the dict_new function, which internally uses set tp_alloc to allocate a new memory region, and then initialises with the dict_init function.\nMost of the dict_init logic is contained in the dict_update_common function. First it gets filled up with unpacked args, and then with kwargs. In both cases it uses the dict_merge function, which does a lot.\n{} literal expression Python\u0026rsquo;s {} literal expression gets compiled into BUILD_MAP opcode. The opcode is interpreted by one of the following:\nPython/bytecodes.c#BUILD_MAP, Python/executor_cases.c.h#_BUILD_MAP, Python/generated_cases.c.h#BUILD_MAP\nNote The top of the executor_cases.c.h and generated_cases.c.h files says:\n1// This file is generated by ... 2// from: 3// Python/bytecodes.c 4// Do not edit! Therefore, we should really look only at the true source: bytecodes.c.\nThe main logic of the opcode is contained in _PyDict_FromItems function form the dictobject.c file.\n1// Include/internal/pycore_dict.h 2extern PyObject *_PyDict_FromItems( 3 PyObject *const *keys, Py_ssize_t keys_offset, 4 PyObject *const *values, Py_ssize_t values_offset, 5 Py_ssize_t length); The _PyDict_FromItems function:\nchecks if all keys on the stack are \u0026ldquo;valid\u0026rdquo; (see PyUnicode_CheckExact function) constructs a pre-sized dict object (see dict_new_presized function), inserts key-values one-by-one from the stack, returns the dict object. Case for list() vs. [] A similar analysis can be done for Python\u0026rsquo;s lists.\n1\u0026gt;\u0026gt;\u0026gt; import sys 2\u0026gt;\u0026gt;\u0026gt; sys.version_info 3sys.version_info(major=3, minor=12, micro=1, releaselevel=\u0026#39;final\u0026#39;, serial=0) 4\u0026gt;\u0026gt;\u0026gt; 5\u0026gt;\u0026gt;\u0026gt; def a(): 6... return list((1, 2)) 7\u0026gt;\u0026gt;\u0026gt; 8\u0026gt;\u0026gt;\u0026gt; def b(): 9... return [1, 2] 10\u0026gt;\u0026gt;\u0026gt; 11\u0026gt;\u0026gt;\u0026gt; import dis 12\u0026gt;\u0026gt;\u0026gt; 13\u0026gt;\u0026gt;\u0026gt; dis.dis(a) 14 1 0 RESUME 0 15 16 2 2 LOAD_GLOBAL 1 (NULL + list) 17 12 LOAD_CONST 1 ((1, 2)) 18 14 CALL 1 19 22 RETURN_VALUE 20\u0026gt;\u0026gt;\u0026gt; dis.dis(b) 21 1 0 RESUME 0 22 23 2 2 LOAD_CONST 1 (1) 24 4 LOAD_CONST 2 (2) 25 6 BUILD_LIST 2 26 8 RETURN_VALUE 1$ python -m timeit \u0026#34;list((1, 2, \u0026#39;a\u0026#39;))\u0026#34; 25000000 loops, best of 5: 53 nsec per loop 3$ python -m timeit \u0026#34;[(1, 2, \u0026#39;a\u0026#39;)]\u0026#34; 410000000 loops, best of 5: 30.4 nsec per loop list type The Python\u0026rsquo;s list type is defined in the listobject.c file:\n1PyTypeObject PyList_Type = { 2 // ... 3 (initproc)list___init__, /* tp_init */ 4 PyType_GenericAlloc, /* tp_alloc */ 5 PyType_GenericNew, /* tp_new */ 6 // ... 7} PyType_GenericNew does nothing \u0026ndash; it ignores args and kwargs, and return an object allocated by type-\u0026gt;typ_alloc. Source: https://github.com/python/cpython/blob/main/Objects/typeobject.c#L1768\nPyType_GenericAlloc allocated a new object and (if it\u0026rsquo;s garbage-collectable) marks it as \u0026ldquo;to-be-collected\u0026rdquo;.\nlist___init__ is a convenience wrapper around the list___init___impl function, which does the actual initialisation. It does some basic pre-steps:\nfails if any kwarg has been passed, fails if args has more then 1 element, converts the first argument of args to an iterable. list___init___impl clears the list (if not empty) and extends it by the provided iterable (by calling the list_extend function).\nQuestion I think the two:\n1list((1, 2, 3)) 2 3_tmp = list() 4_tmp.extend((1, 2, 3)) are equivalent in every way (but the generated opcodes sequence) and are calling the same underlying C code.\n[] literal expression Opcode BUILD_LIST uses the _PyList_FromArraySteal function to construct a list object and return it.\nNote _PyList_FromArraySteal is used since 3.12. See 3.12 changelog and gh-100146. Before 3.12, the opcode was repeatedly calling POP() to get items from the stack, and then inserting them into the list.\n1while (--oparg \u0026gt;= 0) { 2 PyObject *item = POP(); 3 PyList_SET_ITEM(list, oparg, item); 4} See change in gh-100146 PR.\nThe _PyList_FromArraySteal helper creates an empty list (if there are no items), or preallocates the list before inserting items to it.\n1PyObject **dst = list-\u0026gt;ob_item; 2memcpy(dst, src, n * sizeof(PyObject *)); Case of set((1, 2)) vs. {1, 2} \u0026hellip; and similar analysis can be done for sets.\nWarning AFAIK there\u0026rsquo;s no way to construct a new set with a literal expression, hence the following analysis is performed for sets with two elements: 1 and 2. 1$ python -m timeit \u0026#34;set((1, 2))\u0026#34; 25000000 loops, best of 5: 82.6 nsec per loop 3$ python -m timeit \u0026#34;{1, 2}\u0026#34; 45000000 loops, best of 5: 45.5 nsec per loop 1\u0026gt;\u0026gt;\u0026gt; import sys 2\u0026gt;\u0026gt;\u0026gt; sys.version_info 3sys.version_info(major=3, minor=12, micro=1, releaselevel=\u0026#39;final\u0026#39;, serial=0) 4\u0026gt;\u0026gt;\u0026gt; 5\u0026gt;\u0026gt;\u0026gt; def a(): 6... return set((1, 2)) 7\u0026gt;\u0026gt;\u0026gt; 8\u0026gt;\u0026gt;\u0026gt; def b(): 9... return {1, 2} 10\u0026gt;\u0026gt;\u0026gt; 11\u0026gt;\u0026gt;\u0026gt; import dis 12\u0026gt;\u0026gt;\u0026gt; 13\u0026gt;\u0026gt;\u0026gt; dis.dis(a) 14 1 0 RESUME 0 15 16 2 2 LOAD_GLOBAL 1 (NULL + set) 17 12 LOAD_CONST 1 ((1, 2)) 18 14 CALL 1 19 22 RETURN_VALUE 20\u0026gt;\u0026gt;\u0026gt; dis.dis(b) 21 1 0 RESUME 0 22 23 2 2 LOAD_CONST 1 (1) 24 4 LOAD_CONST 2 (2) 25 6 BUILD_SET 2 26 8 RETURN_VALUE set type The Python\u0026rsquo;s set type is defined in the setobject.c file:\n1PyTypeObject PySet_Type = { 2 // ... 3 (initproc)set_init, /* tp_init */ 4 PyType_GenericAlloc, /* tp_alloc */ 5 set_new, /* tp_new */ 6 // ... 7} set_new uses the allocated to create a new empty set object. Internally it calls the make_new_set function.\nset_init performs some pre-steps:\nfails if any kwarg has been passed, fails if args has more then 1 element, converts the first argument of args to an iterable, if the set object has already been filled, then it clears it \u0026hellip; and calls the set_update_internal function, to insert values into the set object.\n{1, 2} literal expression The opcode handler has no dedicated helpers. It constructs a new set (empty), and then iterates over all items from the stack and insets them one-by-one.\n1inst(BUILD_SET, (values[oparg] -- set)) { 2 set = PySet_New(NULL); 3 if (set == NULL) 4 GOTO_ERROR(error); 5 int err = 0; 6 for (int i = 0; i \u0026lt; oparg; i++) { 7 PyObject *item = values[i]; 8 if (err == 0) 9 err = PySet_Add(set, item); 10 Py_DECREF(item); 11 } 12 if (err != 0) { 13 Py_DECREF(set); 14 ERROR_IF(true, error); 15 } 16} Source: https://github.com/python/cpython/blob/main/Python/bytecodes.c#L1627\nWarning The generated bytecode is different if we add another argument to the literal expression: {1, 2, 3}. Then it becomes:\n1 2 BUILD_SET 0 2 4 LOAD_CONST 1 (frozenset({1, 2, 3})) 3 6 SET_UPDATE 1 4 8 RETURN_VALUE Case of tuple((1, 2, []) vs. (1, 2, []) This one\u0026rsquo;s tricky. Constructing a tuple with the tuple type requires an iterable. The easiest way of getting one it to create a tuple literal, which is obviously less efficient, than using a tuple literal syntax in the first place.\n1\u0026gt;\u0026gt;\u0026gt; import sys 2\u0026gt;\u0026gt;\u0026gt; sys.version_info 3sys.version_info(major=3, minor=12, micro=1, releaselevel=\u0026#39;final\u0026#39;, serial=0) 4\u0026gt;\u0026gt;\u0026gt; 5\u0026gt;\u0026gt;\u0026gt; def a(): 6... return tuple((1, 2, [])) 7\u0026gt;\u0026gt;\u0026gt; 8\u0026gt;\u0026gt;\u0026gt; def b(): 9... return (1, 2, []) 10\u0026gt;\u0026gt;\u0026gt; 11\u0026gt;\u0026gt;\u0026gt; import dis 12\u0026gt;\u0026gt;\u0026gt; 13\u0026gt;\u0026gt;\u0026gt; dis.dis(a) 14 1 0 RESUME 0 15 16 2 2 LOAD_GLOBAL 1 (NULL + tuple) 17 12 LOAD_CONST 1 (1) 18 14 LOAD_CONST 2 (2) 19 16 BUILD_LIST 0 20 18 BUILD_TUPLE 3 21 20 CALL 1 22 28 RETURN_VALUE 23\u0026gt;\u0026gt;\u0026gt; dis.dis(b) 24 1 0 RESUME 0 25 26 2 2 LOAD_CONST 1 (1) 27 4 LOAD_CONST 2 (2) 28 6 BUILD_LIST 0 29 8 BUILD_TUPLE 3 30 10 RETURN_VALUE It might not make much sense to include this example in the article.\ntuple type The Python\u0026rsquo;s tuple type is defined in tupleobject.c. Interestingly, it has no tp_alloc, nor tp_init.\n1PyTypeObject PyTuple_Type = { 2 // ... 3 0, /* tp_init */ 4 0, /* tp_alloc */ 5 tuple_new, /* tp_new */ 6 // ... 7} The tuple_new function is responsible for allocating a new tuple object, with the items passed as a parameter.\nQuestions Format used by dis.dis. See: SO answer explaining columns of dis.dis output. What does each of the bytecodes do: RESUME A no-op. Performing internal tracing and debugging. See: https://docs.python.org/3/library/dis.html#opcode-RESUME, LOAD_GLOBAL Args: namei Loads global named co_named[namei\u0026gt;\u0026gt;1] onto the stack. See: https://docs.python.org/3/library/dis.html#opcode-LOAD_GLOBAL, PRECALL (deprecated) Prefixes CALL. It\u0026rsquo;s a no-op. Added in Python 3.11. Removed in Python 3.12. See https://docs.python.org/3.11/library/dis.html#opcode-PRECALL, CALL Args: argc Calls a callable object with the number of arguments specified by argc. Arguments are stored on the stack (in ascending order): to call a function: NULL, The callable, The positional arguments, The named arguments, to call a method: The callable, self, The remaining positional arguments, The named arguments, See: https://docs.python.org/3/library/dis.html#opcode-CALL, RETURN_VALUE Returns with STACK[-1] to the caller function. See: https://docs.python.org/3/library/dis.html#opcode-RETURN_VALUE, BUILD_MAP Args: count Pushes a new dictionary object onto the stack. Pops 2 * count items, so that the dictionary holds count entries. See: https://docs.python.org/3/library/dis.html#opcode-BUILD_MAP. References Python Bytecode Instructions @ 3.12 Python Bytecode Instructions @ 3.11 Bytecode list (for some reason in Polish) Another article on the subject: https://doughellmann.com/posts/the-performance-impact-of-using-dict-instead-of-in-cpython-2-7-2/ Article on Python\u0026rsquo;s set literals: https://renzolucioni.com/pythons-set-literals/ ","author":{"@context":"https://schema.org/","@type":"Person","gender":"male","email":"kamil.jakub.rusin@gmail.com","givenName":"Kamil","familyName":"Rusin","name":"Kamil Rusin","jobTitle":"Software Engineer","nationality":{"@context":"https://schema.org/","@type":"Country","name":"PL"},"alumniOf":{"@context":"https://schema.org/","@type":"CollegeOrUniversity","url":"https://www.pk.edu.pl/","name":"The Cracow University of Technology"},"url":"https:\/\/madebyme.today\/"}}</script><script type=application/ld+json>{"@context":"https://schema.org/","@type":"WPHeader","@id":"#article-title","cssSelector":"#article-title"}</script><header class=mt-3><h1 id=article-title class=text-3xl>Deep Dive into Python&rsquo;s <code>dict</code> type</h1></header><footer class="inline-flex gap-1 flex-wrap"><time datetime=2025-11-24T19:34:37>2025/11/24
</time><span class=select-none>Â·</span>
<span>8 min</span>
<span class=select-none>Â·</span>
<a class="btn btn-xs" role=button href=https://madebyme.today/tags/cpython/>#CPython</a>
<a class="btn btn-xs" role=button href=https://madebyme.today/tags/dictionaries/>#Dictionaries</a>
<a class="btn btn-xs" role=button href=https://madebyme.today/tags/python/>#Python</a></footer><details class="collapse bg-base-200 my-3"><summary class="collapse-title text-lg font-medium">Table Of Contents</summary><div class="collapse-content table-of-contents markdown-body"><nav id=TableOfContents><ul><li><a href=#research>Research</a><ul><li><a href=#c-code-from-cpython>C code from cpython</a><ul><li><a href=#dict-type><code>dict</code> type</a></li><li><a href=#-literal-expression><code>{}</code> literal expression</a></li></ul></li><li><a href=#case-for-list-vs->Case for <code>list()</code> vs. <code>[]</code></a><ul><li><a href=#list-type><code>list</code> type</a></li><li><a href=#-literal-expression-1><code>[]</code> literal expression</a></li></ul></li><li><a href=#case-of-set1-2-vs-1-2>Case of <code>set((1, 2))</code> vs. <code>{1, 2}</code></a><ul><li><a href=#set-type><code>set</code> type</a></li><li><a href=#1-2-literal-expression><code>{1, 2}</code> literal expression</a></li></ul></li><li><a href=#case-of-tuple1-2--vs--1-2->Case of <code>tuple((1, 2, [])</code> vs. <code>(1, 2, [])</code></a><ul><li><a href=#tuple-type><code>tuple</code> type</a></li></ul></li><li><a href=#questions>Questions</a></li><li><a href=#references>References</a></li></ul></li></ul></nav></div></details><main class="my-4 markdown-body"><p>Let&rsquo;s continue analysis from <a href=https://madebyme.today/blog/python-dict-vs-curly-brackets/>Performance Analysis of Python&rsquo;s <code>dict()</code> and <code>{}</code></a> and dive deeper into
the Python&rsquo;s internal types for <code>dict</code>.</p><h2 id=research class="my-8 md:my-12 flex items-center justify-center"><hr class="w-1/12 border-neutral shrink-0 hidden md:block"><a class="font-bold text-center w-full md:w-fit mx-4 !no-underline !link-neutral" href=#research aria-label=Anchor>Research</a><hr class="w-1/12 border-neutral shrink-0 hidden md:block"></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=ln id=hl-0-1><a class=lnlinks href=#hl-0-1> 1</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=kn>import</span> <span class=nn>sys</span>
</span></span><span class=line><span class=ln id=hl-0-2><a class=lnlinks href=#hl-0-2> 2</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>sys</span><span class=o>.</span><span class=n>version_info</span>
</span></span><span class=line><span class=ln id=hl-0-3><a class=lnlinks href=#hl-0-3> 3</a></span><span class=cl><span class=n>sys</span><span class=o>.</span><span class=n>version_info</span><span class=p>(</span><span class=n>major</span><span class=o>=</span><span class=mi>3</span><span class=p>,</span> <span class=n>minor</span><span class=o>=</span><span class=mi>12</span><span class=p>,</span> <span class=n>micro</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>releaselevel</span><span class=o>=</span><span class=s1>&#39;final&#39;</span><span class=p>,</span> <span class=n>serial</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=ln id=hl-0-4><a class=lnlinks href=#hl-0-4> 4</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span>
</span></span><span class=line><span class=ln id=hl-0-5><a class=lnlinks href=#hl-0-5> 5</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=k>def</span> <span class=nf>a</span><span class=p>():</span>
</span></span><span class=line><span class=ln id=hl-0-6><a class=lnlinks href=#hl-0-6> 6</a></span><span class=cl><span class=o>...</span>   <span class=k>return</span> <span class=nb>dict</span><span class=p>()</span>
</span></span><span class=line><span class=ln id=hl-0-7><a class=lnlinks href=#hl-0-7> 7</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span>
</span></span><span class=line><span class=ln id=hl-0-8><a class=lnlinks href=#hl-0-8> 8</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=k>def</span> <span class=nf>b</span><span class=p>():</span>
</span></span><span class=line><span class=ln id=hl-0-9><a class=lnlinks href=#hl-0-9> 9</a></span><span class=cl><span class=o>...</span>   <span class=k>return</span> <span class=p>{}</span>
</span></span><span class=line><span class=ln id=hl-0-10><a class=lnlinks href=#hl-0-10>10</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span>
</span></span><span class=line><span class=ln id=hl-0-11><a class=lnlinks href=#hl-0-11>11</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=kn>import</span> <span class=nn>dis</span>
</span></span><span class=line><span class=ln id=hl-0-12><a class=lnlinks href=#hl-0-12>12</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span>
</span></span><span class=line><span class=ln id=hl-0-13><a class=lnlinks href=#hl-0-13>13</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>dis</span><span class=o>.</span><span class=n>dis</span><span class=p>(</span><span class=n>a</span><span class=p>)</span>
</span></span><span class=line><span class=ln id=hl-0-14><a class=lnlinks href=#hl-0-14>14</a></span><span class=cl>  <span class=mi>1</span>           <span class=mi>0</span> <span class=n>RESUME</span>                   <span class=mi>0</span>
</span></span><span class=line><span class=ln id=hl-0-15><a class=lnlinks href=#hl-0-15>15</a></span><span class=cl>
</span></span><span class=line><span class=ln id=hl-0-16><a class=lnlinks href=#hl-0-16>16</a></span><span class=cl>  <span class=mi>2</span>           <span class=mi>2</span> <span class=n>LOAD_GLOBAL</span>              <span class=mi>1</span> <span class=p>(</span><span class=n>NULL</span> <span class=o>+</span> <span class=nb>dict</span><span class=p>)</span>
</span></span><span class=line><span class=ln id=hl-0-17><a class=lnlinks href=#hl-0-17>17</a></span><span class=cl>             <span class=mi>12</span> <span class=n>CALL</span>                     <span class=mi>0</span>
</span></span><span class=line><span class=ln id=hl-0-18><a class=lnlinks href=#hl-0-18>18</a></span><span class=cl>             <span class=mi>20</span> <span class=n>RETURN_VALUE</span>
</span></span><span class=line><span class=ln id=hl-0-19><a class=lnlinks href=#hl-0-19>19</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>dis</span><span class=o>.</span><span class=n>dis</span><span class=p>(</span><span class=n>b</span><span class=p>)</span>
</span></span><span class=line><span class=ln id=hl-0-20><a class=lnlinks href=#hl-0-20>20</a></span><span class=cl>  <span class=mi>1</span>           <span class=mi>0</span> <span class=n>RESUME</span>                   <span class=mi>0</span>
</span></span><span class=line><span class=ln id=hl-0-21><a class=lnlinks href=#hl-0-21>21</a></span><span class=cl>
</span></span><span class=line><span class=ln id=hl-0-22><a class=lnlinks href=#hl-0-22>22</a></span><span class=cl>  <span class=mi>2</span>           <span class=mi>2</span> <span class=n>BUILD_MAP</span>                <span class=mi>0</span>
</span></span><span class=line><span class=ln id=hl-0-23><a class=lnlinks href=#hl-0-23>23</a></span><span class=cl>              <span class=mi>4</span> <span class=n>RETURN_VALUE</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=ln id=hl-1-1><a class=lnlinks href=#hl-1-1>1</a></span><span class=cl>$ python -m timeit <span class=s2>&#34;dict(a=&#39;value&#39;, another=&#39;value&#39;)&#34;</span>
</span></span><span class=line><span class=ln id=hl-1-2><a class=lnlinks href=#hl-1-2>2</a></span><span class=cl><span class=m>5000000</span> loops, best of 5: <span class=m>71</span> nsec per loop
</span></span><span class=line><span class=ln id=hl-1-3><a class=lnlinks href=#hl-1-3>3</a></span><span class=cl>
</span></span><span class=line><span class=ln id=hl-1-4><a class=lnlinks href=#hl-1-4>4</a></span><span class=cl>$ python -m timeit <span class=s2>&#34;{&#39;a&#39;: &#39;value&#39;,&#39;another&#39;: &#39;value&#39;}&#34;</span>
</span></span><span class=line><span class=ln id=hl-1-5><a class=lnlinks href=#hl-1-5>5</a></span><span class=cl><span class=m>5000000</span> loops, best of 5: 51.1 nsec per loop
</span></span></code></pre></div><h3 id=c-code-from-cpython class="my-8 md:my-12 flex items-center justify-center"><hr class="w-1/12 border-neutral shrink-0 hidden md:block"><a class="font-bold text-center w-full md:w-fit mx-4 !no-underline !link-neutral" href=#c-code-from-cpython aria-label=Anchor>C code from cpython</a><hr class="w-1/12 border-neutral shrink-0 hidden md:block"></h3><h4 id=dict-type class="my-8 md:my-12 flex items-center justify-center"><hr class="w-1/12 border-neutral shrink-0 hidden md:block"><a class="font-bold text-center w-full md:w-fit mx-4 !no-underline !link-neutral" href=#dict-type aria-label=Anchor><code>dict</code> type</a><hr class="w-1/12 border-neutral shrink-0 hidden md:block"></h4><p>Python&rsquo;s <code>dict</code> type is defined inside the interpreter:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=ln id=hl-2-1><a class=lnlinks href=#hl-2-1>1</a></span><span class=cl><span class=n>PyTypeObject</span> <span class=n>PyDict_Type</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=ln id=hl-2-2><a class=lnlinks href=#hl-2-2>2</a></span><span class=cl> <span class=c1>// ...
</span></span></span><span class=line><span class=ln id=hl-2-3><a class=lnlinks href=#hl-2-3>3</a></span><span class=cl><span class=c1></span> <span class=n>dict_init</span><span class=p>,</span> <span class=cm>/* tp_init */</span>
</span></span><span class=line><span class=ln id=hl-2-4><a class=lnlinks href=#hl-2-4>4</a></span><span class=cl> <span class=n>_PyType_AllocNoTrack</span><span class=p>,</span> <span class=cm>/* tp_alloc */</span>
</span></span><span class=line><span class=ln id=hl-2-5><a class=lnlinks href=#hl-2-5>5</a></span><span class=cl> <span class=n>dict_new</span><span class=p>,</span> <span class=cm>/* tp_new */</span>
</span></span><span class=line><span class=ln id=hl-2-6><a class=lnlinks href=#hl-2-6>6</a></span><span class=cl> <span class=c1>// ...
</span></span></span><span class=line><span class=ln id=hl-2-7><a class=lnlinks href=#hl-2-7>7</a></span><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></div><p>See: <a href=https://github.com/python/cpython/blob/main/Objects/dictobject.c#L3962 class=hide-external>https://github.com/python/cpython/blob/main/Objects/dictobject.c#L3962</a></p><p>When a new dict object is created (<code>dict()</code>), it gets created by the <code>dict_new</code> function, which
internally uses set <code>tp_alloc</code> to allocate a new memory region, and then initialises with the <code>dict_init</code> function.</p><p>Most of the <code>dict_init</code> logic is contained in the <code>dict_update_common</code> function. First it gets filled
up with <em>unpacked</em> args, and then with kwargs. In both cases it uses the <code>dict_merge</code> function, which does a lot.</p><h4 id=-literal-expression class="my-8 md:my-12 flex items-center justify-center"><hr class="w-1/12 border-neutral shrink-0 hidden md:block"><a class="font-bold text-center w-full md:w-fit mx-4 !no-underline !link-neutral" href=#-literal-expression aria-label=Anchor><code>{}</code> literal expression</a><hr class="w-1/12 border-neutral shrink-0 hidden md:block"></h4><p>Python&rsquo;s <code>{}</code> literal expression gets compiled into <code>BUILD_MAP</code> opcode. The opcode is interpreted by one of the following:</p><p><a href=https://github.com/python/cpython/blob/main/Python/bytecodes.c#L1644>Python/bytecodes.c#BUILD_MAP</a>,
<a href=https://github.com/python/cpython/blob/main/Python/executor_cases.c.h#L1393>Python/executor_cases.c.h#_BUILD_MAP</a>,
<a href=https://github.com/python/cpython/blob/main/Python/generated_cases.c.h#L640>Python/generated_cases.c.h#BUILD_MAP</a></p><div class="alert alert-info text-left text-text flex flex-col items-start gap-0"><h6 class="text-info-content flex gap-1 items-center !my-0 !text-lg"><span><svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="size-4"><path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875.0 112.652 2.652L6.832 19.82a4.5 4.5.0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5.0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"/></svg></span>Note</h6><div class="collapsible-content w-full"><div class="mt-2 w-full text-base-content markdown-body"><p>The top of the <code>executor_cases.c.h</code> and <code>generated_cases.c.h</code> files says:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=ln id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a></span><span class=cl><span class=c1>// This file is generated by ...
</span></span></span><span class=line><span class=ln id=hl-0-2><a class=lnlinks href=#hl-0-2>2</a></span><span class=cl><span class=c1>// from:
</span></span></span><span class=line><span class=ln id=hl-0-3><a class=lnlinks href=#hl-0-3>3</a></span><span class=cl><span class=c1>//   Python/bytecodes.c
</span></span></span><span class=line><span class=ln id=hl-0-4><a class=lnlinks href=#hl-0-4>4</a></span><span class=cl><span class=c1>// Do not edit!
</span></span></span></code></pre></div><p>Therefore, we should really look only at the true source: <code>bytecodes.c</code>.</p></div></div></div><p>The main logic of the opcode is contained in <code>_PyDict_FromItems</code> function form the <code>dictobject.c</code> file.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=ln id=hl-3-1><a class=lnlinks href=#hl-3-1>1</a></span><span class=cl><span class=c1>// Include/internal/pycore_dict.h
</span></span></span><span class=line><span class=ln id=hl-3-2><a class=lnlinks href=#hl-3-2>2</a></span><span class=cl><span class=c1></span><span class=k>extern</span> <span class=n>PyObject</span> <span class=o>*</span><span class=nf>_PyDict_FromItems</span><span class=p>(</span>
</span></span><span class=line><span class=ln id=hl-3-3><a class=lnlinks href=#hl-3-3>3</a></span><span class=cl> <span class=n>PyObject</span> <span class=o>*</span><span class=k>const</span> <span class=o>*</span><span class=n>keys</span><span class=p>,</span> <span class=n>Py_ssize_t</span> <span class=n>keys_offset</span><span class=p>,</span>
</span></span><span class=line><span class=ln id=hl-3-4><a class=lnlinks href=#hl-3-4>4</a></span><span class=cl> <span class=n>PyObject</span> <span class=o>*</span><span class=k>const</span> <span class=o>*</span><span class=n>values</span><span class=p>,</span> <span class=n>Py_ssize_t</span> <span class=n>values_offset</span><span class=p>,</span>
</span></span><span class=line><span class=ln id=hl-3-5><a class=lnlinks href=#hl-3-5>5</a></span><span class=cl> <span class=n>Py_ssize_t</span> <span class=n>length</span><span class=p>);</span>
</span></span></code></pre></div><p>The <code>_PyDict_FromItems</code> function:</p><ul><li>checks if all keys on the stack are &ldquo;valid&rdquo; (see <code>PyUnicode_CheckExact</code> function)</li><li>constructs a pre-sized dict object (see <code>dict_new_presized</code> function),</li><li>inserts key-values one-by-one from the stack,</li><li>returns the dict object.</li></ul><h3 id=case-for-list-vs- class="my-8 md:my-12 flex items-center justify-center"><hr class="w-1/12 border-neutral shrink-0 hidden md:block"><a class="font-bold text-center w-full md:w-fit mx-4 !no-underline !link-neutral" href=#case-for-list-vs- aria-label=Anchor>Case for <code>list()</code> vs. <code>[]</code></a><hr class="w-1/12 border-neutral shrink-0 hidden md:block"></h3><p>A similar analysis can be done for Python&rsquo;s lists.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=ln id=hl-4-1><a class=lnlinks href=#hl-4-1> 1</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=kn>import</span> <span class=nn>sys</span>
</span></span><span class=line><span class=ln id=hl-4-2><a class=lnlinks href=#hl-4-2> 2</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>sys</span><span class=o>.</span><span class=n>version_info</span>
</span></span><span class=line><span class=ln id=hl-4-3><a class=lnlinks href=#hl-4-3> 3</a></span><span class=cl><span class=n>sys</span><span class=o>.</span><span class=n>version_info</span><span class=p>(</span><span class=n>major</span><span class=o>=</span><span class=mi>3</span><span class=p>,</span> <span class=n>minor</span><span class=o>=</span><span class=mi>12</span><span class=p>,</span> <span class=n>micro</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>releaselevel</span><span class=o>=</span><span class=s1>&#39;final&#39;</span><span class=p>,</span> <span class=n>serial</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=ln id=hl-4-4><a class=lnlinks href=#hl-4-4> 4</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span>
</span></span><span class=line><span class=ln id=hl-4-5><a class=lnlinks href=#hl-4-5> 5</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=k>def</span> <span class=nf>a</span><span class=p>():</span>
</span></span><span class=line><span class=ln id=hl-4-6><a class=lnlinks href=#hl-4-6> 6</a></span><span class=cl><span class=o>...</span>   <span class=k>return</span> <span class=nb>list</span><span class=p>((</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>))</span>
</span></span><span class=line><span class=ln id=hl-4-7><a class=lnlinks href=#hl-4-7> 7</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span>
</span></span><span class=line><span class=ln id=hl-4-8><a class=lnlinks href=#hl-4-8> 8</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=k>def</span> <span class=nf>b</span><span class=p>():</span>
</span></span><span class=line><span class=ln id=hl-4-9><a class=lnlinks href=#hl-4-9> 9</a></span><span class=cl><span class=o>...</span>   <span class=k>return</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>]</span>
</span></span><span class=line><span class=ln id=hl-4-10><a class=lnlinks href=#hl-4-10>10</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span>
</span></span><span class=line><span class=ln id=hl-4-11><a class=lnlinks href=#hl-4-11>11</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=kn>import</span> <span class=nn>dis</span>
</span></span><span class=line><span class=ln id=hl-4-12><a class=lnlinks href=#hl-4-12>12</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span>
</span></span><span class=line><span class=ln id=hl-4-13><a class=lnlinks href=#hl-4-13>13</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>dis</span><span class=o>.</span><span class=n>dis</span><span class=p>(</span><span class=n>a</span><span class=p>)</span>
</span></span><span class=line><span class=ln id=hl-4-14><a class=lnlinks href=#hl-4-14>14</a></span><span class=cl>  <span class=mi>1</span>           <span class=mi>0</span> <span class=n>RESUME</span>                   <span class=mi>0</span>
</span></span><span class=line><span class=ln id=hl-4-15><a class=lnlinks href=#hl-4-15>15</a></span><span class=cl>
</span></span><span class=line><span class=ln id=hl-4-16><a class=lnlinks href=#hl-4-16>16</a></span><span class=cl>  <span class=mi>2</span>           <span class=mi>2</span> <span class=n>LOAD_GLOBAL</span>              <span class=mi>1</span> <span class=p>(</span><span class=n>NULL</span> <span class=o>+</span> <span class=nb>list</span><span class=p>)</span>
</span></span><span class=line><span class=ln id=hl-4-17><a class=lnlinks href=#hl-4-17>17</a></span><span class=cl>             <span class=mi>12</span> <span class=n>LOAD_CONST</span>               <span class=mi>1</span> <span class=p>((</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>))</span>
</span></span><span class=line><span class=ln id=hl-4-18><a class=lnlinks href=#hl-4-18>18</a></span><span class=cl>             <span class=mi>14</span> <span class=n>CALL</span>                     <span class=mi>1</span>
</span></span><span class=line><span class=ln id=hl-4-19><a class=lnlinks href=#hl-4-19>19</a></span><span class=cl>             <span class=mi>22</span> <span class=n>RETURN_VALUE</span>
</span></span><span class=line><span class=ln id=hl-4-20><a class=lnlinks href=#hl-4-20>20</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>dis</span><span class=o>.</span><span class=n>dis</span><span class=p>(</span><span class=n>b</span><span class=p>)</span>
</span></span><span class=line><span class=ln id=hl-4-21><a class=lnlinks href=#hl-4-21>21</a></span><span class=cl>  <span class=mi>1</span>           <span class=mi>0</span> <span class=n>RESUME</span>                   <span class=mi>0</span>
</span></span><span class=line><span class=ln id=hl-4-22><a class=lnlinks href=#hl-4-22>22</a></span><span class=cl>
</span></span><span class=line><span class=ln id=hl-4-23><a class=lnlinks href=#hl-4-23>23</a></span><span class=cl>  <span class=mi>2</span>           <span class=mi>2</span> <span class=n>LOAD_CONST</span>               <span class=mi>1</span> <span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=ln id=hl-4-24><a class=lnlinks href=#hl-4-24>24</a></span><span class=cl>              <span class=mi>4</span> <span class=n>LOAD_CONST</span>               <span class=mi>2</span> <span class=p>(</span><span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=ln id=hl-4-25><a class=lnlinks href=#hl-4-25>25</a></span><span class=cl>              <span class=mi>6</span> <span class=n>BUILD_LIST</span>               <span class=mi>2</span>
</span></span><span class=line><span class=ln id=hl-4-26><a class=lnlinks href=#hl-4-26>26</a></span><span class=cl>              <span class=mi>8</span> <span class=n>RETURN_VALUE</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=ln id=hl-5-1><a class=lnlinks href=#hl-5-1>1</a></span><span class=cl>$ python -m timeit <span class=s2>&#34;list((1, 2, &#39;a&#39;))&#34;</span>
</span></span><span class=line><span class=ln id=hl-5-2><a class=lnlinks href=#hl-5-2>2</a></span><span class=cl><span class=m>5000000</span> loops, best of 5: <span class=m>53</span> nsec per loop
</span></span><span class=line><span class=ln id=hl-5-3><a class=lnlinks href=#hl-5-3>3</a></span><span class=cl>$ python -m timeit <span class=s2>&#34;[(1, 2, &#39;a&#39;)]&#34;</span>
</span></span><span class=line><span class=ln id=hl-5-4><a class=lnlinks href=#hl-5-4>4</a></span><span class=cl><span class=m>10000000</span> loops, best of 5: 30.4 nsec per loop
</span></span></code></pre></div><h4 id=list-type class="my-8 md:my-12 flex items-center justify-center"><hr class="w-1/12 border-neutral shrink-0 hidden md:block"><a class="font-bold text-center w-full md:w-fit mx-4 !no-underline !link-neutral" href=#list-type aria-label=Anchor><code>list</code> type</a><hr class="w-1/12 border-neutral shrink-0 hidden md:block"></h4><p>The Python&rsquo;s <code>list</code> type is defined in the <code>listobject.c</code> file:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=ln id=hl-6-1><a class=lnlinks href=#hl-6-1>1</a></span><span class=cl><span class=n>PyTypeObject</span> <span class=n>PyList_Type</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=ln id=hl-6-2><a class=lnlinks href=#hl-6-2>2</a></span><span class=cl> <span class=c1>// ...
</span></span></span><span class=line><span class=ln id=hl-6-3><a class=lnlinks href=#hl-6-3>3</a></span><span class=cl><span class=c1></span> <span class=p>(</span><span class=n>initproc</span><span class=p>)</span><span class=n>list___init__</span><span class=p>,</span> <span class=cm>/* tp_init */</span>
</span></span><span class=line><span class=ln id=hl-6-4><a class=lnlinks href=#hl-6-4>4</a></span><span class=cl> <span class=n>PyType_GenericAlloc</span><span class=p>,</span> <span class=cm>/* tp_alloc */</span>
</span></span><span class=line><span class=ln id=hl-6-5><a class=lnlinks href=#hl-6-5>5</a></span><span class=cl> <span class=n>PyType_GenericNew</span><span class=p>,</span> <span class=cm>/* tp_new */</span>
</span></span><span class=line><span class=ln id=hl-6-6><a class=lnlinks href=#hl-6-6>6</a></span><span class=cl> <span class=c1>// ...
</span></span></span><span class=line><span class=ln id=hl-6-7><a class=lnlinks href=#hl-6-7>7</a></span><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></div><p><code>PyType_GenericNew</code> does nothing &ndash; it ignores <code>args</code> and <code>kwargs</code>, and return an object allocated by <code>type->typ_alloc</code>.
Source: <a href=https://github.com/python/cpython/blob/main/Objects/typeobject.c#L1768 class=hide-external>https://github.com/python/cpython/blob/main/Objects/typeobject.c#L1768</a></p><p><code>PyType_GenericAlloc</code> allocated a new object and (if it&rsquo;s garbage-collectable) marks it as &ldquo;to-be-collected&rdquo;.</p><p><code>list___init__</code> is a convenience wrapper around the <code>list___init___impl</code> function, which does the
actual initialisation. It does some basic pre-steps:</p><ul><li>fails if any <code>kwarg</code> has been passed,</li><li>fails if <code>args</code> has more then 1 element,</li><li>converts the first argument of <code>args</code> to an iterable.</li></ul><p><code>list___init___impl</code> clears the list (if not empty) and extends it by the provided iterable
(by calling the <code>list_extend</code> function).</p><div class="alert alert-tip text-left text-text flex flex-col items-start gap-0"><h6 class="text-tip-content flex gap-1 items-center !my-0 !text-lg"><span><svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="size-6"><path stroke-linecap="round" stroke-linejoin="round" d="M15.362 5.214A8.252 8.252.0 0112 21 8.25 8.25.0 016.038 7.047 8.287 8.287.0 009 9.601a8.983 8.983.0 013.361-6.867 8.21 8.21.0 003 2.48z"/><path stroke-linecap="round" stroke-linejoin="round" d="M12 18a3.75 3.75.0 00.495-7.468 5.99 5.99.0 00-1.925 3.547 5.975 5.975.0 01-2.133-1.001A3.75 3.75.0 0012 18z"/></svg></span>Question</h6><div class="collapsible-content w-full"><div class="mt-2 w-full text-base-content markdown-body"><p>I <em>think</em> the two:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=ln id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a></span><span class=cl><span class=nb>list</span><span class=p>((</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>))</span>
</span></span><span class=line><span class=ln id=hl-0-2><a class=lnlinks href=#hl-0-2>2</a></span><span class=cl>
</span></span><span class=line><span class=ln id=hl-0-3><a class=lnlinks href=#hl-0-3>3</a></span><span class=cl><span class=n>_tmp</span> <span class=o>=</span> <span class=nb>list</span><span class=p>()</span>
</span></span><span class=line><span class=ln id=hl-0-4><a class=lnlinks href=#hl-0-4>4</a></span><span class=cl><span class=n>_tmp</span><span class=o>.</span><span class=n>extend</span><span class=p>((</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>))</span>
</span></span></code></pre></div><p>are equivalent in every way (but the generated opcodes sequence) and are calling the same underlying C code.</p></div></div></div><h4 id=-literal-expression-1 class="my-8 md:my-12 flex items-center justify-center"><hr class="w-1/12 border-neutral shrink-0 hidden md:block"><a class="font-bold text-center w-full md:w-fit mx-4 !no-underline !link-neutral" href=#-literal-expression-1 aria-label=Anchor><code>[]</code> literal expression</a><hr class="w-1/12 border-neutral shrink-0 hidden md:block"></h4><p>Opcode <code>BUILD_LIST</code> uses the <code>_PyList_FromArraySteal</code> function to construct a list object and return it.</p><div class="alert alert-info text-left text-text flex flex-col items-start gap-0"><h6 class="text-info-content flex gap-1 items-center !my-0 !text-lg"><span><svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="size-4"><path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875.0 112.652 2.652L6.832 19.82a4.5 4.5.0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5.0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"/></svg></span>Note</h6><div class="collapsible-content w-full"><div class="mt-2 w-full text-base-content markdown-body"><p><code>_PyList_FromArraySteal</code> is used since 3.12. See
<a href=https://docs.python.org/3.12/whatsnew/changelog.html>3.12 changelog</a> and
<a href=https://github.com/python/cpython/pull/100147>gh-100146</a>. Before 3.12, the opcode was
repeatedly calling <code>POP()</code> to get items from the stack, and then inserting them into the list.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=ln id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a></span><span class=cl><span class=k>while</span> <span class=p>(</span><span class=o>--</span><span class=n>oparg</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln id=hl-0-2><a class=lnlinks href=#hl-0-2>2</a></span><span class=cl>    <span class=n>PyObject</span> <span class=o>*</span><span class=n>item</span> <span class=o>=</span> <span class=nf>POP</span><span class=p>();</span>
</span></span><span class=line><span class=ln id=hl-0-3><a class=lnlinks href=#hl-0-3>3</a></span><span class=cl>    <span class=nf>PyList_SET_ITEM</span><span class=p>(</span><span class=n>list</span><span class=p>,</span> <span class=n>oparg</span><span class=p>,</span> <span class=n>item</span><span class=p>);</span>
</span></span><span class=line><span class=ln id=hl-0-4><a class=lnlinks href=#hl-0-4>4</a></span><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>See <a href=https://github.com/python/cpython/pull/100147/files#diff-729a985b0cb8b431cb291f1edb561bbbfea22e3f8c262451cd83328a0936a342L1447-L1450>change in gh-100146 PR</a>.</p></div></div></div><p>The <code>_PyList_FromArraySteal</code> helper creates an empty list (if there are no items), or preallocates
the list before inserting items to it.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=ln id=hl-7-1><a class=lnlinks href=#hl-7-1>1</a></span><span class=cl><span class=n>PyObject</span> <span class=o>**</span><span class=n>dst</span> <span class=o>=</span> <span class=n>list</span><span class=o>-&gt;</span><span class=n>ob_item</span><span class=p>;</span>
</span></span><span class=line><span class=ln id=hl-7-2><a class=lnlinks href=#hl-7-2>2</a></span><span class=cl><span class=nf>memcpy</span><span class=p>(</span><span class=n>dst</span><span class=p>,</span> <span class=n>src</span><span class=p>,</span> <span class=n>n</span> <span class=o>*</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>PyObject</span> <span class=o>*</span><span class=p>));</span>
</span></span></code></pre></div><h3 id=case-of-set1-2-vs-1-2 class="my-8 md:my-12 flex items-center justify-center"><hr class="w-1/12 border-neutral shrink-0 hidden md:block"><a class="font-bold text-center w-full md:w-fit mx-4 !no-underline !link-neutral" href=#case-of-set1-2-vs-1-2 aria-label=Anchor>Case of <code>set((1, 2))</code> vs. <code>{1, 2}</code></a><hr class="w-1/12 border-neutral shrink-0 hidden md:block"></h3><p>&mldr; and similar analysis can be done for sets.</p><div class="alert alert-warning text-left text-text flex flex-col items-start gap-0"><h6 class="text-warning-content flex gap-1 items-center !my-0 !text-lg"><span><svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="size-6"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73.0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898.0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"/></svg></span>Warning</h6><div class="collapsible-content w-full"><div class="mt-2 w-full text-base-content markdown-body">AFAIK there&rsquo;s no way to construct a new set with a literal expression, hence the following analysis is
performed for sets with two elements: <code>1</code> and <code>2</code>.</div></div></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=ln id=hl-8-1><a class=lnlinks href=#hl-8-1>1</a></span><span class=cl>$ python -m timeit <span class=s2>&#34;set((1, 2))&#34;</span>
</span></span><span class=line><span class=ln id=hl-8-2><a class=lnlinks href=#hl-8-2>2</a></span><span class=cl><span class=m>5000000</span> loops, best of 5: 82.6 nsec per loop
</span></span><span class=line><span class=ln id=hl-8-3><a class=lnlinks href=#hl-8-3>3</a></span><span class=cl>$ python -m timeit <span class=s2>&#34;{1, 2}&#34;</span>
</span></span><span class=line><span class=ln id=hl-8-4><a class=lnlinks href=#hl-8-4>4</a></span><span class=cl><span class=m>5000000</span> loops, best of 5: 45.5 nsec per loop
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=ln id=hl-9-1><a class=lnlinks href=#hl-9-1> 1</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=kn>import</span> <span class=nn>sys</span>
</span></span><span class=line><span class=ln id=hl-9-2><a class=lnlinks href=#hl-9-2> 2</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>sys</span><span class=o>.</span><span class=n>version_info</span>
</span></span><span class=line><span class=ln id=hl-9-3><a class=lnlinks href=#hl-9-3> 3</a></span><span class=cl><span class=n>sys</span><span class=o>.</span><span class=n>version_info</span><span class=p>(</span><span class=n>major</span><span class=o>=</span><span class=mi>3</span><span class=p>,</span> <span class=n>minor</span><span class=o>=</span><span class=mi>12</span><span class=p>,</span> <span class=n>micro</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>releaselevel</span><span class=o>=</span><span class=s1>&#39;final&#39;</span><span class=p>,</span> <span class=n>serial</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=ln id=hl-9-4><a class=lnlinks href=#hl-9-4> 4</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span>
</span></span><span class=line><span class=ln id=hl-9-5><a class=lnlinks href=#hl-9-5> 5</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=k>def</span> <span class=nf>a</span><span class=p>():</span>
</span></span><span class=line><span class=ln id=hl-9-6><a class=lnlinks href=#hl-9-6> 6</a></span><span class=cl><span class=o>...</span>   <span class=k>return</span> <span class=nb>set</span><span class=p>((</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>))</span>
</span></span><span class=line><span class=ln id=hl-9-7><a class=lnlinks href=#hl-9-7> 7</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span>
</span></span><span class=line><span class=ln id=hl-9-8><a class=lnlinks href=#hl-9-8> 8</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=k>def</span> <span class=nf>b</span><span class=p>():</span>
</span></span><span class=line><span class=ln id=hl-9-9><a class=lnlinks href=#hl-9-9> 9</a></span><span class=cl><span class=o>...</span>   <span class=k>return</span> <span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>}</span>
</span></span><span class=line><span class=ln id=hl-9-10><a class=lnlinks href=#hl-9-10>10</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span>
</span></span><span class=line><span class=ln id=hl-9-11><a class=lnlinks href=#hl-9-11>11</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=kn>import</span> <span class=nn>dis</span>
</span></span><span class=line><span class=ln id=hl-9-12><a class=lnlinks href=#hl-9-12>12</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span>
</span></span><span class=line><span class=ln id=hl-9-13><a class=lnlinks href=#hl-9-13>13</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>dis</span><span class=o>.</span><span class=n>dis</span><span class=p>(</span><span class=n>a</span><span class=p>)</span>
</span></span><span class=line><span class=ln id=hl-9-14><a class=lnlinks href=#hl-9-14>14</a></span><span class=cl>  <span class=mi>1</span>           <span class=mi>0</span> <span class=n>RESUME</span>                   <span class=mi>0</span>
</span></span><span class=line><span class=ln id=hl-9-15><a class=lnlinks href=#hl-9-15>15</a></span><span class=cl>
</span></span><span class=line><span class=ln id=hl-9-16><a class=lnlinks href=#hl-9-16>16</a></span><span class=cl>  <span class=mi>2</span>           <span class=mi>2</span> <span class=n>LOAD_GLOBAL</span>              <span class=mi>1</span> <span class=p>(</span><span class=n>NULL</span> <span class=o>+</span> <span class=nb>set</span><span class=p>)</span>
</span></span><span class=line><span class=ln id=hl-9-17><a class=lnlinks href=#hl-9-17>17</a></span><span class=cl>             <span class=mi>12</span> <span class=n>LOAD_CONST</span>               <span class=mi>1</span> <span class=p>((</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>))</span>
</span></span><span class=line><span class=ln id=hl-9-18><a class=lnlinks href=#hl-9-18>18</a></span><span class=cl>             <span class=mi>14</span> <span class=n>CALL</span>                     <span class=mi>1</span>
</span></span><span class=line><span class=ln id=hl-9-19><a class=lnlinks href=#hl-9-19>19</a></span><span class=cl>             <span class=mi>22</span> <span class=n>RETURN_VALUE</span>
</span></span><span class=line><span class=ln id=hl-9-20><a class=lnlinks href=#hl-9-20>20</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>dis</span><span class=o>.</span><span class=n>dis</span><span class=p>(</span><span class=n>b</span><span class=p>)</span>
</span></span><span class=line><span class=ln id=hl-9-21><a class=lnlinks href=#hl-9-21>21</a></span><span class=cl>  <span class=mi>1</span>           <span class=mi>0</span> <span class=n>RESUME</span>                   <span class=mi>0</span>
</span></span><span class=line><span class=ln id=hl-9-22><a class=lnlinks href=#hl-9-22>22</a></span><span class=cl>
</span></span><span class=line><span class=ln id=hl-9-23><a class=lnlinks href=#hl-9-23>23</a></span><span class=cl>  <span class=mi>2</span>           <span class=mi>2</span> <span class=n>LOAD_CONST</span>               <span class=mi>1</span> <span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=ln id=hl-9-24><a class=lnlinks href=#hl-9-24>24</a></span><span class=cl>              <span class=mi>4</span> <span class=n>LOAD_CONST</span>               <span class=mi>2</span> <span class=p>(</span><span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=ln id=hl-9-25><a class=lnlinks href=#hl-9-25>25</a></span><span class=cl>              <span class=mi>6</span> <span class=n>BUILD_SET</span>                <span class=mi>2</span>
</span></span><span class=line><span class=ln id=hl-9-26><a class=lnlinks href=#hl-9-26>26</a></span><span class=cl>              <span class=mi>8</span> <span class=n>RETURN_VALUE</span>
</span></span></code></pre></div><h4 id=set-type class="my-8 md:my-12 flex items-center justify-center"><hr class="w-1/12 border-neutral shrink-0 hidden md:block"><a class="font-bold text-center w-full md:w-fit mx-4 !no-underline !link-neutral" href=#set-type aria-label=Anchor><code>set</code> type</a><hr class="w-1/12 border-neutral shrink-0 hidden md:block"></h4><p>The Python&rsquo;s <code>set</code> type is defined in the <code>setobject.c</code> file:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=ln id=hl-10-1><a class=lnlinks href=#hl-10-1>1</a></span><span class=cl><span class=n>PyTypeObject</span> <span class=n>PySet_Type</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=ln id=hl-10-2><a class=lnlinks href=#hl-10-2>2</a></span><span class=cl> <span class=c1>// ...
</span></span></span><span class=line><span class=ln id=hl-10-3><a class=lnlinks href=#hl-10-3>3</a></span><span class=cl><span class=c1></span> <span class=p>(</span><span class=n>initproc</span><span class=p>)</span><span class=n>set_init</span><span class=p>,</span> <span class=cm>/* tp_init */</span>
</span></span><span class=line><span class=ln id=hl-10-4><a class=lnlinks href=#hl-10-4>4</a></span><span class=cl> <span class=n>PyType_GenericAlloc</span><span class=p>,</span> <span class=cm>/* tp_alloc */</span>
</span></span><span class=line><span class=ln id=hl-10-5><a class=lnlinks href=#hl-10-5>5</a></span><span class=cl> <span class=n>set_new</span><span class=p>,</span> <span class=cm>/* tp_new */</span>
</span></span><span class=line><span class=ln id=hl-10-6><a class=lnlinks href=#hl-10-6>6</a></span><span class=cl> <span class=c1>// ...
</span></span></span><span class=line><span class=ln id=hl-10-7><a class=lnlinks href=#hl-10-7>7</a></span><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></div><p><code>set_new</code> uses the allocated to create a new empty set object. Internally it calls the <code>make_new_set</code> function.</p><p><code>set_init</code> performs some pre-steps:</p><ul><li>fails if any <code>kwarg</code> has been passed,</li><li>fails if <code>args</code> has more then 1 element,</li><li>converts the first argument of <code>args</code> to an iterable,</li><li>if the set object has already been filled, then it clears it</li></ul><p>&mldr; and calls the <code>set_update_internal</code> function, to insert values into the set object.</p><h4 id=1-2-literal-expression class="my-8 md:my-12 flex items-center justify-center"><hr class="w-1/12 border-neutral shrink-0 hidden md:block"><a class="font-bold text-center w-full md:w-fit mx-4 !no-underline !link-neutral" href=#1-2-literal-expression aria-label=Anchor><code>{1, 2}</code> literal expression</a><hr class="w-1/12 border-neutral shrink-0 hidden md:block"></h4><p>The opcode handler has no dedicated helpers. It constructs a new set (empty), and then iterates over all
items from the stack and insets them one-by-one.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=ln id=hl-11-1><a class=lnlinks href=#hl-11-1> 1</a></span><span class=cl><span class=nf>inst</span><span class=p>(</span><span class=n>BUILD_SET</span><span class=p>,</span> <span class=p>(</span><span class=n>values</span><span class=p>[</span><span class=n>oparg</span><span class=p>]</span> <span class=o>--</span> <span class=n>set</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=ln id=hl-11-2><a class=lnlinks href=#hl-11-2> 2</a></span><span class=cl> <span class=n>set</span> <span class=o>=</span> <span class=nf>PySet_New</span><span class=p>(</span><span class=nb>NULL</span><span class=p>);</span>
</span></span><span class=line><span class=ln id=hl-11-3><a class=lnlinks href=#hl-11-3> 3</a></span><span class=cl> <span class=k>if</span> <span class=p>(</span><span class=n>set</span> <span class=o>==</span> <span class=nb>NULL</span><span class=p>)</span>
</span></span><span class=line><span class=ln id=hl-11-4><a class=lnlinks href=#hl-11-4> 4</a></span><span class=cl>  <span class=nf>GOTO_ERROR</span><span class=p>(</span><span class=n>error</span><span class=p>);</span>
</span></span><span class=line><span class=ln id=hl-11-5><a class=lnlinks href=#hl-11-5> 5</a></span><span class=cl> <span class=kt>int</span> <span class=n>err</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=ln id=hl-11-6><a class=lnlinks href=#hl-11-6> 6</a></span><span class=cl> <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>oparg</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln id=hl-11-7><a class=lnlinks href=#hl-11-7> 7</a></span><span class=cl>  <span class=n>PyObject</span> <span class=o>*</span><span class=n>item</span> <span class=o>=</span> <span class=n>values</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span></span><span class=line><span class=ln id=hl-11-8><a class=lnlinks href=#hl-11-8> 8</a></span><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=n>err</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=ln id=hl-11-9><a class=lnlinks href=#hl-11-9> 9</a></span><span class=cl>   <span class=n>err</span> <span class=o>=</span> <span class=nf>PySet_Add</span><span class=p>(</span><span class=n>set</span><span class=p>,</span> <span class=n>item</span><span class=p>);</span>
</span></span><span class=line><span class=ln id=hl-11-10><a class=lnlinks href=#hl-11-10>10</a></span><span class=cl>  <span class=nf>Py_DECREF</span><span class=p>(</span><span class=n>item</span><span class=p>);</span>
</span></span><span class=line><span class=ln id=hl-11-11><a class=lnlinks href=#hl-11-11>11</a></span><span class=cl> <span class=p>}</span>
</span></span><span class=line><span class=ln id=hl-11-12><a class=lnlinks href=#hl-11-12>12</a></span><span class=cl> <span class=k>if</span> <span class=p>(</span><span class=n>err</span> <span class=o>!=</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln id=hl-11-13><a class=lnlinks href=#hl-11-13>13</a></span><span class=cl>  <span class=nf>Py_DECREF</span><span class=p>(</span><span class=n>set</span><span class=p>);</span>
</span></span><span class=line><span class=ln id=hl-11-14><a class=lnlinks href=#hl-11-14>14</a></span><span class=cl>  <span class=nf>ERROR_IF</span><span class=p>(</span><span class=nb>true</span><span class=p>,</span> <span class=n>error</span><span class=p>);</span>
</span></span><span class=line><span class=ln id=hl-11-15><a class=lnlinks href=#hl-11-15>15</a></span><span class=cl> <span class=p>}</span>
</span></span><span class=line><span class=ln id=hl-11-16><a class=lnlinks href=#hl-11-16>16</a></span><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Source: <a href=https://github.com/python/cpython/blob/main/Python/bytecodes.c#L1627 class=hide-external>https://github.com/python/cpython/blob/main/Python/bytecodes.c#L1627</a></p><div class="alert alert-warning text-left text-text flex flex-col items-start gap-0"><h6 class="text-warning-content flex gap-1 items-center !my-0 !text-lg"><span><svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="size-6"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73.0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898.0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"/></svg></span>Warning</h6><div class="collapsible-content w-full"><div class="mt-2 w-full text-base-content markdown-body"><p>The generated bytecode is different if we add another argument to the literal expression: <code>{1, 2, 3}</code>.
Then it becomes:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=ln id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a></span><span class=cl>   <span class=mi>2</span> <span class=n>BUILD_SET</span>                <span class=mi>0</span>
</span></span><span class=line><span class=ln id=hl-0-2><a class=lnlinks href=#hl-0-2>2</a></span><span class=cl>   <span class=mi>4</span> <span class=n>LOAD_CONST</span>               <span class=mi>1</span> <span class=p>(</span><span class=nb>frozenset</span><span class=p>({</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>}))</span>
</span></span><span class=line><span class=ln id=hl-0-3><a class=lnlinks href=#hl-0-3>3</a></span><span class=cl>   <span class=mi>6</span> <span class=n>SET_UPDATE</span>               <span class=mi>1</span>
</span></span><span class=line><span class=ln id=hl-0-4><a class=lnlinks href=#hl-0-4>4</a></span><span class=cl>   <span class=mi>8</span> <span class=n>RETURN_VALUE</span>
</span></span></code></pre></div></div></div></div><h3 id=case-of-tuple1-2--vs--1-2- class="my-8 md:my-12 flex items-center justify-center"><hr class="w-1/12 border-neutral shrink-0 hidden md:block"><a class="font-bold text-center w-full md:w-fit mx-4 !no-underline !link-neutral" href=#case-of-tuple1-2--vs--1-2- aria-label=Anchor>Case of <code>tuple((1, 2, [])</code> vs. <code>(1, 2, [])</code></a><hr class="w-1/12 border-neutral shrink-0 hidden md:block"></h3><p>This one&rsquo;s tricky. Constructing a tuple with the <code>tuple</code> type requires an iterable. The easiest way of
getting one it to create a tuple literal, which is obviously less efficient, than using a tuple literal
syntax in the first place.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=ln id=hl-12-1><a class=lnlinks href=#hl-12-1> 1</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=kn>import</span> <span class=nn>sys</span>
</span></span><span class=line><span class=ln id=hl-12-2><a class=lnlinks href=#hl-12-2> 2</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>sys</span><span class=o>.</span><span class=n>version_info</span>
</span></span><span class=line><span class=ln id=hl-12-3><a class=lnlinks href=#hl-12-3> 3</a></span><span class=cl><span class=n>sys</span><span class=o>.</span><span class=n>version_info</span><span class=p>(</span><span class=n>major</span><span class=o>=</span><span class=mi>3</span><span class=p>,</span> <span class=n>minor</span><span class=o>=</span><span class=mi>12</span><span class=p>,</span> <span class=n>micro</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>releaselevel</span><span class=o>=</span><span class=s1>&#39;final&#39;</span><span class=p>,</span> <span class=n>serial</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=ln id=hl-12-4><a class=lnlinks href=#hl-12-4> 4</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span>
</span></span><span class=line><span class=ln id=hl-12-5><a class=lnlinks href=#hl-12-5> 5</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=k>def</span> <span class=nf>a</span><span class=p>():</span>
</span></span><span class=line><span class=ln id=hl-12-6><a class=lnlinks href=#hl-12-6> 6</a></span><span class=cl><span class=o>...</span>   <span class=k>return</span> <span class=nb>tuple</span><span class=p>((</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=p>[]))</span>
</span></span><span class=line><span class=ln id=hl-12-7><a class=lnlinks href=#hl-12-7> 7</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span>
</span></span><span class=line><span class=ln id=hl-12-8><a class=lnlinks href=#hl-12-8> 8</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=k>def</span> <span class=nf>b</span><span class=p>():</span>
</span></span><span class=line><span class=ln id=hl-12-9><a class=lnlinks href=#hl-12-9> 9</a></span><span class=cl><span class=o>...</span>   <span class=k>return</span> <span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=p>[])</span>
</span></span><span class=line><span class=ln id=hl-12-10><a class=lnlinks href=#hl-12-10>10</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span>
</span></span><span class=line><span class=ln id=hl-12-11><a class=lnlinks href=#hl-12-11>11</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=kn>import</span> <span class=nn>dis</span>
</span></span><span class=line><span class=ln id=hl-12-12><a class=lnlinks href=#hl-12-12>12</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span>
</span></span><span class=line><span class=ln id=hl-12-13><a class=lnlinks href=#hl-12-13>13</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>dis</span><span class=o>.</span><span class=n>dis</span><span class=p>(</span><span class=n>a</span><span class=p>)</span>
</span></span><span class=line><span class=ln id=hl-12-14><a class=lnlinks href=#hl-12-14>14</a></span><span class=cl>  <span class=mi>1</span>           <span class=mi>0</span> <span class=n>RESUME</span>                   <span class=mi>0</span>
</span></span><span class=line><span class=ln id=hl-12-15><a class=lnlinks href=#hl-12-15>15</a></span><span class=cl>
</span></span><span class=line><span class=ln id=hl-12-16><a class=lnlinks href=#hl-12-16>16</a></span><span class=cl>  <span class=mi>2</span>           <span class=mi>2</span> <span class=n>LOAD_GLOBAL</span>              <span class=mi>1</span> <span class=p>(</span><span class=n>NULL</span> <span class=o>+</span> <span class=nb>tuple</span><span class=p>)</span>
</span></span><span class=line><span class=ln id=hl-12-17><a class=lnlinks href=#hl-12-17>17</a></span><span class=cl>             <span class=mi>12</span> <span class=n>LOAD_CONST</span>               <span class=mi>1</span> <span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=ln id=hl-12-18><a class=lnlinks href=#hl-12-18>18</a></span><span class=cl>             <span class=mi>14</span> <span class=n>LOAD_CONST</span>               <span class=mi>2</span> <span class=p>(</span><span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=ln id=hl-12-19><a class=lnlinks href=#hl-12-19>19</a></span><span class=cl>             <span class=mi>16</span> <span class=n>BUILD_LIST</span>               <span class=mi>0</span>
</span></span><span class=line><span class=ln id=hl-12-20><a class=lnlinks href=#hl-12-20>20</a></span><span class=cl>             <span class=mi>18</span> <span class=n>BUILD_TUPLE</span>              <span class=mi>3</span>
</span></span><span class=line><span class=ln id=hl-12-21><a class=lnlinks href=#hl-12-21>21</a></span><span class=cl>             <span class=mi>20</span> <span class=n>CALL</span>                     <span class=mi>1</span>
</span></span><span class=line><span class=ln id=hl-12-22><a class=lnlinks href=#hl-12-22>22</a></span><span class=cl>             <span class=mi>28</span> <span class=n>RETURN_VALUE</span>
</span></span><span class=line><span class=ln id=hl-12-23><a class=lnlinks href=#hl-12-23>23</a></span><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>dis</span><span class=o>.</span><span class=n>dis</span><span class=p>(</span><span class=n>b</span><span class=p>)</span>
</span></span><span class=line><span class=ln id=hl-12-24><a class=lnlinks href=#hl-12-24>24</a></span><span class=cl>  <span class=mi>1</span>           <span class=mi>0</span> <span class=n>RESUME</span>                   <span class=mi>0</span>
</span></span><span class=line><span class=ln id=hl-12-25><a class=lnlinks href=#hl-12-25>25</a></span><span class=cl>
</span></span><span class=line><span class=ln id=hl-12-26><a class=lnlinks href=#hl-12-26>26</a></span><span class=cl>  <span class=mi>2</span>           <span class=mi>2</span> <span class=n>LOAD_CONST</span>               <span class=mi>1</span> <span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=ln id=hl-12-27><a class=lnlinks href=#hl-12-27>27</a></span><span class=cl>              <span class=mi>4</span> <span class=n>LOAD_CONST</span>               <span class=mi>2</span> <span class=p>(</span><span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=ln id=hl-12-28><a class=lnlinks href=#hl-12-28>28</a></span><span class=cl>              <span class=mi>6</span> <span class=n>BUILD_LIST</span>               <span class=mi>0</span>
</span></span><span class=line><span class=ln id=hl-12-29><a class=lnlinks href=#hl-12-29>29</a></span><span class=cl>              <span class=mi>8</span> <span class=n>BUILD_TUPLE</span>              <span class=mi>3</span>
</span></span><span class=line><span class=ln id=hl-12-30><a class=lnlinks href=#hl-12-30>30</a></span><span class=cl>             <span class=mi>10</span> <span class=n>RETURN_VALUE</span>
</span></span></code></pre></div><p>It might not make much sense to include this example in the article.</p><h4 id=tuple-type class="my-8 md:my-12 flex items-center justify-center"><hr class="w-1/12 border-neutral shrink-0 hidden md:block"><a class="font-bold text-center w-full md:w-fit mx-4 !no-underline !link-neutral" href=#tuple-type aria-label=Anchor><code>tuple</code> type</a><hr class="w-1/12 border-neutral shrink-0 hidden md:block"></h4><p>The Python&rsquo;s <code>tuple</code> type is defined in <code>tupleobject.c</code>. Interestingly, it has no <code>tp_alloc</code>, nor <code>tp_init</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=ln id=hl-13-1><a class=lnlinks href=#hl-13-1>1</a></span><span class=cl><span class=n>PyTypeObject</span> <span class=n>PyTuple_Type</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=ln id=hl-13-2><a class=lnlinks href=#hl-13-2>2</a></span><span class=cl> <span class=c1>// ...
</span></span></span><span class=line><span class=ln id=hl-13-3><a class=lnlinks href=#hl-13-3>3</a></span><span class=cl><span class=c1></span> <span class=mi>0</span><span class=p>,</span> <span class=cm>/* tp_init */</span>
</span></span><span class=line><span class=ln id=hl-13-4><a class=lnlinks href=#hl-13-4>4</a></span><span class=cl> <span class=mi>0</span><span class=p>,</span> <span class=cm>/* tp_alloc */</span>
</span></span><span class=line><span class=ln id=hl-13-5><a class=lnlinks href=#hl-13-5>5</a></span><span class=cl> <span class=n>tuple_new</span><span class=p>,</span> <span class=cm>/* tp_new */</span>
</span></span><span class=line><span class=ln id=hl-13-6><a class=lnlinks href=#hl-13-6>6</a></span><span class=cl> <span class=c1>// ...
</span></span></span><span class=line><span class=ln id=hl-13-7><a class=lnlinks href=#hl-13-7>7</a></span><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></div><p>The <code>tuple_new</code> function is responsible for allocating a new tuple object, with the items passed as a parameter.</p><h3 id=questions class="my-8 md:my-12 flex items-center justify-center"><hr class="w-1/12 border-neutral shrink-0 hidden md:block"><a class="font-bold text-center w-full md:w-fit mx-4 !no-underline !link-neutral" href=#questions aria-label=Anchor>Questions</a><hr class="w-1/12 border-neutral shrink-0 hidden md:block"></h3><ul><li>Format used by <code>dis.dis</code>.
See: <a href=https://stackoverflow.com/a/47529318/5925013>SO answer explaining columns of <code>dis.dis</code> output</a>.</li><li>What does each of the bytecodes do:<ul><li><code>RESUME</code>
A no-op. Performing internal tracing and debugging.
See: <a href=https://docs.python.org/3/library/dis.html#opcode-RESUME class=hide-external>https://docs.python.org/3/library/dis.html#opcode-RESUME</a>,</li><li><code>LOAD_GLOBAL</code>
<strong>Args:</strong> namei
Loads global named <code>co_named[namei>>1]</code> onto the stack.
See: <a href=https://docs.python.org/3/library/dis.html#opcode-LOAD_GLOBAL class=hide-external>https://docs.python.org/3/library/dis.html#opcode-LOAD_GLOBAL</a>,</li><li><code>PRECALL</code> <strong>(deprecated)</strong>
Prefixes <code>CALL</code>.
It&rsquo;s a no-op.
<a href=(https://docs.python.org/3.11/whatsnew/3.11.html#replaced-opcodes)>Added in Python 3.11</a>. <a href=https://github.com/python/cpython/pull/92925>Removed in Python 3.12</a>.
See <a href=https://docs.python.org/3.11/library/dis.html#opcode-PRECALL class=hide-external>https://docs.python.org/3.11/library/dis.html#opcode-PRECALL</a>,</li><li><code>CALL</code>
<strong>Args:</strong> argc
Calls a callable object with the number of arguments specified by <code>argc</code>. Arguments are stored on the
stack (in ascending order):<ul><li>to call a function:<ul><li><code>NULL</code>,</li><li>The callable,</li><li>The positional arguments,</li><li>The named arguments,</li></ul></li><li>to call a method:<ul><li>The callable,</li><li><code>self</code>,</li><li>The remaining positional arguments,</li><li>The named arguments,
See: <a href=https://docs.python.org/3/library/dis.html#opcode-CALL class=hide-external>https://docs.python.org/3/library/dis.html#opcode-CALL</a>,</li></ul></li></ul></li><li><code>RETURN_VALUE</code>
Returns with <code>STACK[-1]</code> to the caller function.
See: <a href=https://docs.python.org/3/library/dis.html#opcode-RETURN_VALUE class=hide-external>https://docs.python.org/3/library/dis.html#opcode-RETURN_VALUE</a>,</li><li><code>BUILD_MAP</code>
<strong>Args:</strong> count
Pushes a new dictionary object onto the stack. Pops <code>2 * count</code> items, so that the dictionary holds <code>count</code> entries.
See: <a href=https://docs.python.org/3/library/dis.html#opcode-BUILD_MAP class=hide-external>https://docs.python.org/3/library/dis.html#opcode-BUILD_MAP</a>.</li></ul></li></ul><h3 id=references class="my-8 md:my-12 flex items-center justify-center"><hr class="w-1/12 border-neutral shrink-0 hidden md:block"><a class="font-bold text-center w-full md:w-fit mx-4 !no-underline !link-neutral" href=#references aria-label=Anchor>References</a><hr class="w-1/12 border-neutral shrink-0 hidden md:block"></h3><ul><li><a href=https://docs.python.org/3/library/dis.html#python-bytecode-instructions>Python Bytecode Instructions @ 3.12</a></li><li><a href=https://docs.python.org/3.11/library/dis.html#python-bytecode-instructions>Python Bytecode Instructions @ 3.11</a></li><li><a href=https://pl.python.org/docs/lib/bytecodes.html>Bytecode list (for some reason in Polish)</a></li><li>Another article on the subject: <a href=https://doughellmann.com/posts/the-performance-impact-of-using-dict-instead-of-in-cpython-2-7-2/ class=hide-external>https://doughellmann.com/posts/the-performance-impact-of-using-dict-instead-of-in-cpython-2-7-2/</a></li><li>Article on Python&rsquo;s set literals: <a href=https://renzolucioni.com/pythons-set-literals/ class=hide-external>https://renzolucioni.com/pythons-set-literals/</a></li></ul></main><div class="w-100 flex justify-center my-8"><hr class="md:w-1/4 w-1/2 border-neutral"></div><div class="alert alert-info text-left text-text flex flex-col items-start gap-0"><h6 class="text-info-content flex gap-1 items-center !my-0 !text-lg"><span class=notification-bell><svg class="size-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848.0 005.454-1.31A8.967 8.967.0 0118 9.75V9A6 6 0 006 9v.75a8.967 8.967.0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714.0a24.255 24.255.0 01-5.714.0m5.714.0a3 3 0 11-5.714.0"/></svg></span>Interested in my work?</h6><div class="collapsible-content w-full"><div class="mt-2 w-full text-base-content"><p class=text-base-content>Consider subscribing to the
<a href=https://madebyme.today/index.xml class="link link-primary" title="RSS Feed">RSS Feed</a> or
joining my mailing list:
<a href=https://groups.google.com/g/madebyme-notifications class="link link-primary">madebyme-notifications on Google Groups </a>.</p><hr class="my-3 border-neutral-content w-full"><p class="text-sm text-neutral-content"><b>Disclaimer:</b> Only group owner (i.e. me) can view e-mail addresses
of group members. I will not share your e-mail with any third-parties
&mdash; it will be used exclusively to notify you about new blog posts.</p></div></div></div><div class="join grid grid-cols-2 mt-4"><a class="join-item btn h-auto py-2 px-4" href=https://madebyme.today/blog/python-dict-vs-curly-brackets/><div class="grid grid-rows-2 gap-2 items-start w-full text-left"><p class="text-sm uppercase font-extralight">Â« Previous</p><p class=text-sm>Performance Analysis of Python&rsquo;s <code>dict()</code> and <code>{}</code></p></div></a><a class="join-item btn h-auto py-2 px-4" disabled href=#><div class="grid grid-rows-2 gap-2 items-end w-full text-right"><p class="text-sm uppercase font-extralight place-content-start">Next Â»</p><p class=text-sm></p></div></a></div><hr class="my-4 border-neutral opacity-25"><script>let theme=getTheme(),giscusAttributes={src:"https://giscus.app/client.js","data-repo":"nathiss/nathiss.github.io","data-repo-id":"MDEwOlJlcG9zaXRvcnk4MDYyNjk2Ng==","data-category":"Announcements","data-category-id":"DIC_kwDOBM5FFs4CYJcb","data-mapping":"pathname","data-strict":"1","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":theme,"data-lang":"en","data-loading":"lazy",crossorigin:"anonymous",async:""},giscusScript=document.createElement("script");Object.entries(giscusAttributes).forEach(([e,t])=>giscusScript.setAttribute(e,t)),document.querySelector("article.entry").appendChild(giscusScript)</script></article></main><footer class="footer footer-center text-base-content p-4"><aside><p>Copyright &copy;
2023&ndash;2025
<span class=text-primary>Kamil</span>
Rusin
/
<a href=/privacy/ class="link link-primary">Privacy</a></p></aside></footer><div id=madebyme-consent-banner class="toast toast-end hidden w-full sm:w-auto min-w-0 sm:min-w-fit"><div class="card bg-base-100 shadow-xl max-w-lg border"><div class="card-body gap-4"><div class="flex justify-between"><h3 class=card-title>Cookies ðŸª</h3><button id=close-consent-button class="btn btn-square btn-sm" aria-label=Close><svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18 18 6M6 6l12 12"/></svg></button></div><div class="markdown-body text-sm"><p>This website uses <a href=https://marketingplatform.google.com/about/analytics/>Google Analytics 4</a> to gather data about page views and <a href=https://giscus.app/>Giscus</a> to support article comments.</p><p>This website respects the <a href=https://en.wikipedia.org/wiki/Do_Not_Track>Do Not Track</a> header field. If you do not wish to be tracked by Google Analytics, then please
enable <a href=https://en.wikipedia.org/wiki/Do_Not_Track>Do Not Track</a> for this domain.</p><p>If you wish to know more about data gathered on this website, read <a href=https://madebyme.today/privacy/>About Tracking & Data Collection</a>.</p></div><button id=consent-button class="btn btn-primary text-wrap">I acknowledge, don't show me this again</button></div></div></div><div id=page-progressbar class="fixed top-0 left-0 w-0 h-1 bg-primary-500 dark:bg-darkmode-primary-500 rounded-e-md" role=progressbar aria-valuemin=0 aria-valuenow=0 aria-valuemax=100></div><script>updateThemeCheckboxStatus(),giscusSendMessage({setConfig:{theme:getTheme()}})</script><script>const consentBannerKey="madebyme-given-consent",consentBannerVersion="9b17d89527a0803c9ca685eace5d3ec887d77f4173ad86d2d064b78ebbeb7497";document.getElementById("close-consent-button").addEventListener("click",()=>{document.getElementById("madebyme-consent-banner").classList.add("hidden")}),document.getElementById("consent-button").addEventListener("click",()=>{localStorage.setItem(consentBannerKey,consentBannerVersion),document.getElementById("madebyme-consent-banner").classList.add("hidden")});const localBannerVersion=localStorage.getItem(consentBannerKey);localBannerVersion!==consentBannerVersion&&document.getElementById("madebyme-consent-banner").classList.remove("hidden")</script><script defer>const readingProgressBar={progressBar:document.getElementById("page-progressbar"),update:()=>{const t=document.documentElement.scrollTop,n=document.documentElement.scrollHeight-document.documentElement.clientHeight,e=t/n*100;readingProgressBar.progressBar.setAttribute("aria-valuenow",Math.trunc(e)),readingProgressBar.progressBar.style.width=e+"%"}};document.addEventListener("scroll",readingProgressBar.update);const bodyResizeObserver=new ResizeObserver(e=>{readingProgressBar.update()});bodyResizeObserver.observe(document.body)</script><script type=application/ld+json>{"@context":"https://schema.org/","@type":"Webpage","mainContentOfPage":{"@context":"https://schema.org/","@type":"WebPageElement","cssSelector":"#site-main"},"primaryImageOfPage":"https://madebyme.today/polaris-1920x1080.webp"}</script><script type=application/ld+json>{"@context":"https://schema.org/","@type":"WebSite","name":"MadeByMe","alternateName":"MadeByMe","url":"https://madebyme.today/","description":"I'm Kamil; I work as a software engineer and this is a collection of all things I've been working on in my personal time.","disambiguatingDescription":"I'm Kamil; I work as a software engineer and this is a collection of all things I've been working on in my personal time.","isFamilyFriendly":"true","thumbnailUrl":"https://madebyme.today/favicons/favicon-180x180-box-light.png","image":"https://madebyme.today/favicons/favicon-180x180-box-light.png","inLanguage":"en-us","sameAs":["https://www.madebyme.today","https://www.madebyme.today/","https://madebyme.today","index.xml"],"author":{"@context":"https://schema.org/","@type":"Person","gender":"male","email":"kamil.jakub.rusin@gmail.com","givenName":"Kamil","familyName":"Rusin","name":"Kamil Rusin","jobTitle":"Software Engineer","nationality":{"@context":"https://schema.org/","@type":"Country","name":"PL"},"alumniOf":{"@context":"https://schema.org/","@type":"CollegeOrUniversity","url":"https://www.pk.edu.pl/","name":"The Cracow University of Technology"},"url":"https:\/\/madebyme.today\/"}}</script></body></html>