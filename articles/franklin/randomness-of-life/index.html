<!doctype html><html lang=en><head><script async src="https://www.googletagmanager.com/gtag/js?id=G-CXYG0Q9PH0"></script>
<script>var dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-CXYG0Q9PH0",{anonymize_ip:!1})}</script><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=stylesheet type=text/css title=light href=https://madebyme.today/stylesheets/light.min.d2fe17bf70cc2248445908fe59ece03cfdc44cfec152e1ec8b05d97767b3f4690c184656e60b35d9b0969d61c7c79f85f8fc9e560b814a78e54ead5dc5a00e08.css integrity="sha512-0v4Xv3DMIkhEWQj+WezgPP3ETP7BUuHsiwXZd2ez9GkMGEZW5gs12bCWnWHHx5+F+PyeVguBSnjlTq1dxaAOCA=="><link rel=icon href=/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://madebyme.today/favicons/favicon-16x16-box-light.png><link rel=icon type=image/png sizes=32x32 href=https://madebyme.today/favicons/favicon-32x32-box-light.png><link rel=icon type=image/png sizes=64x64 href=https://madebyme.today/favicons/favicon-64x64-box-light.png><link rel=apple-touch-icon sizes=180x180 href=https://madebyme.today/favicons/favicon-180x180-box-light.png><link rel=stylesheet href=/3rd-party/katex@v0.16.4/katex.min.css><script defer src=/3rd-party/katex@v0.16.4/katex.min.js></script>
<script defer src=/3rd-party/katex@v0.16.4/contrib/auto-render.min.js onload=renderMathInElement(document.body)></script>
<link rel=canonical href=https://madebyme.today/articles/franklin/randomness-of-life/><meta name=description content="In the previous article from this series, we&rsquo;ve talked about
genetic algorithms and how they can be used to generate art. Now let&rsquo;s put those ideas into action and focus on
implementing the first part of our artistic toolset: mutators."><meta name=author content="Kamil Rusin"><meta name=msapplication-TileColor content="#297373"><meta name=theme-color content="#297373"><meta name=twitter:dnt content="on"><meta name=title property="og:title" content="Randomness of Life"><meta property="og:description" content="In the previous article from this series, we&rsquo;ve talked about
genetic algorithms and how they can be used to generate art. Now let&rsquo;s put those ideas into action and focus on
implementing the first part of our artistic toolset: mutators."><meta property="og:type" content="article"><meta property="og:url" content="https://madebyme.today/articles/franklin/randomness-of-life/"><meta name=image property="og:image" content="https://madebyme.today/articles/franklin/randomness-of-life/alexander-grey-2eAkk5lIkC8-unsplash.jpg"><meta name=image property="og:image" content="https://madebyme.today/articles/franklin/randomness-of-life/alexander-grey-2eAkk5lIkC8-unsplash.webp"><meta property="article:section" content="articles"><meta property="article:published_time" content="2023-03-20T10:02:19+01:00"><meta property="article:modified_time" content="2023-03-20T10:02:19+01:00"><meta property="article:author" content="Kamil Rusin"><meta property="og:site_name" content="MadeByMe"><meta property="og:see_also" content="https://madebyme.today/articles/franklin/art-from-chaos/"><meta property="og:see_also" content="https://madebyme.today/articles/franklin/natural-selection-and-loss-functions/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://madebyme.today/articles/franklin/randomness-of-life/alexander-grey-2eAkk5lIkC8-unsplash.jpg"><meta name=twitter:title content="Randomness of Life"><meta name=twitter:description content="In the previous article from this series, we&rsquo;ve talked about
genetic algorithms and how they can be used to generate art. Now let&rsquo;s put those ideas into action and focus on
implementing the first part of our artistic toolset: mutators."><meta name=twitter:site content="@AreElectrons"><meta name=generator content="Hugo 0.119.0"><title>Randomness of Life - MadeByMe</title></head><body><div class=navbar><div class=container><div class="row justify-content-center"><div class=generic-navbar-col><div class=navbar-content><div class=navbar-logo><a href=https://madebyme.today/ class=plain><img src=https://madebyme.today/images/brand-logo-64x64.png alt=brand-logo width=64 height=64>
<span>MadeByMe</span></a></div><nav class="nav navbar-items"><ul><li><a href=/articles/ title=Articles>Articles</a></li><li><a href=/cv/ title=Resum√©>Resum√©</a></li></ul></nav></div></div></div></div></div><main class=site-main><div class=container><div class="row justify-content-center"><div class=generic-col><nav class="nav breadcrumb"><script type=application/ld+json>{"@context":"https://schema.org/","@type":"BreadcrumbList","itemListOrder":"ItemListOrderAscending","itemListElement":[{"@context":"https://schema.org/","@type":"ListItem","position":1,"name":"MadeByMe","item":"https://madebyme.today/","url":"https://madebyme.today/articles/franklin/randomness-of-life/"},{"@context":"https://schema.org/","@type":"ListItem","position":2,"name":"Articles","item":"https://madebyme.today/articles/","url":"https://madebyme.today/articles/franklin/randomness-of-life/"},{"@context":"https://schema.org/","@type":"ListItem","position":3,"name":"Franklin","item":"https://madebyme.today/articles/franklin/","url":"https://madebyme.today/articles/franklin/randomness-of-life/"},{"@context":"https://schema.org/","@type":"ListItem","position":4,"name":"Randomness of Life","item":"https://madebyme.today/articles/franklin/randomness-of-life/","url":"https://madebyme.today/articles/franklin/randomness-of-life/"}]}</script><ul><li><a href=https://madebyme.today/>root</a></li><li><a href=https://madebyme.today/articles/>Articles</a></li><li><a href=https://madebyme.today/articles/franklin/>Franklin</a></li><li class=active aria-current=page><a href=https://madebyme.today/articles/franklin/randomness-of-life/>Randomness of Life</a></li></ul></nav><article class=entry><script type=application/ld+json>{"@context":"https://schema.org/","@type":"BlogPosting","name":"Randomness of Life","headline":"Randomness of Life | MadeByMe","alternativeHeadline":"Randomness of Life | MadeByMe","url":"https://madebyme.today/articles/franklin/randomness-of-life/","datePublished":"2023-03-20T10:02:19+01:00","inLanguage":"en-us","wordCount":1318,"isFamilyFriendly":"true","copyrightYear":"2023","copyrightHolder":{"@context":"https://schema.org/","@type":"Person","givenName":"Kamil","familyName":"Rusin","name":"Kamil Rusin"},"description":"In the previous article from this series, we\u0026rsquo;ve talked about genetic algorithms and how they can be used to generate art. Now let\u0026rsquo;s put those ideas into action and focus on implementing the first part of our artistic toolset: mutators.\n","publisher":{"@context":"https://schema.org/","@type":"Organization","name":"MadeByMe","url":"https://madebyme.today/"},"articleSection":"Franklin","image":["https://madebyme.today/articles/franklin/randomness-of-life/alexander-grey-2eAkk5lIkC8-unsplash.jpg","https://madebyme.today/articles/franklin/randomness-of-life/alexander-grey-2eAkk5lIkC8-unsplash.webp"],"thumbnailUrl":"https://madebyme.today/articles/franklin/randomness-of-life/alexander-grey-2eAkk5lIkC8-unsplash.jpg","keywords":["Genetic Algorithm","Rust"],"mainEntityOfPage":"true","articleBody":"In the previous article from this series, we\u0026rsquo;ve talked about genetic algorithms and how they can be used to generate art. Now let\u0026rsquo;s put those ideas into action and focus on implementing the first part of our artistic toolset: mutators.\nPreparing the ecosystem Before we begin working on mutators, we need to prepare an environment in which our specimens can thrive. We don\u0026rsquo;t need much - right now the only thing is a generation. For the record, in this context, a generation is a collection of specimen which can be mutated, scored, and bred (basically experimented upon) to get us closer to the optimum. Since our specimens are images, they can be represented by the following structs:\nstruct Pixel { r: u8, g: u8, b: u8, } struct Image { height: usize, width: usize, pixels: Vec\u0026lt;Pixel\u0026gt;, } Representing each pixel as a 24-bit value gives us some flexibility here \u0026ndash; it allows us to operate on two color depths: true color (which uses 24-bit colors) and grayscale (8-bit). Creating a grayscale pixel can be done by setting up all color channels to the same value. True, it uses thrice as much memory as it could, but\u0026hellip;\nPremature optimization is the root of all evil.\n~ Donald Knuth\nMethod of initializing1 the generation will affect how fast we can search the solution space. As the algorithm produces more fitted images, the specimens get closed to the source image. But we don\u0026rsquo;t really care about how fast the optimum can be achieved, frankly, we don\u0026rsquo;t really care about achieving the optimum in the first place. It is the process of getting more fitted images and seeing how they evolve what\u0026rsquo;s really interesting. Therefore our generation will be initialized by blank images - images filled by white pixels. It will reduce pace of solution space search, but will produce images that are more visually interesting. We are here to do art, after all. üé®\nimpl Pixel { #[must_use] pub const fn white() -\u0026gt; Self { Pixel::new(255, 255, 255) } #[must_use] pub const fn new(r: u8, g: u8, b: u8) -\u0026gt; Self { Pixel { r, g, b } } } impl Image { #[must_use] pub fn new(height: usize, width: usize, pixels: Vec\u0026lt;Pixel\u0026gt;) -\u0026gt; Self { Self { height, width, pixels, } } #[must_use] pub fn blank(height: usize, width: usize, pixel: \u0026amp;Pixel) -\u0026gt; Self { let size = height * width; let pixels = vec![pixel.clone(); size]; Self::new(height, width, pixels) } } #[must_use] fn get_first_generation( vec_len: usize, image_height: usize, image_width: usize ) -\u0026gt; Vec\u0026lt;Image\u0026gt; { let pixel = Pixel::white(); vec![Image::blank(height, width, \u0026amp;pixel); vec_len] } This code takes care of initializing the generation. üëå\nThrowing dice and hoping for the best As was mentioned in the previous article, mutators act only on one specimen at a time, inserting random modification onto it. With that description alone, we can already define a contract for all mutators we\u0026rsquo;re going to implement:\npub trait Mutator { fn mutate(\u0026amp;self, image: \u0026amp;mut Image); } Why \u0026amp;self and not \u0026amp;mut self? Due to the fact that mutations are independent of one another, they can be performed concurrently. In fact, as we will see in the future articles, mutating and scoring are the only steps that can be easily run in parallel.\nA diagram showing the flow of actions applied on a single generation.\nThrowing a rectangular dice Rectangles are the easiest shape to draw both algorithmically and IRL; our first mutator will use rectangles as a mutation primitive. To generate a random rectangle we need have the following:\ncoordinates of one of its corners, width, height, fill color. Fill color is pretty straightforward, but other values have some constraints they need to meet. An image we\u0026rsquo;ll be mutating has width and height \u0026ndash; let\u0026rsquo;s assume it\u0026rsquo;s n and m respectively. Coordinates of one of the corners, in our case it\u0026rsquo;s going to be top-left, are limited by the image dimensions. Width and height are limited by both image dimensions, and the coordinates we just generated.\n$$ x \\in \\lbrack 0 .. n \\lbrack \\newline y \\in \\lbrack 0 .. m \\lbrack \\newline width \\in \\lbrack 1 .. n - x + 1 \\lbrack \\newline height \\in \\lbrack 1 .. m - y + 1 \\lbrack \\newline $$\nWhy coordinates intervals are right-open? Because if the mutator selects the very right or bottom edge, then the rectangle would need to have zero width/height. By not right-closing the intervals, we ensure that there\u0026rsquo;s at least one pixel which can be mutated üëå. Similarly both width and height intervals are right-open to ensure that the rectangle will not overflow the image.\nstruct RandomRectangle { x: usize, y: usize, width: usize, height: usize, } #[must_use] fn get_random_rectangle(random: \u0026amp;mut Random, image: \u0026amp;Image) -\u0026gt; RandomRectangle { let image_width = image.width(); let image_height = image.height(); let x = random.get_random(0usize, image_width); let y = random.get_random(0usize, image_height); let width = random.get_random(0usize, image_width - x) + 1; let height = random.get_random(0usize, image_height - y) + 1; RandomRectangle { x, y, width, height, } } Function get_random_rectangle is a neat helper: based on the given RNG2 and image, it returns a struct representing a random rectangle within the boundaries of the image.\nOnly two things left to do: generate random color and draw the shape. The implementation of rectangle mutator will look like this:\n#[derive(Debug, Default)] pub struct RectangleMutator; impl Mutator for RectangleMutator { fn mutate(\u0026amp;self, image: \u0026amp;mut Image) { let mut random = Random::default(); let rect = get_random_rectangle(\u0026amp;mut random, image); let r = random.get_random(0u8, 255); let g = random.get_random(0u8, 255); let b = random.get_random(0u8, 255); let image_width = image.width(); for j in rect.y..(rect.height + rect.y) { for i in rect.x..(rect.width + rect.x) { let pixel = \u0026amp;mut image[j * image_width + i]; pixel.r(r); pixel.g(g); pixel.b(b); } } } } The implementation is really simple. First we get a random rectangle (using the helper function), then generate color channels, and finally draw the shape. Drawing itself is done by two nested loops iterating over columns and rows of the image. With the two indexes it references a specific pixel: j * image_width + 1 and finally overrides it using the color channels.\nCool, let\u0026rsquo;s see what the program generates after 10 000 generations when initialized with \u0026ldquo;Mona Lisa\u0026rdquo;.\nMona Lisa (generation #10 000) Doesn\u0026rsquo;t really looks like anything. üòê\nWhich isn\u0026rsquo;t very surprising; the code did what it was suppose to do: it generated random rectangles on the white image. Since we don\u0026rsquo;t have any scoring logic yet (that\u0026rsquo;s a topic for another article) the resulting image is composed of random noise. We\u0026rsquo;ll need to wait a bit longer to get an image that even remotely reflects \u0026ldquo;Mona Lisa\u0026rdquo;.\nThrowing dice of other shapes It\u0026rsquo;d be nice to have mutators other than RectangleMutator, which are able to mutate images with different shapes, but I\u0026rsquo;m not going to cover them here. The reason is simple \u0026ndash; they operate under the same rules: you need to define boundaries first and then you need to draw the desired shape. I\u0026rsquo;ve implemented two other mutators: TriangleMutator and CircleMutator. Their sources can be found here.\nAfterword You might\u0026rsquo;ve noticed that the code examples of this article are not strictly bounded together, meaning you cannot just copy them to have a working example. A bunch of things like: Random implementation, loading the original image, mutation loop, and the whole impl Image block are missing. If you want to have a working solution it\u0026rsquo;s here (locked down to the newest commit at the moment of writing \u0026ndash; 73aa8da). The goal of this series is not to go through every single line of code to build a working utility, but rather to present an idea. So, moving forward all future articles from this series will also be done in that style.\nPhoto by Alexander Grey on Unsplash\nStay tuned üåä\nUsually the generation is generated randomly. See here.\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nRandom is a project-private utility class. Source can be found here.\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","author":{"@context":"https://schema.org/","@type":"Person","gender":"male","email":"kamil.jakub.rusin@gmail.com","givenName":"Kamil","familyName":"Rusin","name":"Kamil Rusin","jobTitle":"Software Engineer","nationality":{"@context":"https://schema.org/","@type":"Country","name":"PL"},"alumniOf":{"@context":"https://schema.org/","@type":"CollegeOrUniversity","url":"https://www.pk.edu.pl/","name":"The Cracow University of Technology"},"url":"https:\/\/madebyme.today\/"}}</script><script type=application/ld+json>{"@context":"https://schema.org/","@type":"WPHeader","@id":"#article-title","cssSelector":"#article-title"}</script><header><h1 id=article-title>Randomness of Life</h1></header><footer class=entry-meta><time datetime=2023-03-20T10:02:19><span>2023</span>
<span>03</span>
<span>20</span></time>
<span>7 min</span>
<span><span class=success>Kamil</span>
<span>Rusin</span></span></footer><aside class=table-of-contents-wrapper><div class=wrap-collapsible><input id=toc-collapsible class=toggle type=checkbox>
<label for=toc-collapsible class=lbl-toggle>Table Of Contents</label><div class=collapsible-content><div class=content-inner><nav id=TableOfContents><ul><li><a href=#preparing-the-ecosystem>Preparing the ecosystem</a></li><li><a href=#throwing-dice-and-hoping-for-the-best>Throwing dice and hoping for the best</a><ul><li><a href=#throwing-a-rectangular-dice>Throwing a rectangular dice</a></li><li><a href=#throwing-dice-of-other-shapes>Throwing dice of other shapes</a></li></ul></li><li><a href=#afterword>Afterword</a></li></ul></nav></div></div></div></aside><div class=main><p>In <a href=/articles/franklin/art-from-chaos/>the previous article</a> from this series, we&rsquo;ve talked about
genetic algorithms and how they can be used to generate art. Now let&rsquo;s put those ideas into action and focus on
implementing the first part of our artistic toolset: <strong>mutators</strong>.</p><h2 id=preparing-the-ecosystem>Preparing the ecosystem
<a class=anchor href=#preparing-the-ecosystem aria-label=Anchor><span class=inline-svg><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M10.6666 13.3333 10.0808 12.7475c-.78102-.7811-.78102-2.0474.0-2.82845l4.5049-4.50489C15.3668 4.63311 16.6331 4.63311 17.4142 5.41415l1.1715 1.17157C19.3668 7.36677 19.3668 8.6331 18.5857 9.41415L16.9999 10.9999m-3.6666-.3333L13.919 11.2524c.7811.7811.7811 2.0474.0 2.8284L9.41415 18.5857C8.6331 19.3668 7.36677 19.3668 6.58572 18.5857L5.41416 17.4142C4.63311 16.6331 4.63311 15.3668 5.41416 14.5857l1.58578-1.5858" stroke="#393636" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></span></a></h2><p>Before we begin working on mutators, we need to prepare an environment in which our specimens can thrive. We don&rsquo;t need
much - right now the only thing is <em>a generation</em>. For the record, in this context, a generation is a collection of
specimen which can be mutated, scored, and bred (basically experimented upon) to get us closer to the optimum. Since our
specimens are images, they can be represented by the following structs:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#00a8c8>struct</span> <span style=color:#75af00>Pixel</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>r</span>: <span style=color:#00a8c8>u8</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>g</span>: <span style=color:#00a8c8>u8</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>b</span>: <span style=color:#00a8c8>u8</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>struct</span> <span style=color:#75af00>Image</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>height</span>: <span style=color:#00a8c8>usize</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>width</span>: <span style=color:#00a8c8>usize</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>pixels</span>: <span style=color:#111>Vec</span><span style=color:#f92672>&lt;</span><span style=color:#111>Pixel</span><span style=color:#f92672>&gt;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><p>Representing each pixel as a 24-bit value gives us some flexibility here &ndash; it allows us to operate on two color depths:
<a href=https://en.wikipedia.org/wiki/Color_depth#True_color_(24-bit)>true color</a> (which uses 24-bit colors) and
<a href=https://en.wikipedia.org/wiki/Grayscale>grayscale</a> (8-bit). Creating a grayscale pixel can be done by setting up all
color channels to the same value. True, it uses thrice as much memory as it could, but&mldr;</p><blockquote><p>Premature optimization is the root of all evil.<br>~ Donald Knuth</p></blockquote><p><span style=text-decoration:underline>Method of initializing</span><sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> the generation will affect how fast we can search the
solution space. As the algorithm produces more fitted images, the specimens get closed to the source image. But we don&rsquo;t
really care about how <em>fast</em> the optimum can be achieved, frankly, we don&rsquo;t really care about achieving the optimum in
the first place. It is <em>the process</em> of getting more fitted images and seeing how they evolve what&rsquo;s really interesting.
Therefore our generation will be initialized by blank images - images filled by white pixels. It will reduce pace of
solution space search, but will produce images that are more visually interesting. We are here to do art, after all.
üé®</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#00a8c8>impl</span> <span style=color:#111>Pixel</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>#[must_use]</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>pub</span> <span style=color:#00a8c8>const</span> <span style=color:#00a8c8>fn</span> <span style=color:#75af00>white</span><span style=color:#111>()</span> -&gt; <span style=color:#75af00>Self</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>Pixel</span>::<span style=color:#111>new</span><span style=color:#111>(</span><span style=color:#ae81ff>255</span><span style=color:#111>,</span> <span style=color:#ae81ff>255</span><span style=color:#111>,</span> <span style=color:#ae81ff>255</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>    <span style=color:#111>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>#[must_use]</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>pub</span> <span style=color:#00a8c8>const</span> <span style=color:#00a8c8>fn</span> <span style=color:#75af00>new</span><span style=color:#111>(</span><span style=color:#111>r</span>: <span style=color:#00a8c8>u8</span><span style=color:#111>,</span> <span style=color:#111>g</span>: <span style=color:#00a8c8>u8</span><span style=color:#111>,</span> <span style=color:#111>b</span>: <span style=color:#00a8c8>u8</span><span style=color:#111>)</span> -&gt; <span style=color:#75af00>Self</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>Pixel</span> <span style=color:#111>{</span> <span style=color:#111>r</span><span style=color:#111>,</span> <span style=color:#111>g</span><span style=color:#111>,</span> <span style=color:#111>b</span> <span style=color:#111>}</span>
</span></span><span style=display:flex><span>    <span style=color:#111>}</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>impl</span> <span style=color:#111>Image</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>#[must_use]</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>pub</span> <span style=color:#00a8c8>fn</span> <span style=color:#75af00>new</span><span style=color:#111>(</span><span style=color:#111>height</span>: <span style=color:#00a8c8>usize</span><span style=color:#111>,</span> <span style=color:#111>width</span>: <span style=color:#00a8c8>usize</span><span style=color:#111>,</span> <span style=color:#111>pixels</span>: <span style=color:#111>Vec</span><span style=color:#f92672>&lt;</span><span style=color:#111>Pixel</span><span style=color:#f92672>&gt;</span><span style=color:#111>)</span> -&gt; <span style=color:#75af00>Self</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>Self</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>            <span style=color:#111>height</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>            <span style=color:#111>width</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>            <span style=color:#111>pixels</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>        <span style=color:#111>}</span>
</span></span><span style=display:flex><span>    <span style=color:#111>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>#[must_use]</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>pub</span> <span style=color:#00a8c8>fn</span> <span style=color:#75af00>blank</span><span style=color:#111>(</span><span style=color:#111>height</span>: <span style=color:#00a8c8>usize</span><span style=color:#111>,</span> <span style=color:#111>width</span>: <span style=color:#00a8c8>usize</span><span style=color:#111>,</span> <span style=color:#111>pixel</span>: <span style=color:#00a8c8>&amp;</span><span style=color:#75af00>Pixel</span><span style=color:#111>)</span> -&gt; <span style=color:#75af00>Self</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>let</span> <span style=color:#111>size</span> <span style=color:#f92672>=</span> <span style=color:#111>height</span> <span style=color:#f92672>*</span> <span style=color:#111>width</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>let</span> <span style=color:#111>pixels</span> <span style=color:#f92672>=</span> <span style=color:#111>vec!</span><span style=color:#111>[</span><span style=color:#111>pixel</span><span style=color:#111>.</span><span style=color:#111>clone</span><span style=color:#111>();</span> <span style=color:#111>size</span><span style=color:#111>];</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#111>Self</span>::<span style=color:#111>new</span><span style=color:#111>(</span><span style=color:#111>height</span><span style=color:#111>,</span> <span style=color:#111>width</span><span style=color:#111>,</span> <span style=color:#111>pixels</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>    <span style=color:#111>}</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#[must_use]</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>fn</span> <span style=color:#75af00>get_first_generation</span><span style=color:#111>(</span>
</span></span><span style=display:flex><span>    <span style=color:#111>vec_len</span>: <span style=color:#00a8c8>usize</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>image_height</span>: <span style=color:#00a8c8>usize</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>image_width</span>: <span style=color:#00a8c8>usize</span>
</span></span><span style=display:flex><span><span style=color:#111>)</span> -&gt; <span style=color:#111>Vec</span><span style=color:#f92672>&lt;</span><span style=color:#111>Image</span><span style=color:#f92672>&gt;</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>let</span> <span style=color:#111>pixel</span> <span style=color:#f92672>=</span> <span style=color:#111>Pixel</span>::<span style=color:#111>white</span><span style=color:#111>();</span>
</span></span><span style=display:flex><span>    <span style=color:#111>vec!</span><span style=color:#111>[</span><span style=color:#111>Image</span>::<span style=color:#111>blank</span><span style=color:#111>(</span><span style=color:#111>height</span><span style=color:#111>,</span> <span style=color:#111>width</span><span style=color:#111>,</span> <span style=color:#f92672>&amp;</span><span style=color:#111>pixel</span><span style=color:#111>);</span> <span style=color:#111>vec_len</span><span style=color:#111>]</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><p>This code takes care of initializing the generation. üëå</p><h2 id=throwing-dice-and-hoping-for-the-best>Throwing dice and hoping for the best
<a class=anchor href=#throwing-dice-and-hoping-for-the-best aria-label=Anchor><span class=inline-svg><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M10.6666 13.3333 10.0808 12.7475c-.78102-.7811-.78102-2.0474.0-2.82845l4.5049-4.50489C15.3668 4.63311 16.6331 4.63311 17.4142 5.41415l1.1715 1.17157C19.3668 7.36677 19.3668 8.6331 18.5857 9.41415L16.9999 10.9999m-3.6666-.3333L13.919 11.2524c.7811.7811.7811 2.0474.0 2.8284L9.41415 18.5857C8.6331 19.3668 7.36677 19.3668 6.58572 18.5857L5.41416 17.4142C4.63311 16.6331 4.63311 15.3668 5.41416 14.5857l1.58578-1.5858" stroke="#393636" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></span></a></h2><p>As was mentioned in the previous article, mutators act only on one specimen at a time, inserting random modification
onto it. With that description alone, we can already define a contract for all mutators we&rsquo;re going to implement:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#00a8c8>pub</span> <span style=color:#00a8c8>trait</span> <span style=color:#111>Mutator</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>fn</span> <span style=color:#75af00>mutate</span><span style=color:#111>(</span><span style=color:#f92672>&amp;</span><span style=color:#111>self</span><span style=color:#111>,</span> <span style=color:#111>image</span>: <span style=color:#00a8c8>&amp;</span><span style=color:#75af00>mut</span> <span style=color:#111>Image</span><span style=color:#111>);</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><p>Why <code>&amp;self</code> and not <code>&amp;mut self</code>? Due to the fact that mutations are independent of one another, they can be performed
concurrently. In fact, as we will see in the future articles, mutating and scoring are the only steps that can be
<em>easily</em> run in parallel.</p><figure><img src=./genetic-algorithm-flow.webp alt="Genetic Algorithm Flow" loading=lazy><figcaption><p>A diagram showing the flow of actions applied on a single generation.</p></figcaption></figure><h3 id=throwing-a-rectangular-dice>Throwing a rectangular dice
<a class=anchor href=#throwing-a-rectangular-dice aria-label=Anchor><span class=inline-svg><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M10.6666 13.3333 10.0808 12.7475c-.78102-.7811-.78102-2.0474.0-2.82845l4.5049-4.50489C15.3668 4.63311 16.6331 4.63311 17.4142 5.41415l1.1715 1.17157C19.3668 7.36677 19.3668 8.6331 18.5857 9.41415L16.9999 10.9999m-3.6666-.3333L13.919 11.2524c.7811.7811.7811 2.0474.0 2.8284L9.41415 18.5857C8.6331 19.3668 7.36677 19.3668 6.58572 18.5857L5.41416 17.4142C4.63311 16.6331 4.63311 15.3668 5.41416 14.5857l1.58578-1.5858" stroke="#393636" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></span></a></h3><p>Rectangles are the easiest shape to draw both algorithmically and IRL; our first mutator will use rectangles as a
mutation primitive. To generate a random rectangle we need have the following:</p><ul><li>coordinates of one of its corners,</li><li>width,</li><li>height,</li><li>fill color.</li></ul><p><em>Fill color</em> is pretty straightforward, but other values have some constraints they need to meet. An image we&rsquo;ll be
mutating has width and height &ndash; let&rsquo;s assume it&rsquo;s <span class=monospace>n</span>
and <span class=monospace>m</span>
respectively. Coordinates of one of the corners, in our case it&rsquo;s going to be top-left, are limited by the image
dimensions. Width and height are limited by both image dimensions, and the coordinates we just generated.</p><p>$$
x \in \lbrack 0 .. n \lbrack \newline
y \in \lbrack 0 .. m \lbrack \newline
width \in \lbrack 1 .. n - x + 1 \lbrack \newline
height \in \lbrack 1 .. m - y + 1 \lbrack \newline
$$</p><p>Why coordinates intervals are right-open? Because if the mutator selects the very right or bottom edge, then the
rectangle would need to have zero width/height. By not right-closing the intervals, we ensure that there&rsquo;s at least one
pixel which can be mutated üëå. Similarly both <span class=monospace>width</span>
and <span class=monospace>height</span>
intervals are right-open to ensure that the rectangle will not overflow the image.</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#00a8c8>struct</span> <span style=color:#75af00>RandomRectangle</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#111>x</span>: <span style=color:#00a8c8>usize</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>y</span>: <span style=color:#00a8c8>usize</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>width</span>: <span style=color:#00a8c8>usize</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>height</span>: <span style=color:#00a8c8>usize</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#[must_use]</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>fn</span> <span style=color:#75af00>get_random_rectangle</span><span style=color:#111>(</span><span style=color:#111>random</span>: <span style=color:#00a8c8>&amp;</span><span style=color:#75af00>mut</span> <span style=color:#111>Random</span><span style=color:#111>,</span> <span style=color:#111>image</span>: <span style=color:#00a8c8>&amp;</span><span style=color:#75af00>Image</span><span style=color:#111>)</span> -&gt; <span style=color:#75af00>RandomRectangle</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>let</span> <span style=color:#111>image_width</span> <span style=color:#f92672>=</span> <span style=color:#111>image</span><span style=color:#111>.</span><span style=color:#111>width</span><span style=color:#111>();</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>let</span> <span style=color:#111>image_height</span> <span style=color:#f92672>=</span> <span style=color:#111>image</span><span style=color:#111>.</span><span style=color:#111>height</span><span style=color:#111>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>let</span> <span style=color:#111>x</span> <span style=color:#f92672>=</span> <span style=color:#111>random</span><span style=color:#111>.</span><span style=color:#111>get_random</span><span style=color:#111>(</span><span style=color:#ae81ff>0</span><span style=color:#00a8c8>usize</span><span style=color:#111>,</span> <span style=color:#111>image_width</span><span style=color:#111>);</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>let</span> <span style=color:#111>y</span> <span style=color:#f92672>=</span> <span style=color:#111>random</span><span style=color:#111>.</span><span style=color:#111>get_random</span><span style=color:#111>(</span><span style=color:#ae81ff>0</span><span style=color:#00a8c8>usize</span><span style=color:#111>,</span> <span style=color:#111>image_height</span><span style=color:#111>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>let</span> <span style=color:#111>width</span> <span style=color:#f92672>=</span> <span style=color:#111>random</span><span style=color:#111>.</span><span style=color:#111>get_random</span><span style=color:#111>(</span><span style=color:#ae81ff>0</span><span style=color:#00a8c8>usize</span><span style=color:#111>,</span> <span style=color:#111>image_width</span> <span style=color:#f92672>-</span> <span style=color:#111>x</span><span style=color:#111>)</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>let</span> <span style=color:#111>height</span> <span style=color:#f92672>=</span> <span style=color:#111>random</span><span style=color:#111>.</span><span style=color:#111>get_random</span><span style=color:#111>(</span><span style=color:#ae81ff>0</span><span style=color:#00a8c8>usize</span><span style=color:#111>,</span> <span style=color:#111>image_height</span> <span style=color:#f92672>-</span> <span style=color:#111>y</span><span style=color:#111>)</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#111>RandomRectangle</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>        <span style=color:#111>x</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>        <span style=color:#111>y</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>        <span style=color:#111>width</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>        <span style=color:#111>height</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#111>}</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><p>Function <code>get_random_rectangle</code> is a neat helper: based on the given <span style=text-decoration:underline>RNG</span><sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> and
image, it returns a struct representing a random rectangle within the boundaries of the image.</p><p>Only two things left to do: generate random color and draw the shape. The implementation of rectangle mutator will look
like this:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>#[derive(Debug, Default)]</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>pub</span> <span style=color:#00a8c8>struct</span> <span style=color:#75af00>RectangleMutator</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>impl</span> <span style=color:#111>Mutator</span> <span style=color:#00a8c8>for</span> <span style=color:#111>RectangleMutator</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>fn</span> <span style=color:#75af00>mutate</span><span style=color:#111>(</span><span style=color:#f92672>&amp;</span><span style=color:#111>self</span><span style=color:#111>,</span> <span style=color:#111>image</span>: <span style=color:#00a8c8>&amp;</span><span style=color:#75af00>mut</span> <span style=color:#111>Image</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>let</span> <span style=color:#00a8c8>mut</span> <span style=color:#111>random</span> <span style=color:#f92672>=</span> <span style=color:#111>Random</span>::<span style=color:#111>default</span><span style=color:#111>();</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>let</span> <span style=color:#111>rect</span> <span style=color:#f92672>=</span> <span style=color:#111>get_random_rectangle</span><span style=color:#111>(</span><span style=color:#f92672>&amp;</span><span style=color:#00a8c8>mut</span> <span style=color:#111>random</span><span style=color:#111>,</span> <span style=color:#111>image</span><span style=color:#111>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>let</span> <span style=color:#111>r</span> <span style=color:#f92672>=</span> <span style=color:#111>random</span><span style=color:#111>.</span><span style=color:#111>get_random</span><span style=color:#111>(</span><span style=color:#ae81ff>0</span><span style=color:#00a8c8>u8</span><span style=color:#111>,</span> <span style=color:#ae81ff>255</span><span style=color:#111>);</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>let</span> <span style=color:#111>g</span> <span style=color:#f92672>=</span> <span style=color:#111>random</span><span style=color:#111>.</span><span style=color:#111>get_random</span><span style=color:#111>(</span><span style=color:#ae81ff>0</span><span style=color:#00a8c8>u8</span><span style=color:#111>,</span> <span style=color:#ae81ff>255</span><span style=color:#111>);</span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>let</span> <span style=color:#111>b</span> <span style=color:#f92672>=</span> <span style=color:#111>random</span><span style=color:#111>.</span><span style=color:#111>get_random</span><span style=color:#111>(</span><span style=color:#ae81ff>0</span><span style=color:#00a8c8>u8</span><span style=color:#111>,</span> <span style=color:#ae81ff>255</span><span style=color:#111>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>let</span> <span style=color:#111>image_width</span> <span style=color:#f92672>=</span> <span style=color:#111>image</span><span style=color:#111>.</span><span style=color:#111>width</span><span style=color:#111>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#00a8c8>for</span> <span style=color:#111>j</span> <span style=color:#00a8c8>in</span> <span style=color:#111>rect</span><span style=color:#111>.</span><span style=color:#111>y</span><span style=color:#f92672>..</span><span style=color:#111>(</span><span style=color:#111>rect</span><span style=color:#111>.</span><span style=color:#111>height</span> <span style=color:#f92672>+</span> <span style=color:#111>rect</span><span style=color:#111>.</span><span style=color:#111>y</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>            <span style=color:#00a8c8>for</span> <span style=color:#111>i</span> <span style=color:#00a8c8>in</span> <span style=color:#111>rect</span><span style=color:#111>.</span><span style=color:#111>x</span><span style=color:#f92672>..</span><span style=color:#111>(</span><span style=color:#111>rect</span><span style=color:#111>.</span><span style=color:#111>width</span> <span style=color:#f92672>+</span> <span style=color:#111>rect</span><span style=color:#111>.</span><span style=color:#111>x</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>                <span style=color:#00a8c8>let</span> <span style=color:#111>pixel</span> <span style=color:#f92672>=</span> <span style=color:#f92672>&amp;</span><span style=color:#00a8c8>mut</span> <span style=color:#111>image</span><span style=color:#111>[</span><span style=color:#111>j</span> <span style=color:#f92672>*</span> <span style=color:#111>image_width</span> <span style=color:#f92672>+</span> <span style=color:#111>i</span><span style=color:#111>];</span>
</span></span><span style=display:flex><span>                <span style=color:#111>pixel</span><span style=color:#111>.</span><span style=color:#111>r</span><span style=color:#111>(</span><span style=color:#111>r</span><span style=color:#111>);</span>
</span></span><span style=display:flex><span>                <span style=color:#111>pixel</span><span style=color:#111>.</span><span style=color:#111>g</span><span style=color:#111>(</span><span style=color:#111>g</span><span style=color:#111>);</span>
</span></span><span style=display:flex><span>                <span style=color:#111>pixel</span><span style=color:#111>.</span><span style=color:#111>b</span><span style=color:#111>(</span><span style=color:#111>b</span><span style=color:#111>);</span>
</span></span><span style=display:flex><span>            <span style=color:#111>}</span>
</span></span><span style=display:flex><span>        <span style=color:#111>}</span>
</span></span><span style=display:flex><span>    <span style=color:#111>}</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><p>The implementation is really simple. First we get a random rectangle <em>(using the helper function)</em>, then generate color
channels, and finally draw the shape. Drawing itself is done by two nested loops iterating over columns and rows of the
image. With the two indexes it references a specific pixel: <code>j * image_width + 1</code> and finally overrides it using the
color channels.</p><p>Cool, let&rsquo;s see what the program generates after 10 000 generations when initialized with
&ldquo;<a href=https://en.wikipedia.org/wiki/File:Mona_Lisa,_by_Leonardo_da_Vinci,_from_C2RMF_retouched.webp>Mona Lisa</a>&rdquo;.</p><figure class=border><img src=./output_010000.png alt="Random noise" loading=lazy><figcaption><h4>Mona Lisa (generation #10 000)</h4></figcaption></figure><p>Doesn&rsquo;t really looks like anything. üòê<br>Which isn&rsquo;t very surprising; the code did what it was suppose to do: it generated random rectangles on the white image.
Since we don&rsquo;t have any scoring logic yet (that&rsquo;s a topic for another article) the resulting image is composed of random
noise. We&rsquo;ll need to wait a bit longer to get an image that even remotely reflects &ldquo;Mona Lisa&rdquo;.</p><h3 id=throwing-dice-of-other-shapes>Throwing dice of other shapes
<a class=anchor href=#throwing-dice-of-other-shapes aria-label=Anchor><span class=inline-svg><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M10.6666 13.3333 10.0808 12.7475c-.78102-.7811-.78102-2.0474.0-2.82845l4.5049-4.50489C15.3668 4.63311 16.6331 4.63311 17.4142 5.41415l1.1715 1.17157C19.3668 7.36677 19.3668 8.6331 18.5857 9.41415L16.9999 10.9999m-3.6666-.3333L13.919 11.2524c.7811.7811.7811 2.0474.0 2.8284L9.41415 18.5857C8.6331 19.3668 7.36677 19.3668 6.58572 18.5857L5.41416 17.4142C4.63311 16.6331 4.63311 15.3668 5.41416 14.5857l1.58578-1.5858" stroke="#393636" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></span></a></h3><p>It&rsquo;d be nice to have mutators other than <code>RectangleMutator</code>, which are able to mutate images with different shapes, but
I&rsquo;m not going to cover them here. The reason is simple &ndash; they operate under the same rules: you need to define
boundaries first and then you need to draw the desired shape. I&rsquo;ve implemented two other mutators: <code>TriangleMutator</code> and
<code>CircleMutator</code>. Their sources can be found
<a href=https://github.com/nathiss/franklin/tree/73aa8dada3e8c3cae9aff5e24637785268e3527a/src/mutators>here</a>.</p><h2 id=afterword>Afterword
<a class=anchor href=#afterword aria-label=Anchor><span class=inline-svg><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M10.6666 13.3333 10.0808 12.7475c-.78102-.7811-.78102-2.0474.0-2.82845l4.5049-4.50489C15.3668 4.63311 16.6331 4.63311 17.4142 5.41415l1.1715 1.17157C19.3668 7.36677 19.3668 8.6331 18.5857 9.41415L16.9999 10.9999m-3.6666-.3333L13.919 11.2524c.7811.7811.7811 2.0474.0 2.8284L9.41415 18.5857C8.6331 19.3668 7.36677 19.3668 6.58572 18.5857L5.41416 17.4142C4.63311 16.6331 4.63311 15.3668 5.41416 14.5857l1.58578-1.5858" stroke="#393636" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></span></a></h2><p>You might&rsquo;ve noticed that the code examples of this article are not strictly bounded together, meaning you cannot just
copy them to have a working example. A bunch of things like: <code>Random</code> implementation, loading the original image,
mutation loop, and the whole <code>impl Image</code> block are missing. If you want to have a working solution it&rsquo;s
<a href=https://github.com/nathiss/franklin/tree/73aa8dada3e8c3cae9aff5e24637785268e3527a>here</a> <em>(locked down to the newest
commit at the moment of writing &ndash; 73aa8da)</em>. The goal of this series is not to go through every single line of code to
build a working utility, but rather to present an idea. So, moving forward all future articles from this series will
also be done in that style.</p><figure class=border><img src=./alexander-grey-2eAkk5lIkC8-unsplash.webp alt="Randomness of Life" loading=lazy><figcaption><p>Photo by <a href="https://unsplash.com/@sharonmccutcheon?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Alexander Grey</a> on <a href="https://unsplash.com/photos/2eAkk5lIkC8?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a></p></figcaption></figure><p>Stay tuned üåä</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>Usually the generation is generated randomly. See
<a href=https://en.wikipedia.org/wiki/Genetic_algorithm#Initialization>here</a>.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p><code>Random</code> is a project-private utility class. Source can be found
<a href=https://github.com/nathiss/franklin/blob/73aa8dada3e8c3cae9aff5e24637785268e3527a/src/util/random.rs>here</a>.&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><ul class=tags><li><a class=plain-border href=https://madebyme.today/tags/genetic-algorithm/>Genetic Algorithm</a></li><li><a class=plain-border href=https://madebyme.today/tags/rust/>Rust</a></li></ul><ul class=social-media><li><a href="https://facebook.com/sharer/sharer.php?u=https%3A%2F%2Fmadebyme.today%2Farticles%2Ffranklin%2Frandomness-of-life%2F&amp;t=Randomness+of+Life+-+MadeByMe" target=_blank rel=me title="Share on Facebook"><span class=inline-svg><svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M22 12C22 6.47714 17.5229 1.99999 12 1.99999 6.47715 1.99999 2 6.47714 2 12c0 4.9913 3.65686 9.1283 8.4375 9.8785V14.8906H7.89844V12H10.4375V9.79687c0-2.50625 1.4929-3.89063 3.7771-3.89063C15.3087 5.90624 16.4531 6.10155 16.4531 6.10155V8.56249h-1.261c-1.2422.0-1.6296.77084-1.6296 1.56171V12h2.7734L15.8926 14.8906H13.5625v6.9879C18.3431 21.1283 22 16.9913 22 12z" stroke="#000" stroke-linejoin="round"/></svg></span></a></li><li><a href="https://twitter.com/intent/tweet/?url=https%3A%2F%2Fmadebyme.today%2Farticles%2Ffranklin%2Frandomness-of-life%2F&amp;text=Randomness+of+Life+-+MadeByMe" target=_blank rel=me title="Share on Twitter"><span class=inline-svg><svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M21.9999 5.9246C21.2644 6.25051 20.4744 6.47071 19.6437 6.57025 20.4911 6.06289 21.1411 5.25782 21.4477 4.29948c-.7928.47036-1.671.81212-2.6055.99533C18.0935 4.49855 17.0277 4 15.8474 4c-2.2655.0-4.1029 1.8374-4.1029 4.10464C11.7445 8.42526 11.7815 8.73707 11.8502 9.03832 8.43877 8.86656 5.41666 7.23263 3.39252 4.75046c-.35233.60777-.55492 1.31243-.55492 2.06289.0 1.42342.72492 2.68035 1.82507 3.41585C3.98972 10.2072 3.35729 10.0231 2.80413 9.71567V9.76852c0 1.98798 1.41373 3.64658 3.29164 4.02358C5.75049 13.8855 5.38847 13.9348 5.015 13.9348 4.75075 13.9348 4.49267 13.9102 4.24252 13.8626c.52233 1.6295 2.03735 2.8169 3.83335 2.8486-1.40492 1.101-3.1745 1.7572-5.09645 1.7572C2.64823 18.4684 2.32144 18.449 1.99994 18.4112c1.81626 1.1653 3.97252 1.8435 6.28909 1.8435 7.54867.0 11.67537-6.2521 11.67537-11.67441C19.9644 8.40412 19.9599 8.2262 19.952 8.05003 20.7536 7.47045 21.4494 6.74905 21.9982 5.92724L21.9999 5.9246z" stroke="#000" stroke-linejoin="round"/></svg></span></a></li><li><a href="http://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fmadebyme.today%2Farticles%2Ffranklin%2Frandomness-of-life%2F&amp;title=Randomness+of+Life+-+MadeByMe&amp;source=https%3A%2F%2Fmadebyme.today%2F" target=_blank rel=me title="Share on LinkedIn"><span class=inline-svg><svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M22 3.47059V20.5294C22 20.9194 21.845 21.2935 21.5692 21.5693 21.2935 21.8451 20.9194 22 20.5294 22H3.47056C3.08053 22 2.70648 21.8451 2.43069 21.5693 2.15491 21.2935 1.99997 20.9194 1.99997 20.5294V3.47059c0-.39003.15494-.76408.43072-1.03986C2.70648 2.15494 3.08053 2 3.47056 2H20.5294C20.9194 2 21.2935 2.15494 21.5692 2.43073 21.845 2.70651 22 3.08056 22 3.47059v0zM7.88232 9.64706H4.94115V19.0588H7.88232V9.64706zM8.14703 6.41176C8.14858 6.18929 8.10629 5.96869 8.02258 5.76255 7.93888 5.55642 7.81539 5.36879 7.65916 5.21039c-.15622-.15841-.34211-.2845-.54706-.37106S6.68715 4.70742 6.46468 4.70588H6.41173c-.45242.0-.88632.17973-1.20624.49964-.31991.31992-.49964.75382-.49964 1.20624.0.45243.17973.88633.49964 1.20625C5.52541 7.93792 5.95931 8.11765 6.41173 8.11765v0C6.63423 8.12312 6.85562 8.0847 7.06325 8.00458 7.27089 7.92447 7.46071 7.80422 7.62186 7.65072 7.78301 7.49722 7.91234 7.31346 8.00245 7.10996 8.09256 6.90646 8.14169 6.6872 8.14703 6.46471V6.41176zM19.0588 13.3412c0-2.8294-1.8-3.92943-3.5882-3.92943C14.8851 9.38245 14.3021 9.50715 13.7798 9.77345 13.2576 10.0397 12.8142 10.4383 12.4941 10.9294H12.4117V9.64706H9.64703V19.0588H12.5882V14.0529C12.5457 13.5403 12.7072 13.0315 13.0376 12.6372 13.368 12.2429 13.8407 11.9949 14.3529 11.9471H14.4647C15.4 11.9471 16.0941 12.5353 16.0941 14.0176v5.0412h2.9412L19.0588 13.3412z" stroke="#000" stroke-linejoin="round"/></svg></span></a></li><li><a href="https://www.reddit.com/submit?url=https%3A%2F%2Fmadebyme.today%2Farticles%2Ffranklin%2Frandomness-of-life%2F&amp;title=Randomness+of+Life+-+MadeByMe" target=_blank rel=me title="Share on Reddit"><span class=inline-svg><svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M8.83552 12.4444C8.72564 12.6089 8.66699 12.8022 8.66699 13 8.66699 13.1313 8.69285 13.2614 8.74311 13.3827 8.79336 13.504 8.86702 13.6142 8.95988 13.7071S9.16298 13.8736 9.2843 13.9239C9.40563 13.9741 9.53567 14 9.66699 14 9.86477 14 10.0581 13.9414 10.2226 13.8315c.164400000000001-.1099.2926-.2661.3683-.4488C10.6666 13.2 10.6864 12.9989 10.6478 12.8049 10.6092 12.6109 10.5139 12.4327 10.3741 12.2929 10.2342 12.153 10.0561 12.0578 9.86208 12.0192 9.6681 11.9806 9.46703 12.0004 9.2843 12.0761 9.10158 12.1518 8.9454 12.28 8.83552 12.4444z" stroke="#000" stroke-linejoin="round"/><path fill="none" d="M13.7414 13.8715C13.9059 13.9814 14.0992 14.04 14.297 14.04L14.287 14.08C14.4226 14.0815 14.5571 14.0553 14.6822 14.0032 14.8074 13.9511 14.9207 13.874 15.0152 13.7767 15.1096 13.6795 15.1833 13.564 15.2318 13.4373 15.2802 13.3107 15.3024 13.1755 15.297 13.04 15.297 12.8422 15.2383 12.6489 15.1285 12.4844 15.0186 12.32 14.8624 12.1918 14.6797 12.1161 14.4969 12.0404 14.2959 12.0206 14.1019 12.0592 13.9079 12.0978 13.7297 12.193 13.5899 12.3329 13.45 12.4727 13.3548 12.6509 13.3162 12.8449 13.2776 13.0389 13.2974 13.24 13.3731 13.4227 13.4488 13.6054 13.577 13.7616 13.7414 13.8715z" stroke="#000" stroke-linejoin="round"/><path fill="none" fill-rule="evenodd" clip-rule="evenodd" d="M21.997 12c0 5.5228-4.4772 10-10 10C6.47415 22 1.99699 17.5228 1.99699 12c0-5.52285 4.47716-10 10.00001-10 5.5228.0 10 4.47715 10 10zM18.4035 11.2154C18.5652 11.446 18.6567 11.7185 18.667 12 18.6712 12.2755 18.5974 12.5467 18.4541 12.782 18.3108 13.0174 18.1038 13.2073 17.857 13.33 17.8682 13.4765 17.8682 13.6236 17.857 13.77c0 2.24-2.61 4.06-5.83 4.06-3.22001.0-5.83001-1.82-5.83001-4.06-.01126-.1464-.01126-.2935.0-.44C6.00465 13.2416 5.83382 13.1125 5.69635 12.9515 5.55887 12.7906 5.45804 12.6017 5.40084 12.3979 5.34363 12.1941 5.33143 11.9803 5.36506 11.7713 5.3987 11.5623 5.47737 11.3632 5.59563 11.1876c.11826-.1755.27328-.3233.45431-.433.18103-.1096.38375-.178699999999999.5941-.2022C6.85439 10.5288 7.06736 10.5513 7.26816 10.6182 7.46897 10.6852 7.65283 10.795 7.80699 10.94 8.95926 10.1585 10.3149 9.73099 11.707 9.71L12.447 6.24C12.4553 6.19983 12.4715 6.16171 12.4946 6.12784 12.5178 6.09398 12.5474 6.06505 12.5819 6.04272 12.6163 6.0204 12.6548 6.00513 12.6951 5.99779 12.7355 5.99046 12.7769 5.99121 12.817 6l2.45.49C15.3866 6.28444 15.5756 6.12825 15.8001 6.04948 16.0245 5.9707 16.2696 5.9745 16.4915 6.06019 16.7134 6.14587 16.8975 6.30784 17.0107 6.51701 17.1239 6.72617 17.1589 6.96885 17.1093 7.20147 17.0597 7.4341 16.9288 7.64143 16.7402 7.78627 16.5515 7.9311 16.3174 8.00394 16.0799 7.99172 15.8423 7.9795 15.6169 7.88301 15.4441 7.71958 15.2713 7.55615 15.1624 7.33648 15.137 7.1L12.997 6.65l-.65 3.12C13.7222 9.7995 15.0594 10.2267 16.197 11 16.4002 10.805 16.6555 10.6729 16.9321 10.6196 17.2087 10.5664 17.4948 10.5943 17.7559 10.7 18.0169 10.8057 18.2419 10.9847 18.4035 11.2154z" stroke="#000" stroke-linejoin="round"/><path fill="none" fill-rule="evenodd" clip-rule="evenodd" d="M9.75838 15.5632C9.75455 15.5601 9.74967 15.5585 9.74472 15.5587 9.73976 15.559 9.73506 15.5611 9.73155 15.5646 9.72804 15.5681 9.72596 15.5728 9.72572 15.5777L9.7257 15.5788c.6563.481 1.457.725099999999999 2.2709.6914C12.0035 16.2699 12.0104 16.2699 12.0173 16.2702 12.837 16.3042 13.6432 16.0564 14.3021 15.5686 14.2996 15.5663 14.2967 15.5644 14.2936 15.563 14.29 15.5615 14.2862 15.5607 14.2824 15.5607 14.2746 15.5606 14.2671 15.5636 14.2615 15.569 14.2525 15.5778 14.2429 15.5858 14.2327 15.5931 13.5829 16.0593 12.7942 16.2909 11.9958 16.2503 11.1982 16.2831 10.413 16.0439 9.76912 15.5716L9.75838 15.5632z" stroke="#000" stroke-linejoin="round"/></svg></span></a></li></ul><div class=series-buttons><a class=prev-button-wrapper href=https://madebyme.today/articles/franklin/art-from-chaos/><p class=prev-button-name>Previous</p><p class=article-name>Art From Chaos</p></a><a class=next-button-wrapper href=https://madebyme.today/articles/franklin/natural-selection-and-loss-functions/><p class=next-button-name>Next</p><p class=article-name>Natural Selection and Loss Functions</p></a></div><hr><script src=https://giscus.app/client.js data-repo=nathiss/nathiss.github.io data-repo-id="MDEwOlJlcG9zaXRvcnk4MDYyNjk2Ng==" data-category=Announcements data-category-id=DIC_kwDOBM5FFs4CYJcb data-mapping=pathname data-strict=1 data-reactions-enabled=0 data-emit-metadata=0 data-input-position=bottom data-theme=light data-lang=en data-loading=lazy crossorigin=anonymous async></script></article></div></div><div class="row justify-content-center"><div class=generic-col><footer class="d-flex justify-content-center my-3"><p class=m-0>Copyright &copy;
2023
<span class=success>Kamil</span>
Rusin</p><span class=mx-1>/</span><p class=m-0><a href=/privacy/>Privacy</a></p></footer></div></div></div></main><div id=madebyme-consent-banner class=madebyme-consent-banner><p>This website uses <a href=https://marketingplatform.google.com/about/analytics/>Google Analytics 4</a> to
gather data about page views and <a href=https://giscus.app/>Giscus</a> to support article comments.</p><p>This website respects <b><a href=https://en.wikipedia.org/wiki/Do_Not_Track>Do Not Track</a></b> header field.
If you do not wish to be tracked by Google Analytics, then please enable <b>Do Not Track</b> for this domain.</p><p>If you wish to know more about data gathered on this website, read <a href=/privacy/>About Tracking & Data Collection</a>.</p><div class=consent-button-wrapper><button id=consent-button class=consent-button>I acknowledge, don't show me this again</button></div></div><script>const localStorageKey="madebyme-given-consent",consentBannerVersion="4";document.getElementById("consent-button").addEventListener("click",()=>{localStorage.setItem(localStorageKey,consentBannerVersion),document.getElementById("madebyme-consent-banner").style.display="none"});const localBannerVersion=localStorage.getItem(localStorageKey);localBannerVersion!==consentBannerVersion&&(document.getElementById("madebyme-consent-banner").style.display="block")</script><script type=application/ld+json>{"@context":"https://schema.org/","@type":"Webpage","mainContentOfPage":{"@context":"https://schema.org/","@type":"WebPageElement","cssSelector":".site-main"},"primaryImageOfPage":"https://madebyme.today/articles/franklin/randomness-of-life/alexander-grey-2eAkk5lIkC8-unsplash.jpg"}</script><script type=application/ld+json>{"@context":"https://schema.org/","@type":"WebSite","name":"MadeByMe","alternateName":"MadeByMe","url":"https://madebyme.today/","description":"I'm Kamil I work as a software engineer and this is a collection of all things I've been working on in my personal time.","disambiguatingDescription":"I'm Kamil I work as a software engineer and this is a collection of all things I've been working on in my personal time.","isFamilyFriendly":"true","thumbnailUrl":"https://madebyme.today/favicons/favicon-180x180-box-light.png","image":"https://madebyme.today/favicons/favicon-180x180-box-light.png","inLanguage":"en-us","sameAs":["https://www.madebyme.today","https://www.madebyme.today/","https://madebyme.today","index.xml"],"author":{"@context":"https://schema.org/","@type":"Person","gender":"male","email":"kamil.jakub.rusin@gmail.com","givenName":"Kamil","familyName":"Rusin","name":"Kamil Rusin","jobTitle":"Software Engineer","nationality":{"@context":"https://schema.org/","@type":"Country","name":"PL"},"alumniOf":{"@context":"https://schema.org/","@type":"CollegeOrUniversity","url":"https://www.pk.edu.pl/","name":"The Cracow University of Technology"},"url":"https:\/\/madebyme.today\/"}}</script></body></html>